<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Echidna Coverage Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
:root {
    --primary: #6366f1;
    --primary-hover: #4f46e5;
    --primary-light: rgba(99,102,241,0.1);
    --success: #22c55e;
    --warning: #eab308;
    --danger: #ef4444;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --surface: #fff;
    --text: var(--gray-800);
    --text-light: var(--gray-500);
    --radius: 0.375rem;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow: 0 1px 3px rgba(0,0,0,0.1);
    --success-rgb: 34,197,94;
    --warning-rgb: 234,179,8;
    --danger-rgb: 239,68,68;
}

/* Reset */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Roboto', -apple-system, sans-serif;
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--text);
    background: var(--gray-50);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

a {
    color: var(--primary);
    text-decoration: none;
}

a:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}

button {
    cursor: pointer;
    background: transparent;
    border: none;
    padding: 0;
    font: inherit;
    color: inherit;
    outline: none;
}

/* Layout */
.app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
}

header {
    background: var(--surface);
    border-bottom: 1px solid var(--gray-200);
    padding: 1rem 1.5rem;
    z-index: 10;
    box-shadow: var(--shadow-sm);
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1400px;
    margin: 0;
    width: 100%;
}

.logo-text {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--gray-800);
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 2.25rem;
    padding: 0 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: var(--radius);
    transition: all 0.2s;
    border: 1px solid transparent;
}

.btn-secondary {
    background: #B92B3D;
    border-color: #B92B3D;
    color: white;
}

.btn-secondary:hover {
    background: #9e2434;
    border-color: #9e2434;
}

.btn-sm {
    height: 2rem;
    padding: 0 0.5rem;
    font-size: 0.75rem;
}

.button-group {
    display: flex;
    gap: 0.75rem;
    width: 100%;
}

.button-group .btn {
    flex: 1;
}

/* Split panel layout */
.split-panel {
    display: flex;
    flex: 1;
    overflow: hidden;
    position: relative;
}

#file-split-panel {
    display: flex;
    flex-direction: row;
}

/* File explorer panel */
#file-explorer {
    flex: 0 0 260px;
    height: 100%;
    overflow: auto;
    background: var(--surface);
    border-right: 1px solid var(--gray-200);
    padding: 0;
    position: relative;
    min-width: 200px;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    overflow-x: hidden; /* to not show horizontal scrollbar with resizer */
}

#file-explorer-resizer {
    position: absolute;
    top: 0;
    right: -5px;
    width: 10px;
    height: 100%;
    cursor: col-resize;
    z-index: 10;
    background: linear-gradient(to right, transparent, rgba(0,0,0,0.05), transparent);
}

#file-explorer-resizer:hover {
    background: linear-gradient(to right, transparent, rgba(0,0,0,0.1), transparent);
}

.file-explorer-header {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    border-bottom: 1px solid var(--gray-200);
}

.file-search {
    padding: 0.5rem 1rem;
    border-bottom: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
}

.file-search input {
    flex: 1;
    border: 1px solid var(--gray-300);
    border-radius: var(--radius);
    padding: 0.5rem;
    font-size: 0.875rem;
    outline: none;
}

.file-search input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 1px var(--primary-light);
}

#file-search-clear {
    margin-left: 0.5rem;
    color: var(--gray-500);
    font-size: 1.25rem;
    line-height: 1;
    padding: 0.25rem;
    border-radius: var(--radius);
}

#file-search-clear:hover {
    background: var(--gray-100);
}

.search-highlight {
    background: var(--primary-light);
    color: var(--primary);
    font-weight: 500;
}

.search-no-results {
    padding: 1rem;
    font-style: italic;
    color: var(--gray-500);
    text-align: center;
}

.file-explorer-content {
    overflow: auto;
    flex: 1;
    padding: 1rem;
}

.file-explorer-title {
    font-size: 0.875rem;
    font-weight: 600;
    margin: 0;
    color: var(--gray-600);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Main view panel */
#main-view-panel {
    flex: 1;
    height: 100%;
    overflow: auto;
    padding: 1.5rem;
    background: var(--gray-50);
}

/* Stats cards */
.stats-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.stat-card {
    background: var(--surface);
    border-radius: var(--radius);
    padding: 1.25rem;
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
}

.stat-title {
    font-size: 0.875rem;
    color: var(--text-light);
    margin-bottom: 0.5rem;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.stat-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    background: var(--primary-light);
    color: var(--primary);
}

/* Progress bar */
.progress-container {
    width: 100%;
    height: 0.5rem;
    background: var(--gray-200);
    border-radius: 9999px;
    overflow: hidden;
    margin-top: 0.5rem;
}

.progress-bar {
    height: 100%;
    border-radius: 9999px;
    transition: width 0.3s;
}

/* File tree */
.file-tree {
    list-style: none;
    padding-left: 0;
    margin: 0;
    font-size: 0.875rem;
}

.file-tree li {
    margin: 0.25rem 0;
}

.file-tree ul {
    list-style: none;
    padding-left: 1.25rem;
    margin: 0.25rem 0;
}

.file-item {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: 0.375rem 0.5rem;
    border-radius: var(--radius);
    transition: background-color 0.2s;
}

.file-item:hover {
    background: var(--gray-100);
}

.file-item.active {
    background: var(--primary-light);
    color: var(--primary);
}

.file-toggle {
    width: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    color: var(--gray-500);
}

.file-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 0.5rem;
    color: var(--gray-500);
}

.file-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-coverage {
    width: 0.75rem;
    height: 0.75rem;
    border-radius: 50%;
    margin-left: 0.5rem;
}

/* File tree icons */
.directory > .file-item > .file-icon:before { content: "ðŸ“"; }
.directory.expanded > .file-item > .file-icon:before { content: "ðŸ“‚"; }
.file > .file-item > .file-icon:before { content: "ðŸ“„"; }
.directory > .file-item > .file-toggle:before { content: "â–¶"; }
.directory.expanded > .file-item > .file-toggle:before { content: "â–¼"; }
.file > .file-item > .file-toggle { visibility: hidden; }
.directory > ul { display: none; }
.directory.expanded > ul { display: block; }

/* Source files */
.source-file {
    margin-bottom: 1.5rem;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
    background: var(--surface);
}

.source-file-header {
    padding: 0.75rem 1rem;
    background: #12181E;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color 0.2s;
}

.source-file-header:hover {
    background: #1e2832;
}

.source-file-header .file-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.source-file-header .file-name {
    font-weight: 500;
}

.source-file-header .coverage-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
}

.source-file-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.source-file.expanded .source-file-content {
    max-height: none;
}

.source-file-stats {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--gray-200);
    font-size: 0.875rem;
    color: var(--text-light);
}

/* Code styling */
.code-container {
    position: relative;
    overflow: auto;
    max-height: 600px;
}

.code-coverage-table {
    border-collapse: collapse;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.8125rem;
    line-height: 1.5;
    tab-size: 4;
    width: 100%;
}

.code-coverage-table pre {
    margin: 0;
    font-family: inherit;
}

.row-line-number {
    user-select: none;
    text-align: right;
    padding: 0 0.75rem;
    width: 1%;
    min-width: 2.5rem;
    color: var(--gray-400);
    background: var(--gray-100);
    border-right: 1px solid var(--gray-200);
}

.row-reverted-status {
    user-select: none;
    text-align: center;
    width: 1%;
    min-width: 2.25rem;
    max-width: fit-content;
    padding: 0 0.25rem;
    color: var(--gray-600);
    background: var(--gray-100);
    border-right: 1px solid var(--gray-200);
    white-space: nowrap;
}

.row-source {
    padding: 0 0.75rem;
}

.row-line-covered {
    background: rgba(var(--success-rgb), 0.1);
}

.row-line-uncovered {
    background: rgba(var(--danger-rgb), 0.1);
}

/* Footer */
footer {
    background: var(--surface);
    border-top: 1px solid var(--gray-200);
    padding: 1rem;
    text-align: center;
    font-size: 0.875rem;
    color: var(--gray-500);
}

/* Responsive */
@media (max-width: 768px) {
    .stats-container { grid-template-columns: 1fr; }
    #file-explorer { display: none; }
}    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <span class="logo-text">Echidna Coverage Report</span>
            </div>
        </header>

        <!-- Main content -->
        <div class="split-panel" id="file-split-panel">
            <!-- File Explorer -->
            <div id="file-explorer">
                <div class="file-explorer-header">
                    <h3 class="file-explorer-title">Files</h3>
                </div>
                <div class="file-search">
                    <input type="text" id="file-search-input" placeholder="Search files..." />
                    <button id="file-search-clear" title="Clear search">Ã—</button>
                </div>
                <div class="file-explorer-content">
                    <ul id="file-tree-root" class="file-tree"></ul>
                    <div id="search-no-results" class="search-no-results" style="display: none;">No matching files found</div>
                </div>
                <div id="file-explorer-resizer"></div>
            </div>

            <!-- Main panel -->
            <div id="main-view-panel">
                <!-- Overview -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-title">Files</div>
                        <div class="stat-value">23</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Total Lines</div>
                        <div class="stat-value">4802</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Coverage</div>
                        <div class="stat-value">66.0%</div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 66.0%; background-color: hsl(79, 90%, 45%)"></div>
                        </div>
                        <div style="margin-top: 0.5rem">
                            <span class="stat-badge">696 / 1049 lines</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-title">Actions</div>
                        <div class="button-group">
                            <button class="btn btn-secondary btn-sm" onclick="setAllSourceFilesCollapsed(false)">Expand All</button>
                            <button class="btn btn-secondary btn-sm" onclick="setAllSourceFilesCollapsed(true)">Collapse All</button>
                        </div>
                        <div class="button-group" style="margin-top: 0.5rem">
                            <button class="btn btn-secondary btn-sm" onclick="setEmptySourceFilesCollapsed(false)">Expand Empty</button>
                            <button class="btn btn-secondary btn-sm" onclick="setEmptySourceFilesCollapsed(true)">Collapse Empty</button>
                        </div>
                    </div>
                </div>

                <!-- Individual file coverage -->
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_access_Ownable_sol" data-file-path="lib/openzeppelin-contracts/contracts/access/Ownable.sol" data-lines-active="11" data-lines-covered="6">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(64, 90%, 45%, 0.15); color: hsl(64, 90%, 45%)">
                                54.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/access/Ownable.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>6 / 11</strong> (54.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.0.0) (access/Ownable.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {Context} from &quot;../utils/Context.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> * @dev Contract module which provides a basic access control mechanism, where</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * there is an account (an owner) that can be granted exclusive access to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * specific functions.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * The initial owner is set to the address provided by the deployer. This can</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * later be changed with {transferOwnership}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> * This module is used through inheritance. It will make available the modifier</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> * `onlyOwner`, which can be applied to your functions to restrict their use to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre> * the owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>abstract contract Ownable is Context {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>    address private _owner;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>     * @dev The caller account is not authorized to perform an operation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>    error OwnableUnauthorizedAccount(address account);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>     * @dev The owner is not a valid owner account. (eg. `address(0)`)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>    error OwnableInvalidOwner(address owner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>     * @dev Initializes the contract setting the address provided by the deployer as the initial owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>    constructor(address initialOwner) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>        if (initialOwner == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>            revert OwnableInvalidOwner(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>        _transferOwnership(initialOwner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>     * @dev Throws if called by any account other than the owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    modifier onlyOwner() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>        _checkOwner();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>     * @dev Returns the address of the current owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    function owner() public view virtual returns (address) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>        return _owner;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>     * @dev Throws if the sender is not the owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    function _checkOwner() internal view virtual {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>        if (owner() != _msgSender()) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>            revert OwnableUnauthorizedAccount(_msgSender());</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>     * @dev Leaves the contract without owner. It will not be possible to call</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     * `onlyOwner` functions. Can only be called by the current owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     * NOTE: Renouncing ownership will leave the contract without an owner,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     * thereby disabling any functionality that is only available to the owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>    function renounceOwnership() public virtual onlyOwner {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>        _transferOwnership(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>     * @dev Transfers ownership of the contract to a new account (`newOwner`).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>     * Can only be called by the current owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    function transferOwnership(address newOwner) public virtual onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        if (newOwner == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>            revert OwnableInvalidOwner(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>        _transferOwnership(newOwner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>     * @dev Transfers ownership of the contract to a new account (`newOwner`).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>     * Internal function without access restriction.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>    function _transferOwnership(address newOwner) internal virtual {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        address oldOwner = _owner;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>        _owner = newOwner;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>        emit OwnershipTransferred(oldOwner, newOwner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_interfaces_IERC1363_sol" data-file-path="lib/openzeppelin-contracts/contracts/interfaces/IERC1363.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/interfaces/IERC1363.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (interfaces/IERC1363.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.6.2;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC20} from &quot;./IERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {IERC165} from &quot;./IERC165.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * @title IERC1363</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * @dev Interface of the ERC-1363 standard as defined in the https://eips.ethereum.org/EIPS/eip-1363[ERC-1363].</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * Defines an extension interface for ERC-20 tokens that supports executing code on a recipient contract</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * after `transfer` or `transferFrom`, or code on a spender contract after `approve`, in a single transaction.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>interface IERC1363 is IERC20, IERC165 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    /*</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>     * Note: the ERC-165 identifier for this interface is 0xb0202a11.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>     * 0xb0202a11 ===</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;transferAndCall(address,uint256)&#39;)) ^</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;transferAndCall(address,uint256,bytes)&#39;)) ^</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;transferFromAndCall(address,address,uint256)&#39;)) ^</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;transferFromAndCall(address,address,uint256,bytes)&#39;)) ^</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;approveAndCall(address,uint256)&#39;)) ^</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>     *   bytes4(keccak256(&#39;approveAndCall(address,uint256,bytes)&#39;))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from the caller&#39;s account to `to`</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>     * and then calls {IERC1363Receiver-onTransferReceived} on `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>     * @param to The address which you want to transfer to.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    function transferAndCall(address to, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from the caller&#39;s account to `to`</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>     * and then calls {IERC1363Receiver-onTransferReceived} on `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>     * @param to The address which you want to transfer to.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>     * @param data Additional data with no specified format, sent in call to `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    function transferAndCall(address to, uint256 value, bytes calldata data) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from `from` to `to` using the allowance mechanism</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>     * and then calls {IERC1363Receiver-onTransferReceived} on `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>     * @param from The address which you want to send tokens from.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>     * @param to The address which you want to transfer to.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    function transferFromAndCall(address from, address to, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from `from` to `to` using the allowance mechanism</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>     * and then calls {IERC1363Receiver-onTransferReceived} on `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>     * @param from The address which you want to send tokens from.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>     * @param to The address which you want to transfer to.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>     * @param data Additional data with no specified format, sent in call to `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>    function transferFromAndCall(address from, address to, uint256 value, bytes calldata data) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>     * caller&#39;s tokens and then calls {IERC1363Spender-onApprovalReceived} on `spender`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     * @param spender The address which will spend the funds.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be spent.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    function approveAndCall(address spender, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>     * caller&#39;s tokens and then calls {IERC1363Spender-onApprovalReceived} on `spender`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>     * @param spender The address which will spend the funds.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>     * @param value The amount of tokens to be spent.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>     * @param data Additional data with no specified format, sent in call to `spender`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>     * @return A boolean value indicating whether the operation succeeded unless throwing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>    function approveAndCall(address spender, uint256 value, bytes calldata data) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_interfaces_IERC165_sol" data-file-path="lib/openzeppelin-contracts/contracts/interfaces/IERC165.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/interfaces/IERC165.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (interfaces/IERC165.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.4.16;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC165} from &quot;../utils/introspection/IERC165.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_interfaces_IERC20_sol" data-file-path="lib/openzeppelin-contracts/contracts/interfaces/IERC20.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/interfaces/IERC20.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (interfaces/IERC20.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.4.16;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC20} from &quot;../token/ERC20/IERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_interfaces_draft_IERC6093_sol" data-file-path="lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.5.0) (interfaces/draft-IERC6093.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.8.4;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre> * @dev Standard ERC-20 Errors</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC-20 tokens.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>interface IERC20Errors {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>     * @dev Indicates an error related to the current `balance` of a `sender`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>     * @param balance Current balance for the interacting account.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>     * @param needed Minimum amount required to perform a transfer.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    error ERC20InsufficientBalance(address sender, uint256 balance, uint256 needed);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `sender`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    error ERC20InvalidSender(address sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>     * @param receiver Address to which tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    error ERC20InvalidReceiver(address receiver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `spender`â€™s `allowance`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>     * @param spender Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>     * @param allowance Amount of tokens a `spender` is allowed to operate with.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>     * @param needed Minimum amount required to perform a transfer.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    error ERC20InsufficientAllowance(address spender, uint256 allowance, uint256 needed);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>     * @param approver Address initiating an approval operation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    error ERC20InvalidApprover(address approver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `spender` to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>     * @param spender Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    error ERC20InvalidSpender(address spender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre> * @dev Standard ERC-721 Errors</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC-721 tokens.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>interface IERC721Errors {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>     * @dev Indicates that an address can&#39;t be an owner. For example, `address(0)` is a forbidden owner in ERC-721.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>     * Used in balance queries.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>     * @param owner Address of the current owner of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>    error ERC721InvalidOwner(address owner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     * @dev Indicates a `tokenId` whose `owner` is the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>     * @param tokenId Identifier number of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>    error ERC721NonexistentToken(uint256 tokenId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     * @dev Indicates an error related to the ownership over a particular token. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     * @param tokenId Identifier number of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     * @param owner Address of the current owner of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>    error ERC721IncorrectOwner(address sender, uint256 tokenId, address owner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `sender`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>    error ERC721InvalidSender(address sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>     * @param receiver Address to which tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    error ERC721InvalidReceiver(address receiver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `operator`â€™s approval. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>     * @param operator Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>     * @param tokenId Identifier number of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>    error ERC721InsufficientApproval(address operator, uint256 tokenId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>     * @param approver Address initiating an approval operation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>    error ERC721InvalidApprover(address approver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `operator` to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>     * @param operator Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>    error ERC721InvalidOperator(address operator);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre> * @dev Standard ERC-1155 Errors</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre> * Interface of the https://eips.ethereum.org/EIPS/eip-6093[ERC-6093] custom errors for ERC-1155 tokens.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>interface IERC1155Errors {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>     * @dev Indicates an error related to the current `balance` of a `sender`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>     * @param balance Current balance for the interacting account.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>     * @param needed Minimum amount required to perform a transfer.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>     * @param tokenId Identifier number of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>    error ERC1155InsufficientBalance(address sender, uint256 balance, uint256 needed, uint256 tokenId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `sender`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>     * @param sender Address whose tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>    error ERC1155InvalidSender(address sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the token `receiver`. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>     * @param receiver Address to which tokens are being transferred.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>    error ERC1155InvalidReceiver(address receiver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `operator`â€™s approval. Used in transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>     * @param operator Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>     * @param owner Address of the current owner of a token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>    error ERC1155MissingApprovalForAll(address operator, address owner);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `approver` of a token to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>     * @param approver Address initiating an approval operation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>    error ERC1155InvalidApprover(address approver);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failure with the `operator` to be approved. Used in approvals.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>     * @param operator Address that may be allowed to operate on tokens without being their owner.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>    error ERC1155InvalidOperator(address operator);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>     * @dev Indicates an array length mismatch between ids and values in a safeBatchTransferFrom operation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>     * Used in batch transfers.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>     * @param idsLength Length of the array of token identifiers</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>     * @param valuesLength Length of the array of token amounts</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>    error ERC1155InvalidArrayLength(uint256 idsLength, uint256 valuesLength);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_mocks_token_ERC20Mock_sol" data-file-path="lib/openzeppelin-contracts/contracts/mocks/token/ERC20Mock.sol" data-lines-active="1" data-lines-covered="1">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(120, 90%, 45%, 0.15); color: hsl(120, 90%, 45%)">
                                100.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/mocks/token/ERC20Mock.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>1 / 1</strong> (100.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>import {ERC20} from &quot;../../token/ERC20/ERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>contract ERC20Mock is ERC20 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>    constructor() ERC20(&quot;ERC20Mock&quot;, &quot;E20M&quot;) {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>    function mint(address account, uint256 amount) external {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>        _mint(account, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>    function burn(address account, uint256 amount) external {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>        _burn(account, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_token_ERC20_ERC20_sol" data-file-path="lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol" data-lines-active="26" data-lines-covered="16">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(73, 90%, 45%, 0.15); color: hsl(73, 90%, 45%)">
                                61.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/token/ERC20/ERC20.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>16 / 26</strong> (61.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.5.0) (token/ERC20/ERC20.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC20} from &quot;./IERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {IERC20Metadata} from &quot;./extensions/IERC20Metadata.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>import {Context} from &quot;../../utils/Context.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>import {IERC20Errors} from &quot;../../interfaces/draft-IERC6093.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * @dev Implementation of the {IERC20} interface.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * This implementation is agnostic to the way tokens are created. This means</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> * that a supply mechanism has to be added in a derived contract using {_mint}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> * TIP: For a detailed writeup see our guide</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre> * https://forum.openzeppelin.com/t/how-to-implement-erc20-supply-mechanisms/226[How</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre> * to implement supply mechanisms].</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre> * The default value of {decimals} is 18. To change this, you should override</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre> * this function so it returns a different value.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre> * We have followed general OpenZeppelin Contracts guidelines: functions revert</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre> * instead returning `false` on failure. This behavior is nonetheless</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre> * conventional and does not conflict with the expectations of ERC-20</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre> * applications.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>abstract contract ERC20 is Context, IERC20, IERC20Metadata, IERC20Errors {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    mapping(address account =&gt; uint256) private _balances;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    mapping(address account =&gt; mapping(address spender =&gt; uint256)) private _allowances;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    uint256 private _totalSupply;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>    string private _name;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    string private _symbol;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>     * @dev Sets the values for {name} and {symbol}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>     * Both values are immutable: they can only be set once during construction.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    constructor(string memory name_, string memory symbol_) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>        _name = name_;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>        _symbol = symbol_;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>     * @dev Returns the name of the token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>    function name() public view virtual returns (string memory) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>        return _name;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>     * @dev Returns the symbol of the token, usually a shorter version of the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>     * name.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>    function symbol() public view virtual returns (string memory) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>        return _symbol;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     * @dev Returns the number of decimals used to get its user representation.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>     * For example, if `decimals` equals `2`, a balance of `505` tokens should</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>     * be displayed to a user as `5.05` (`505 / 10 ** 2`).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>     * Tokens usually opt for a value of 18, imitating the relationship between</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>     * Ether and Wei. This is the default value returned by this function, unless</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     * it&#39;s overridden.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     * NOTE: This information is only used for _display_ purposes: it in</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     * no way affects any of the arithmetic of the contract, including</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>     * {IERC20-balanceOf} and {IERC20-transfer}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>    function decimals() public view virtual returns (uint8) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        return 18;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>    /// @inheritdoc IERC20</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>    function totalSupply() public view virtual returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>        return _totalSupply;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    /// @inheritdoc IERC20</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>    function balanceOf(address account) public view virtual returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>        return _balances[account];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>     * @dev See {IERC20-transfer}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>     * Requirements:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>     * - `to` cannot be the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>     * - the caller must have a balance of at least `value`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>    function transfer(address to, uint256 value) public virtual returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>        address owner = _msgSender();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>        _transfer(owner, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>    /// @inheritdoc IERC20</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>    function allowance(address owner, address spender) public view virtual returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>        return _allowances[owner][spender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>     * @dev See {IERC20-approve}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>     * NOTE: If `value` is the maximum `uint256`, the allowance is not updated on</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>     * `transferFrom`. This is semantically equivalent to an infinite approval.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>     * Requirements:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>     * - `spender` cannot be the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>    function approve(address spender, uint256 value) public virtual returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>        address owner = _msgSender();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>        _approve(owner, spender, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>     * @dev See {IERC20-transferFrom}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>     * Skips emitting an {Approval} event indicating an allowance update. This is not</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>     * required by the ERC. See {xref-ERC20-_approve-address-address-uint256-bool-}[_approve].</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>     * NOTE: Does not update the allowance if the current allowance</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>     * is the maximum `uint256`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>     * Requirements:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>     * - `from` and `to` cannot be the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>     * - `from` must have a balance of at least `value`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>     * - the caller must have allowance for ``from``&#39;s tokens of at least</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>     * `value`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>    function transferFrom(address from, address to, uint256 value) public virtual returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>        address spender = _msgSender();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>        _spendAllowance(from, spender, value);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>        _transfer(from, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from `from` to `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>     * This internal function is equivalent to {transfer}, and can be used to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>     * e.g. implement automatic token fees, slashing mechanisms, etc.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>     * NOTE: This function is not virtual, {_update} should be overridden instead.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>    function _transfer(address from, address to, uint256 value) internal {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>        if (from == address(0)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidSender(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>        if (to == address(0)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidReceiver(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre>        _update(from, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>     * @dev Transfers a `value` amount of tokens from `from` to `to`, or alternatively mints (or burns) if `from`</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>     * (or `to`) is the zero address. All customizations to transfers, mints, and burns should be done by overriding</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>     * this function.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>    function _update(address from, address to, uint256 value) internal virtual {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>        if (from == address(0)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre>            // Overflow check required: The rest of the code assumes that totalSupply never overflows</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>            _totalSupply += value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>        } else {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>            uint256 fromBalance = _balances[from];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>            if (fromBalance &lt; value) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>                revert ERC20InsufficientBalance(from, fromBalance, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>            unchecked {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>                // Overflow not possible: value &lt;= fromBalance &lt;= totalSupply.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>                _balances[from] = fromBalance - value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>        if (to == address(0)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>            unchecked {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>                // Overflow not possible: value &lt;= totalSupply or value &lt;= fromBalance &lt;= totalSupply.</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>                _totalSupply -= value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>        } else {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>            unchecked {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>                // Overflow not possible: balance + value is at most totalSupply, which we know fits into a uint256.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>                _balances[to] += value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>        emit Transfer(from, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>     * @dev Creates a `value` amount of tokens and assigns them to `account`, by transferring it from address(0).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>     * Relies on the `_update` mechanism</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event with `from` set to the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>     * NOTE: This function is not virtual, {_update} should be overridden instead.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>    function _mint(address account, uint256 value) internal {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        if (account == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidReceiver(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>        _update(address(0), account, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>     * @dev Destroys a `value` amount of tokens from `account`, lowering the total supply.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>     * Relies on the `_update` mechanism.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event with `to` set to the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>     * NOTE: This function is not virtual, {_update} should be overridden instead</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>    function _burn(address account, uint256 value) internal {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>        if (account == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidSender(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>        _update(account, address(0), value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>     * @dev Sets `value` as the allowance of `spender` over the `owner`&#39;s tokens.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>     * This internal function is equivalent to `approve`, and can be used to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>     * e.g. set automatic allowances for certain subsystems, etc.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>     * Emits an {Approval} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>     * Requirements:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>     * - `owner` cannot be the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>     * - `spender` cannot be the zero address.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>     * Overrides to this logic should be done to the variant with an additional `bool emitEvent` argument.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>    function _approve(address owner, address spender, uint256 value) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>        _approve(owner, spender, value, true);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>     * @dev Variant of {_approve} with an optional flag to enable or disable the {Approval} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>     * By default (when calling {_approve}) the flag is set to true. On the other hand, approval changes made by</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>     * `_spendAllowance` during the `transferFrom` operation sets the flag to false. This saves gas by not emitting any</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>     * `Approval` event during `transferFrom` operations.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>     * Anyone who wishes to continue emitting `Approval` events on the `transferFrom` operation can force the flag to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>     * true using the following override:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>     * ```solidity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>     * function _approve(address owner, address spender, uint256 value, bool) internal virtual override {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>     *     super._approve(owner, spender, value, true);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>     * }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>     * ```</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>     * Requirements are the same as {_approve}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre>    function _approve(address owner, address spender, uint256 value, bool emitEvent) internal virtual {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>        if (owner == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidApprover(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>        if (spender == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>            revert ERC20InvalidSpender(address(0));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>        _allowances[owner][spender] = value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>        if (emitEvent) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre>            emit Approval(owner, spender, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>     * @dev Updates `owner`&#39;s allowance for `spender` based on spent `value`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>     * Does not update the allowance value in case of infinite allowance.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>     * Revert if not enough allowance is available.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">292</td>
                                    <td class="row-source"><pre>     * Does not emit an {Approval} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">293</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">294</td>
                                    <td class="row-source"><pre>    function _spendAllowance(address owner, address spender, uint256 value) internal virtual {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">295</td>
                                    <td class="row-source"><pre>        uint256 currentAllowance = allowance(owner, spender);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">296</td>
                                    <td class="row-source"><pre>        if (currentAllowance &lt; type(uint256).max) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">297</td>
                                    <td class="row-source"><pre>            if (currentAllowance &lt; value) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">298</td>
                                    <td class="row-source"><pre>                revert ERC20InsufficientAllowance(spender, currentAllowance, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">299</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">300</td>
                                    <td class="row-source"><pre>            unchecked {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">301</td>
                                    <td class="row-source"><pre>                _approve(owner, spender, currentAllowance - value, false);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">302</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">303</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">304</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">305</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">306</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_token_ERC20_IERC20_sol" data-file-path="lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (token/ERC20/IERC20.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.4.16;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre> * @dev Interface of the ERC-20 standard as defined in the ERC.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>interface IERC20 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>     * @dev Emitted when `value` tokens are moved from one account (`from`) to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>     * another (`to`).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>     * Note that `value` may be zero.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    event Transfer(address indexed from, address indexed to, uint256 value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>     * @dev Emitted when the allowance of a `spender` for an `owner` is set by</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>     * a call to {approve}. `value` is the new allowance.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    event Approval(address indexed owner, address indexed spender, uint256 value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>     * @dev Returns the value of tokens in existence.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    function totalSupply() external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>     * @dev Returns the value of tokens owned by `account`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    function balanceOf(address account) external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from the caller&#39;s account to `to`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>     * Returns a boolean value indicating whether the operation succeeded.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    function transfer(address to, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>     * @dev Returns the remaining number of tokens that `spender` will be</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>     * allowed to spend on behalf of `owner` through {transferFrom}. This is</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>     * zero by default.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>     * This value changes when {approve} or {transferFrom} are called.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    function allowance(address owner, address spender) external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>     * caller&#39;s tokens.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>     * Returns a boolean value indicating whether the operation succeeded.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>     * IMPORTANT: Beware that changing an allowance with this method brings the risk</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>     * that someone may use both the old and the new allowance by unfortunate</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>     * transaction ordering. One possible solution to mitigate this race</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>     * condition is to first reduce the spender&#39;s allowance to 0 and set the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>     * desired value afterwards:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     * Emits an {Approval} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>    function approve(address spender, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>     * @dev Moves a `value` amount of tokens from `from` to `to` using the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     * allowance mechanism. `value` is then deducted from the caller&#39;s</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>     * allowance.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     * Returns a boolean value indicating whether the operation succeeded.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>     * Emits a {Transfer} event.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>    function transferFrom(address from, address to, uint256 value) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_token_ERC20_extensions_IERC20Metadata_sol" data-file-path="lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Metadata.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/token/ERC20/extensions/IERC20Metadata.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (token/ERC20/extensions/IERC20Metadata.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.6.2;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC20} from &quot;../IERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> * @dev Interface for the optional metadata functions from the ERC-20 standard.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>interface IERC20Metadata is IERC20 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>     * @dev Returns the name of the token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    function name() external view returns (string memory);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>     * @dev Returns the symbol of the token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    function symbol() external view returns (string memory);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>     * @dev Returns the decimals places of the token.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    function decimals() external view returns (uint8);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_token_ERC20_utils_SafeERC20_sol" data-file-path="lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol" data-lines-active="10" data-lines-covered="7">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(84, 90%, 45%, 0.15); color: hsl(84, 90%, 45%)">
                                70.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/token/ERC20/utils/SafeERC20.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>7 / 10</strong> (70.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.5.0) (token/ERC20/utils/SafeERC20.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IERC20} from &quot;../IERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {IERC1363} from &quot;../../../interfaces/IERC1363.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * @title SafeERC20</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * @dev Wrappers around ERC-20 operations that throw on failure (when the token</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * contract returns false). Tokens that return no value (and instead revert or</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * throw on failure) are also supported, non-reverting calls are assumed to be</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>library SafeERC20 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>     * @dev An operation with an ERC-20 token failed.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    error SafeERC20FailedOperation(address token);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>     * @dev Indicates a failed `decreaseAllowance` request.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    error SafeERC20FailedDecreaseAllowance(address spender, uint256 currentAllowance, uint256 requestedDecrease);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>     * @dev Transfer `value` amount of `token` from the calling contract to `to`. If `token` returns no value,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>     * non-reverting calls are assumed to be successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    function safeTransfer(IERC20 token, address to, uint256 value) internal {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>        if (!_safeTransfer(token, to, value, true)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>            revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>     * @dev Transfer `value` amount of `token` from `from` to `to`, spending the approval given by `from` to the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>     * calling contract. If `token` returns no value, non-reverting calls are assumed to be successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>        if (!_safeTransferFrom(token, from, to, value, true)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>            revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>     * @dev Variant of {safeTransfer} that returns a bool instead of reverting if the operation is not successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>    function trySafeTransfer(IERC20 token, address to, uint256 value) internal returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>        return _safeTransfer(token, to, value, false);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>     * @dev Variant of {safeTransferFrom} that returns a bool instead of reverting if the operation is not successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    function trySafeTransferFrom(IERC20 token, address from, address to, uint256 value) internal returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>        return _safeTransferFrom(token, from, to, value, false);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>     * @dev Increase the calling contract&#39;s allowance toward `spender` by `value`. If `token` returns no value,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     * non-reverting calls are assumed to be successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>     * IMPORTANT: If the token implements ERC-7674 (ERC-20 with temporary allowance), and if the &quot;client&quot;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>     * smart contract uses ERC-7674 to set temporary allowances, then the &quot;client&quot; smart contract should avoid using</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>     * this function. Performing a {safeIncreaseAllowance} or {safeDecreaseAllowance} operation on a token contract</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>     * that has a non-zero temporary allowance (for that particular owner-spender) will result in unexpected behavior.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>        uint256 oldAllowance = token.allowance(address(this), spender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>        forceApprove(token, spender, oldAllowance + value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>     * @dev Decrease the calling contract&#39;s allowance toward `spender` by `requestedDecrease`. If `token` returns no</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>     * value, non-reverting calls are assumed to be successful.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>     * IMPORTANT: If the token implements ERC-7674 (ERC-20 with temporary allowance), and if the &quot;client&quot;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>     * smart contract uses ERC-7674 to set temporary allowances, then the &quot;client&quot; smart contract should avoid using</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>     * this function. Performing a {safeIncreaseAllowance} or {safeDecreaseAllowance} operation on a token contract</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>     * that has a non-zero temporary allowance (for that particular owner-spender) will result in unexpected behavior.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    function safeDecreaseAllowance(IERC20 token, address spender, uint256 requestedDecrease) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        unchecked {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>            uint256 currentAllowance = token.allowance(address(this), spender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>            if (currentAllowance &lt; requestedDecrease) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>                revert SafeERC20FailedDecreaseAllowance(spender, currentAllowance, requestedDecrease);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>            forceApprove(token, spender, currentAllowance - requestedDecrease);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>     * @dev Set the calling contract&#39;s allowance toward `spender` to `value`. If `token` returns no value,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>     * non-reverting calls are assumed to be successful. Meant to be used with tokens that require the approval</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>     * to be set to zero before setting it to a non-zero value, such as USDT.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>     * NOTE: If the token implements ERC-7674, this function will not modify any temporary allowance. This function</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>     * only sets the &quot;standard&quot; allowance. Any temporary allowance will remain active, in addition to the value being</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>     * set here.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>    function forceApprove(IERC20 token, address spender, uint256 value) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>        if (!_safeApprove(token, spender, value, false)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>            if (!_safeApprove(token, spender, 0, true)) revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>            if (!_safeApprove(token, spender, value, true)) revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>     * @dev Performs an {ERC1363} transferAndCall, with a fallback to the simple {ERC20} transfer if the target has no</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>     * code. This can be used to implement an {ERC721}-like safe transfer that relies on {ERC1363} checks when</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>     * targeting contracts.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>     * Reverts if the returned value is other than `true`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>    function transferAndCallRelaxed(IERC1363 token, address to, uint256 value, bytes memory data) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>        if (to.code.length == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>            safeTransfer(token, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>        } else if (!token.transferAndCall(to, value, data)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>            revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>     * @dev Performs an {ERC1363} transferFromAndCall, with a fallback to the simple {ERC20} transferFrom if the target</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>     * has no code. This can be used to implement an {ERC721}-like safe transfer that relies on {ERC1363} checks when</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>     * targeting contracts.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>     * Reverts if the returned value is other than `true`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>    function transferFromAndCallRelaxed(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>        IERC1363 token,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>        address from,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>        address to,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>        uint256 value,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>        bytes memory data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>    ) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>        if (to.code.length == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>            safeTransferFrom(token, from, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>        } else if (!token.transferFromAndCall(from, to, value, data)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>            revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>     * @dev Performs an {ERC1363} approveAndCall, with a fallback to the simple {ERC20} approve if the target has no</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>     * code. This can be used to implement an {ERC721}-like safe transfer that rely on {ERC1363} checks when</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>     * targeting contracts.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>     * NOTE: When the recipient address (`to`) has no code (i.e. is an EOA), this function behaves as {forceApprove}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>     * Oppositely, when the recipient address (`to`) has code, this function only attempts to call {ERC1363-approveAndCall}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>     * once without retrying, and relies on the returned value to be true.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>     * Reverts if the returned value is other than `true`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>    function approveAndCallRelaxed(IERC1363 token, address to, uint256 value, bytes memory data) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>        if (to.code.length == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>            forceApprove(token, to, value);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>        } else if (!token.approveAndCall(to, value, data)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>            revert SafeERC20FailedOperation(address(token));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>     * @dev Imitates a Solidity `token.transfer(to, value)` call, relaxing the requirement on the return value: the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>     * return value is optional (but if data is returned, it must not be false).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>     * @param token The token targeted by the call.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>     * @param to The recipient of the tokens</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>     * @param value The amount of token to transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>     * @param bubble Behavior switch if the transfer call reverts: bubble the revert reason or return a false boolean.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>    function _safeTransfer(IERC20 token, address to, uint256 value, bool bubble) private returns (bool success) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>        bytes4 selector = IERC20.transfer.selector;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>            let fmp := mload(0x40)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>            mstore(0x00, selector)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>            mstore(0x04, and(to, shr(96, not(0))))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>            mstore(0x24, value)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>            success := call(gas(), token, 0, 0x00, 0x44, 0x00, 0x20)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>            // if call success and return is true, all is good.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>            // otherwise (not success or return is not true), we need to perform further checks</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>            if iszero(and(success, eq(mload(0x00), 1))) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>                // if the call was a failure and bubble is enabled, bubble the error</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre>                if and(iszero(success), bubble) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>                    returndatacopy(fmp, 0x00, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>                    revert(fmp, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>                }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>                // if the return value is not true, then the call is only successful if:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>                // - the token address has code</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>                // - the returndata is empty</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>                success := and(success, and(iszero(returndatasize()), gt(extcodesize(token), 0)))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>            mstore(0x40, fmp)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>     * @dev Imitates a Solidity `token.transferFrom(from, to, value)` call, relaxing the requirement on the return</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>     * value: the return value is optional (but if data is returned, it must not be false).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre>     * @param token The token targeted by the call.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>     * @param from The sender of the tokens</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>     * @param to The recipient of the tokens</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>     * @param value The amount of token to transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>     * @param bubble Behavior switch if the transfer call reverts: bubble the revert reason or return a false boolean.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>    function _safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>        IERC20 token,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>        address from,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        address to,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>        uint256 value,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        bool bubble</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>    ) private returns (bool success) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>        bytes4 selector = IERC20.transferFrom.selector;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>            let fmp := mload(0x40)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>            mstore(0x00, selector)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>            mstore(0x04, and(from, shr(96, not(0))))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>            mstore(0x24, and(to, shr(96, not(0))))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>            mstore(0x44, value)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>            success := call(gas(), token, 0, 0x00, 0x64, 0x00, 0x20)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>            // if call success and return is true, all is good.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>            // otherwise (not success or return is not true), we need to perform further checks</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>            if iszero(and(success, eq(mload(0x00), 1))) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>                // if the call was a failure and bubble is enabled, bubble the error</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>                if and(iszero(success), bubble) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>                    returndatacopy(fmp, 0x00, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>                    revert(fmp, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>                }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>                // if the return value is not true, then the call is only successful if:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>                // - the token address has code</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre>                // - the returndata is empty</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>                success := and(success, and(iszero(returndatasize()), gt(extcodesize(token), 0)))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>            mstore(0x40, fmp)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>            mstore(0x60, 0)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>     * @dev Imitates a Solidity `token.approve(spender, value)` call, relaxing the requirement on the return value:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>     * the return value is optional (but if data is returned, it must not be false).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre>     * @param token The token targeted by the call.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>     * @param spender The spender of the tokens</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>     * @param value The amount of token to transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>     * @param bubble Behavior switch if the transfer call reverts: bubble the revert reason or return a false boolean.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>    function _safeApprove(IERC20 token, address spender, uint256 value, bool bubble) private returns (bool success) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        bytes4 selector = IERC20.approve.selector;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>            let fmp := mload(0x40)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>            mstore(0x00, selector)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>            mstore(0x04, and(spender, shr(96, not(0))))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>            mstore(0x24, value)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>            success := call(gas(), token, 0, 0x00, 0x44, 0x00, 0x20)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>            // if call success and return is true, all is good.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>            // otherwise (not success or return is not true), we need to perform further checks</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>            if iszero(and(success, eq(mload(0x00), 1))) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>                // if the call was a failure and bubble is enabled, bubble the error</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>                if and(iszero(success), bubble) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>                    returndatacopy(fmp, 0x00, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>                    revert(fmp, returndatasize())</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>                }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>                // if the return value is not true, then the call is only successful if:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre>                // - the token address has code</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>                // - the returndata is empty</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>                success := and(success, and(iszero(returndatasize()), gt(extcodesize(token), 0)))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>            mstore(0x40, fmp)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_utils_Context_sol" data-file-path="lib/openzeppelin-contracts/contracts/utils/Context.sol" data-lines-active="1" data-lines-covered="1">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(120, 90%, 45%, 0.15); color: hsl(120, 90%, 45%)">
                                100.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/utils/Context.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>1 / 1</strong> (100.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre> * @dev Provides information about the current execution context, including the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> * sender of the transaction and its data. While these are generally available</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> * via msg.sender and msg.data, they should not be accessed in such a direct</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * manner, since when dealing with meta-transactions the account sending and</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * paying for execution may not be the actual sender (as far as an application</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * is concerned).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * This contract is only required for intermediate, library-like contracts.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>abstract contract Context {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    function _msgSender() internal view virtual returns (address) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>        return msg.sender;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>    function _msgData() internal view virtual returns (bytes calldata) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>        return msg.data;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    function _contextSuffixLength() internal view virtual returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>        return 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_utils_ReentrancyGuard_sol" data-file-path="lib/openzeppelin-contracts/contracts/utils/ReentrancyGuard.sol" data-lines-active="7" data-lines-covered="6">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(102, 90%, 45%, 0.15); color: hsl(102, 90%, 45%)">
                                85.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/utils/ReentrancyGuard.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>6 / 7</strong> (85.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.5.0) (utils/ReentrancyGuard.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {StorageSlot} from &quot;./StorageSlot.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> * @dev Contract module that helps prevent reentrant calls to a function.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * available, which can be applied to functions to make sure there are no nested</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * (reentrant) calls to them.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> * Note that because there is a single `nonReentrant` guard, functions marked as</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> * `nonReentrant` may not call one another. This can be worked around by making</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> * those functions `private`, and then adding `external` `nonReentrant` entry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre> * points to them.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre> * TIP: If EIP-1153 (transient storage) is available on the chain you&#39;re deploying at,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre> * consider using {ReentrancyGuardTransient} instead.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre> * TIP: If you would like to learn more about reentrancy and alternative ways</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre> * to protect against it, check out our blog post</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre> * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre> * IMPORTANT: Deprecated. This storage-based reentrancy guard will be removed and replaced</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre> * by the {ReentrancyGuardTransient} variant in v6.0.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre> * @custom:stateless</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>abstract contract ReentrancyGuard {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    using StorageSlot for bytes32;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    // keccak256(abi.encode(uint256(keccak256(&quot;openzeppelin.storage.ReentrancyGuard&quot;)) - 1)) &amp; ~bytes32(uint256(0xff))</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>    bytes32 private constant REENTRANCY_GUARD_STORAGE =</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>        0x9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    // Booleans are more expensive than uint256 or any type that takes up a full</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>    // word because each write operation emits an extra SLOAD to first read the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    // slot&#39;s contents, replace the bits taken up by the boolean, and then write</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>    // back. This is the compiler&#39;s defense against contract upgrades and</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    // pointer aliasing, and it cannot be disabled.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    // The values being non-zero value makes deployment a bit more expensive,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>    // but in exchange the refund on every call to nonReentrant will be lower in</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    // amount. Since refunds are capped to a percentage of the total</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    // transaction&#39;s gas, it is best to keep them low in cases like this one, to</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    // increase the likelihood of the full refund coming into effect.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    uint256 private constant NOT_ENTERED = 1;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    uint256 private constant ENTERED = 2;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>     * @dev Unauthorized reentrant call.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    error ReentrancyGuardReentrantCall();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>    constructor() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>        _reentrancyGuardStorageSlot().getUint256Slot().value = NOT_ENTERED;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>     * @dev Prevents a contract from calling itself, directly or indirectly.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>     * Calling a `nonReentrant` function from another `nonReentrant`</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     * function is not supported. It is possible to prevent this from happening</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>     * by making the `nonReentrant` function external, and making it call a</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>     * `private` function that does the actual work.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    modifier nonReentrant() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>        _nonReentrantBefore();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>        _nonReentrantAfter();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>     * @dev A `view` only version of {nonReentrant}. Use to block view functions</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>     * from being called, preventing reading from inconsistent contract state.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>     * CAUTION: This is a &quot;view&quot; modifier and does not change the reentrancy</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>     * status. Use it only on view functions. For payable or non-payable functions,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>     * use the standard {nonReentrant} modifier instead.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>    modifier nonReentrantView() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>        _nonReentrantBeforeView();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    function _nonReentrantBeforeView() private view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>        if (_reentrancyGuardEntered()) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>            revert ReentrancyGuardReentrantCall();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>    function _nonReentrantBefore() private {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>        // On the first call to nonReentrant, _status will be NOT_ENTERED</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        _nonReentrantBeforeView();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>        // Any calls to nonReentrant after this point will fail</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>        _reentrancyGuardStorageSlot().getUint256Slot().value = ENTERED;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    function _nonReentrantAfter() private {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>        // By storing the original value once again, a refund is triggered (see</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>        // https://eips.ethereum.org/EIPS/eip-2200)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>        _reentrancyGuardStorageSlot().getUint256Slot().value = NOT_ENTERED;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>     * @dev Returns true if the reentrancy guard is currently set to &quot;entered&quot;, which indicates there is a</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>     * `nonReentrant` function in the call stack.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    function _reentrancyGuardEntered() internal view returns (bool) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>        return _reentrancyGuardStorageSlot().getUint256Slot().value == ENTERED;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>    function _reentrancyGuardStorageSlot() internal pure virtual returns (bytes32) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>        return REENTRANCY_GUARD_STORAGE;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_utils_StorageSlot_sol" data-file-path="lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol" data-lines-active="1" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 1</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.1.0) (utils/StorageSlot.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre>// This file was procedurally generated from scripts/generate/templates/StorageSlot.js.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> * @dev Library for reading and writing primitive types to specific storage slots.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * Storage slots are often used to avoid storage conflict when dealing with upgradeable contracts.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * This library helps with reading and writing to such slots without the need for inline assembly.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * The functions in this library return Slot structs that contain a `value` member that can be used to read or write.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> * Example usage to set ERC-1967 implementation slot:</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> * ```solidity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> * contract ERC1967 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre> *     // Define the slot. Alternatively, use the SlotDerivation library to derive the slot.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre> *     bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre> *     function _getImplementation() internal view returns (address) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre> *         return StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre> *     }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre> *     function _setImplementation(address newImplementation) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre> *         require(newImplementation.code.length &gt; 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre> *         StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = newImplementation;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre> *     }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre> * }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre> * ```</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre> * TIP: Consider using this library along with {SlotDerivation}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>library StorageSlot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    struct AddressSlot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>        address value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    struct BooleanSlot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>        bool value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    struct Bytes32Slot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>        bytes32 value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    struct Uint256Slot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>        uint256 value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    struct Int256Slot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>        int256 value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    struct StringSlot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>        string value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    struct BytesSlot {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>        bytes value;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>     * @dev Returns an `AddressSlot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>    function getAddressSlot(bytes32 slot) internal pure returns (AddressSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>     * @dev Returns a `BooleanSlot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    function getBooleanSlot(bytes32 slot) internal pure returns (BooleanSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>     * @dev Returns a `Bytes32Slot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    function getBytes32Slot(bytes32 slot) internal pure returns (Bytes32Slot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>     * @dev Returns a `Uint256Slot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>    function getUint256Slot(bytes32 slot) internal pure returns (Uint256Slot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>     * @dev Returns a `Int256Slot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    function getInt256Slot(bytes32 slot) internal pure returns (Int256Slot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>     * @dev Returns a `StringSlot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>    function getStringSlot(bytes32 slot) internal pure returns (StringSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>     * @dev Returns an `StringSlot` representation of the string storage pointer `store`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>    function getStringSlot(string storage store) internal pure returns (StringSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>            r.slot := store.slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>     * @dev Returns a `BytesSlot` with member `value` located at `slot`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>    function getBytesSlot(bytes32 slot) internal pure returns (BytesSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>            r.slot := slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>     * @dev Returns an `BytesSlot` representation of the bytes storage pointer `store`.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>    function getBytesSlot(bytes storage store) internal pure returns (BytesSlot storage r) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>        assembly (&quot;memory-safe&quot;) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>            r.slot := store.slot</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="lib_openzeppelin_contracts_contracts_utils_introspection_IERC165_sol" data-file-path="lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>// OpenZeppelin Contracts (last updated v5.4.0) (utils/introspection/IERC165.sol)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>pragma solidity &gt;=0.4.16;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre> * @dev Interface of the ERC-165 standard, as defined in the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> * https://eips.ethereum.org/EIPS/eip-165[ERC].</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * Implementers can declare support of contract interfaces, which can then be</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * queried by others ({ERC165Checker}).</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * For an implementation, see {ERC165}.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>interface IERC165 {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>     * @dev Returns true if this contract implements the interface defined by</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>     * `interfaceId`. See the corresponding</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[ERC section]</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>     * to learn more about how these ids are created.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>     * This function call must use less than 30 000 gas.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    function supportsInterface(bytes4 interfaceId) external view returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_CreditPolicy_sol" data-file-path="src/CreditPolicy.sol" data-lines-active="104" data-lines-covered="63">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(72, 90%, 45%, 0.15); color: hsl(72, 90%, 45%)">
                                60.0%
                            </span>
                            <span class="file-name">src/CreditPolicy.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>63 / 104</strong> (60.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre>import {ICreditPolicy} from &quot;./interfaces/ICreditPolicy.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre> * @title CreditPolicy</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre> * @notice Immutable-by-version credit constitution for private credit funds</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>contract CreditPolicy is ICreditPolicy {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>                                ERRORS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>    error CreditPolicy__Unauthorized();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    error CreditPolicy__PolicyFrozen(uint256 version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    error CreditPolicy__InvalidVersion();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    error CreditPolicy__PolicyVersionExists(uint256 version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>    error CreditPolicy__InvalidAdmin();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    error CreditPolicy__PolicyNotEditable(uint256 version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    error CreditPolicy__IncompletePolicy(uint256 version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>    error CreditPolicy__InvalidIndustryHash();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    error CreditPolicy__PolicyNotActive(uint256 version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    error CreditPolicy__InvalidTierCount(uint256 count);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>                                MODIFIERS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    modifier onlyAdmin() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>        _onlyAdmin();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    function _onlyAdmin() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>        if (msg.sender != policyAdmin) revert CreditPolicy__Unauthorized();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>    modifier policyEditable(uint256 version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>        _policyEditable(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    function _policyEditable(uint256 version) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>        if (policyFrozen[version] || !policyActive[version])</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__PolicyNotEditable(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>    modifier policyExists(uint256 version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>        _policyExists(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    function _policyExists(uint256 version) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>        if (!policyCreated[version]) revert CreditPolicy__InvalidVersion();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>                                CORE ROLES</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>    address public policyAdmin;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    uint8 internal maxTiers;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>                            POLICY LIFECYCLE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public policyCreated;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public policyFrozen;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public policyActive;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; uint256) public lastUpdated;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>                        ELIGIBILITY (PRE-LOAN)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>    struct EligibilityCriteria {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>        uint256 minAnnualRevenue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>        uint256 minEBITDA;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>        uint256 minTangibleNetWorth;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>        uint256 minBusinessAgeDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>        uint256 maxDefaultsLast36Months;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        bool bankruptcyExcluded;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; EligibilityCriteria) public eligibility;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>                        FINANCIAL RATIOS (UNDERWRITING)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    struct FinancialRatios {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        uint256 maxTotalDebtToEBITDA;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>        uint256 minInterestCoverageRatio;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>        uint256 minCurrentRatio;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>        uint256 minEBITDAMarginBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; FinancialRatios) public ratios;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>                        LOAN TIERS (PRICING REFERENCE)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>    struct LoanTier {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>        string name;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>        uint256 minRevenue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>        uint256 maxRevenue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>        uint256 minEBITDA;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>        uint256 maxDebtToEBITDA;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>        uint256 maxLoanToEBITDA;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>        uint256 interestRateBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>        uint256 originationFeeBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>        uint256 termDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>        bool active;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; mapping(uint8 =&gt; LoanTier)) public loanTiers;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; uint8) public totalTiers;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; mapping(uint8 =&gt; bool)) public tierExists;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>                        CONCENTRATION LIMITS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>    struct ConcentrationLimits {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>        uint256 maxSingleBorrowerBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>        uint256 maxIndustryConcentrationBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; ConcentrationLimits) public concentration;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>                        INDUSTRY EXCLUSIONS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; mapping(bytes32 =&gt; bool)) public excludedIndustries;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>                        ATTESTATION REQUIREMENTS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>    struct AttestationRequirements {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>        uint256 maxAttestationAgeDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>        uint256 reAttestationFrequencyDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>        bool requiresCPAAttestation;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; AttestationRequirements) public attestation;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>                        MAINTENANCE COVENANTS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>    struct MaintenanceCovenants {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>        uint256 maxLeverageRatio;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>        uint256 minCoverageRatio;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>        uint256 minLiquidityAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>        bool allowsDividends;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>        uint256 reportingFrequencyDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; MaintenanceCovenants) public covenants;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>                        DOCUMENT ANCHORING</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bytes32) public policyDocumentHash;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; string) public policyDocumentURI;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public eligibilitySet;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public ratiosSet;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public concentrationSet;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public attestationSet;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public covenantsSet;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>    mapping(uint256 =&gt; bool) public hasAtLeastOneTier;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>                                EVENTS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>    event PolicyCreated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>    event PolicyFrozen(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>    event PolicyEligibilityUpdated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>    event PolicyRatiosUpdated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>    event PolicyConcentrationUpdated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>    event PolicyAttestationUpdated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>    event PolicyCovenantsUpdated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>    event LoanTierUpdated(uint256 version, uint8 tierId, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre>    event IndustryExcluded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>        bytes32 industry,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>    event MaxTiersChanged(uint8 maxTiers);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>    event IndustryIncluded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>        bytes32 industry,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>    event PolicyAdminChanged(address newAdmin);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>    event PolicyDocumentSet(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>        bytes32 hash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>        string uri,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>    event PolicyDeactivated(uint256 version, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>                                CONSTRUCTOR</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>    constructor() {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>        policyAdmin = msg.sender;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>                        POLICY CREATION</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>    function createPolicy(uint256 version) external onlyAdmin {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>        if (version == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidVersion();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        if (policyCreated[version]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__PolicyVersionExists(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>        policyCreated[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre>        policyActive[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>        emit PolicyCreated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>    function freezePolicy(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>        uint256 version</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>        if (policyFrozen[version]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__PolicyFrozen(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>        if (policyActive[version] == false) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__PolicyNotActive(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>        if (</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>            !eligibilitySet[version] ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>            !ratiosSet[version] ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>            !concentrationSet[version] ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre>            !attestationSet[version] ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>            !covenantsSet[version] ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>            !hasAtLeastOneTier[version]</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>        ) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__IncompletePolicy(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>        if (policyDocumentHash[version] == bytes32(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__IncompletePolicy(version);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>        policyFrozen[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre>        emit PolicyFrozen(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>    function deActivatePolicy(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>        uint256 version</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        policyActive[version] = false;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>        emit PolicyDeactivated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>                        ELIGIBILITY UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>    function updateEligibility(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>        EligibilityCriteria calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>        eligibility[version] = data;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>        eligibilitySet[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>        emit PolicyEligibilityUpdated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>                        RATIOS UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>    function updateRatios(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>        FinancialRatios calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>        ratios[version] = data;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>        ratiosSet[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>        emit PolicyRatiosUpdated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre>                        CONCENTRATION UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>    function updateConcentration(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">292</td>
                                    <td class="row-source"><pre>        ConcentrationLimits calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">293</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">294</td>
                                    <td class="row-source"><pre>        concentration[version] = data;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">295</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">296</td>
                                    <td class="row-source"><pre>        concentrationSet[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">297</td>
                                    <td class="row-source"><pre>        emit PolicyConcentrationUpdated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">298</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">299</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">300</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">301</td>
                                    <td class="row-source"><pre>                        ATTESTATION UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">302</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">303</td>
                                    <td class="row-source"><pre>    function updateAttestation(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">304</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">305</td>
                                    <td class="row-source"><pre>        AttestationRequirements calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">306</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">307</td>
                                    <td class="row-source"><pre>        attestation[version] = data;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">308</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">309</td>
                                    <td class="row-source"><pre>        attestationSet[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">310</td>
                                    <td class="row-source"><pre>        emit PolicyAttestationUpdated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">311</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">312</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">313</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">314</td>
                                    <td class="row-source"><pre>                        COVENANT UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">315</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">316</td>
                                    <td class="row-source"><pre>    function updateCovenants(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">317</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">318</td>
                                    <td class="row-source"><pre>        MaintenanceCovenants calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">319</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">320</td>
                                    <td class="row-source"><pre>        covenants[version] = data;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">321</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">322</td>
                                    <td class="row-source"><pre>        covenantsSet[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">323</td>
                                    <td class="row-source"><pre>        emit PolicyCovenantsUpdated(version, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">324</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">325</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">326</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">327</td>
                                    <td class="row-source"><pre>                        LOAN TIERS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">328</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">329</td>
                                    <td class="row-source"><pre>    function setLoanTier(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">330</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">331</td>
                                    <td class="row-source"><pre>        uint8 tierId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">332</td>
                                    <td class="row-source"><pre>        LoanTier calldata tier</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">333</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">334</td>
                                    <td class="row-source"><pre>        if (tierId &gt;= maxTiers) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">335</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidTierCount(tierId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">336</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">337</td>
                                    <td class="row-source"><pre>        loanTiers[version][tierId] = tier;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">338</td>
                                    <td class="row-source"><pre>        tierExists[version][tierId] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">339</td>
                                    <td class="row-source"><pre>        if (tierId &gt;= totalTiers[version]) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">340</td>
                                    <td class="row-source"><pre>            totalTiers[version] = tierId + 1;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">341</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">342</td>
                                    <td class="row-source"><pre>        hasAtLeastOneTier[version] = true;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">343</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">344</td>
                                    <td class="row-source"><pre>        emit LoanTierUpdated(version, tierId, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">345</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">346</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">347</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">348</td>
                                    <td class="row-source"><pre>                        INDUSTRY CONTROLS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">349</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">350</td>
                                    <td class="row-source"><pre>    function excludeIndustry(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">351</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">352</td>
                                    <td class="row-source"><pre>        bytes32 industry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">353</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">354</td>
                                    <td class="row-source"><pre>        if (industry == bytes32(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">355</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidIndustryHash();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">356</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">357</td>
                                    <td class="row-source"><pre>        excludedIndustries[version][industry] = true;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">358</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">359</td>
                                    <td class="row-source"><pre>        emit IndustryExcluded(version, industry, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">360</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">361</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">362</td>
                                    <td class="row-source"><pre>    function includeIndustry(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">363</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">364</td>
                                    <td class="row-source"><pre>        bytes32 industry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">365</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">366</td>
                                    <td class="row-source"><pre>        if (industry == bytes32(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">367</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidIndustryHash();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">368</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">369</td>
                                    <td class="row-source"><pre>        excludedIndustries[version][industry] = false;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">370</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">371</td>
                                    <td class="row-source"><pre>        emit IndustryIncluded(version, industry, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">372</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">373</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">374</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">375</td>
                                    <td class="row-source"><pre>                        DOCUMENT UPDATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">376</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">377</td>
                                    <td class="row-source"><pre>    function setPolicyDocument(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">378</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">379</td>
                                    <td class="row-source"><pre>        bytes32 hash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">380</td>
                                    <td class="row-source"><pre>        string calldata uri</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">381</td>
                                    <td class="row-source"><pre>    ) external onlyAdmin policyExists(version) policyEditable(version) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">382</td>
                                    <td class="row-source"><pre>        policyDocumentHash[version] = hash;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">383</td>
                                    <td class="row-source"><pre>        policyDocumentURI[version] = uri;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">384</td>
                                    <td class="row-source"><pre>        lastUpdated[version] = block.timestamp;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">385</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">386</td>
                                    <td class="row-source"><pre>        emit PolicyDocumentSet(version, hash, uri, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">387</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">388</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">389</td>
                                    <td class="row-source"><pre>    function changePolicyAdmin(address newAdmin) external onlyAdmin {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">390</td>
                                    <td class="row-source"><pre>        if (newAdmin == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">391</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidAdmin();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">392</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">393</td>
                                    <td class="row-source"><pre>        policyAdmin = newAdmin;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">394</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">395</td>
                                    <td class="row-source"><pre>        emit PolicyAdminChanged(newAdmin);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">396</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">397</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">398</td>
                                    <td class="row-source"><pre>    // getters for interface compliance</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">399</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">400</td>
                                    <td class="row-source"><pre>    function isPolicyActive(uint256 version) external view returns (bool) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">401</td>
                                    <td class="row-source"><pre>        return policyActive[version];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">402</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">403</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">404</td>
                                    <td class="row-source"><pre>    function isPolicyFrozen(uint256 version) external view returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">405</td>
                                    <td class="row-source"><pre>        return policyFrozen[version];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">406</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">407</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">408</td>
                                    <td class="row-source"><pre>    function tierExistsInPolicy(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">409</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">410</td>
                                    <td class="row-source"><pre>        uint8 tierId</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">411</td>
                                    <td class="row-source"><pre>    ) external view returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">412</td>
                                    <td class="row-source"><pre>        return tierExists[version][tierId];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">413</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">414</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">415</td>
                                    <td class="row-source"><pre>    function setMaxTiers(uint8 _maxTiers) external onlyAdmin {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">416</td>
                                    <td class="row-source"><pre>        if (_maxTiers == 255) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">417</td>
                                    <td class="row-source"><pre>            revert CreditPolicy__InvalidTierCount(_maxTiers);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">418</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">419</td>
                                    <td class="row-source"><pre>        maxTiers = _maxTiers;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">420</td>
                                    <td class="row-source"><pre>        emit MaxTiersChanged(_maxTiers);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">421</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">422</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">423</td>
                                    <td class="row-source"><pre>    function getMaxTiers() external view returns (uint8) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">424</td>
                                    <td class="row-source"><pre>        return maxTiers;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">425</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">426</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">427</td>
                                    <td class="row-source"><pre>    function isIndustryExcluded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">428</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">429</td>
                                    <td class="row-source"><pre>        bytes32 industry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">430</td>
                                    <td class="row-source"><pre>    ) external view returns (bool) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">431</td>
                                    <td class="row-source"><pre>        return excludedIndustries[version][industry];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">432</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">433</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">434</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_LoanEngine_sol" data-file-path="src/LoanEngine.sol" data-lines-active="137" data-lines-covered="100">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(86, 90%, 45%, 0.15); color: hsl(86, 90%, 45%)">
                                72.0%
                            </span>
                            <span class="file-name">src/LoanEngine.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>100 / 137</strong> (72.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>import {Ownable} from &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>import {ICreditPolicy} from &quot;./interfaces/ICreditPolicy.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {IVerifier} from &quot;./interfaces/IVerifier.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {ITranchePool} from &quot;./interfaces/ITranchePool.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>import {ReentrancyGuard} from &quot;@openzeppelin/contracts/utils/ReentrancyGuard.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>import {SafeERC20, IERC20} from &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>import {TranchePool} from &quot;./TranchePool.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>contract LoanEngine is Ownable, ReentrancyGuard {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>    using SafeERC20 for IERC20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>                        ERRORS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>    error LoanEngine__PolicyNotFrozen(uint256 policyVersion);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidProof();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanTierIsNotInPolicy(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>        uint256 policyVersion,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>        uint8 tierId</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidLoanParameters(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>        uint256 principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>        uint256 aprBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>        uint256 termDays</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    error LoanEngine__MaxOriginationFeeExceeded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>        uint256 originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>        uint256 maxOriginationFeeBps</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    error LoanEngine__PoolNotDeployed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidOffRampingEntity(address entity);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanExists(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanIsNotInCreatedState(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanIsNotActive(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanIsNotDefaulted(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidRepayment();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>    error LoanEngine__ZeroRecovery();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    error LoanEngine__LoanNotRecoverable(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    error LoanEngine__ZeroLossOnWriteOff(uint256 loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidFeeManagerEntity(address manager);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidRecoveryAgent(address agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    error LoanEngine__InvalidRepaymentAgent(address agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    error LoanEngine__InsufficientPoolLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    error LoanEngine__ProofAlreadyUsed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    modifier isWhiteListedOffRampingEntity(address entity) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>        _isWhiteListedOffRampingEntity(entity);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    function _isWhiteListedOffRampingEntity(address entity) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>        if (!whitelistedOffRampingEntities[entity]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidOffRampingEntity(entity);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    modifier isWhiteListedRecoveryAgent(address agent) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>        _isWhiteListedRecoveryAgent(agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>    function _isWhiteListedRecoveryAgent(address agent) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>        if (!whitelistedRecoveryAgents[agent]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidRecoveryAgent(agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>    modifier isWhiteListedRepaymentAgent(address agent) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>        _isWhiteListedRepaymentAgent(agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>    function _isWhiteListedRepaymentAgent(address agent) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        if (!whitelistedRepaymentAgents[agent]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidRepaymentAgent(agent);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>    modifier isWhiteListedFeeManager(address manager) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>        _isWhiteListedFeeManager(manager);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    function _isWhiteListedFeeManager(address manager) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>        if (!whitelistedFeeManagers[manager]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidFeeManagerEntity(manager);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>    ICreditPolicy public creditPolicyContract;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>    IVerifier loanProofVerifier;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>    ITranchePool tranchePool;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>    mapping(uint256 loanId =&gt; Loan) public s_loans;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>    mapping(uint256 loanId =&gt; uint256) public s_originationFees;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>    mapping(address whitelistedOffRampingEntity =&gt; bool)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>        public whitelistedOffRampingEntities;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    mapping(address whiteListedRecoveryAgent =&gt; bool)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>        public whitelistedRecoveryAgents;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>    mapping(address whiteListedRepaymentAgent =&gt; bool)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>        public whitelistedRepaymentAgents;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>    mapping(address whiteListedFeeManager =&gt; bool)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>        public whitelistedFeeManagers;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>    mapping(bytes32 nullifierHash =&gt; bool) public s_nullifierHashes;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>    uint256 public s_nextLoanId = 1;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    uint256 public s_maxOriginationFeeBps;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>    address public s_stableCoinAddress;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>    uint256 public constant STANDARD_BPS = 100;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    enum LoanState {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>        NONE,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>        CREATED,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>        ACTIVE,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>        REPAID,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>        DEFAULTED,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>        WRITTEN_OFF</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    struct Loan {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>        // Identity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>        uint256 loanId;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>        bytes32 borrowerCommitment;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>        uint256 policyVersion;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>        uint8 tierId;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>        // Economics</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>        uint256 principalIssued;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>        uint256 principalOutstanding;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>        uint256 aprBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>        uint256 originationFeeBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>        // Interest accounting</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>        uint256 interestAccrued;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>        uint256 interestPaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>        uint256 lastAccrualTimestamp;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>        // Timing</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>        uint256 startTimestamp;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>        uint256 maturityTimestamp;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>        uint256 termDays;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>        // State</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>        LoanState state;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>        uint256 totalRecovered;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>        // allocation_ratio</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>        uint256 seniorPrincipalAllocated;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>        uint256 juniorPrincipalAllocated;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>    /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>                        EVENTS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>    event LoanCreated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>        uint256 indexed loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>        bytes32 borrowerCommitment,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>        uint256 principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>        uint8 tierId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>    event LoanActivated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>        uint256 indexed loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>        uint256 principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre>        uint256 timestamp,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>        uint256 startTimestamp,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>        uint256 maturityTimestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>    event LoanRepaid(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>        uint256 indexed loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>        uint256 principalRepaid,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>        uint256 interestRepaid,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre>    event LoanClosed(uint256 indexed loanId, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>    event LoanDefaulted(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>        uint256 indexed loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>        bytes32 reasonHash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>    event LoanWrittenOff(uint256 indexed loanId, uint256 timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>    event LoanRecovered(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre>        uint256 indexed loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>        uint256 timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>    constructor(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>        address _creditPolicyContract,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>        address _loanProofVerifier,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>        uint256 _maxOriginationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>        address _tranchePool,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>        address _stableCoinAddress</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>    ) Ownable(msg.sender) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>        creditPolicyContract = ICreditPolicy(_creditPolicyContract);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>        loanProofVerifier = IVerifier(_loanProofVerifier);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>        s_maxOriginationFeeBps = _maxOriginationFeeBps;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>        tranchePool = ITranchePool(_tranchePool);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>        s_stableCoinAddress = _stableCoinAddress;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>    // A notarization step that records a policy-compliant loan intent on-chain</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>    // TODO: public inputs needed to be verified against the contract state</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>    // will be implemented after the public inputs structure is finalized</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>    // preconditions</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>    // borrowerCommitment should match the publicinput commitment</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>    // all the parameteres should match the public inputs</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>    function createLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        bytes32 borrowerCommitment,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>        bytes32 nullifierHash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        uint256 policyVersion,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>        uint8 tierId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>        uint256 principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre>        uint256 aprBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>        uint256 originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>        uint256 termDays,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>        bytes32 industry,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>        bytes calldata proofData,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>        bytes32[] calldata publicInputs</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>        if (s_loans[s_nextLoanId].state != LoanState.NONE) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanExists(s_nextLoanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>        // Implementation goes here</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>        if (!creditPolicyContract.isPolicyFrozen(policyVersion)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>            revert LoanEngine__PolicyNotFrozen(policyVersion);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>        if (creditPolicyContract.isIndustryExcluded(policyVersion, industry)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>            revert LoanEngine__PolicyNotFrozen(policyVersion);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>        if (!creditPolicyContract.tierExistsInPolicy(policyVersion, tierId)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanTierIsNotInPolicy(policyVersion, tierId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>        if (s_nullifierHashes[nullifierHash]) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>            revert LoanEngine__ProofAlreadyUsed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>        if (loanProofVerifier.verify(proofData, publicInputs) == false) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidProof();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>        if (</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>            tranchePool.getPoolState() != TranchePool.PoolState.DEPLOYED &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>            tranchePool.getPoolState() != TranchePool.PoolState.COMMITED</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>        ) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>            revert LoanEngine__PoolNotDeployed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>        if (principalIssued == 0 || aprBps == 0 || termDays == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidLoanParameters(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>                s_nextLoanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>                principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>                aprBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>                termDays</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>        if (originationFeeBps &gt; s_maxOriginationFeeBps) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>            revert LoanEngine__MaxOriginationFeeExceeded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>                s_nextLoanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>                originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>                s_maxOriginationFeeBps</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>        if (principalIssued &gt; tranchePool.getTotalIdleValue()) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InsufficientPoolLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>        Loan memory newLoan = Loan({</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>            loanId: s_nextLoanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>            borrowerCommitment: borrowerCommitment,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre>            policyVersion: policyVersion,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>            tierId: tierId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>            principalIssued: principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre>            principalOutstanding: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre>            aprBps: aprBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>            originationFeeBps: originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre>            interestAccrued: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>            interestPaid: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>            lastAccrualTimestamp: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre>            startTimestamp: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">292</td>
                                    <td class="row-source"><pre>            maturityTimestamp: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">293</td>
                                    <td class="row-source"><pre>            termDays: termDays,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">294</td>
                                    <td class="row-source"><pre>            state: LoanState.CREATED,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">295</td>
                                    <td class="row-source"><pre>            totalRecovered: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">296</td>
                                    <td class="row-source"><pre>            seniorPrincipalAllocated: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">297</td>
                                    <td class="row-source"><pre>            juniorPrincipalAllocated: 0</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">298</td>
                                    <td class="row-source"><pre>        });</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">299</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">300</td>
                                    <td class="row-source"><pre>        s_loans[s_nextLoanId++] = newLoan;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">301</td>
                                    <td class="row-source"><pre>        s_nullifierHashes[nullifierHash] = true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">302</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">303</td>
                                    <td class="row-source"><pre>        emit LoanCreated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">304</td>
                                    <td class="row-source"><pre>            newLoan.loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">305</td>
                                    <td class="row-source"><pre>            borrowerCommitment,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">306</td>
                                    <td class="row-source"><pre>            principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">307</td>
                                    <td class="row-source"><pre>            tierId,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">308</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">309</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">310</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">311</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">312</td>
                                    <td class="row-source"><pre>    /*</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">313</td>
                                    <td class="row-source"><pre>        preconditions</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">314</td>
                                    <td class="row-source"><pre>        - onlyOwner</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">315</td>
                                    <td class="row-source"><pre>        - loan must already exist</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">316</td>
                                    <td class="row-source"><pre>        - loan.state == CREATED</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">317</td>
                                    <td class="row-source"><pre>    */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">318</td>
                                    <td class="row-source"><pre>    function activateLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">319</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">320</td>
                                    <td class="row-source"><pre>        address receivingEntity,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">321</td>
                                    <td class="row-source"><pre>        address feeManager</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">322</td>
                                    <td class="row-source"><pre>    )</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">323</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">324</td>
                                    <td class="row-source"><pre>        onlyOwner</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">325</td>
                                    <td class="row-source"><pre>        isWhiteListedOffRampingEntity(receivingEntity)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">326</td>
                                    <td class="row-source"><pre>        isWhiteListedFeeManager(feeManager)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">327</td>
                                    <td class="row-source"><pre>        nonReentrant</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">328</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">329</td>
                                    <td class="row-source"><pre>        // Implementation goes here</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">330</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">331</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">332</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.CREATED) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">333</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanIsNotInCreatedState(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">334</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">335</td>
                                    <td class="row-source"><pre>        loan.principalOutstanding = loan.principalIssued;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">336</td>
                                    <td class="row-source"><pre>        loan.lastAccrualTimestamp = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">337</td>
                                    <td class="row-source"><pre>        loan.startTimestamp = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">338</td>
                                    <td class="row-source"><pre>        loan.maturityTimestamp = block.timestamp + (loan.termDays * 1 days);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">339</td>
                                    <td class="row-source"><pre>        loan.state = LoanState.ACTIVE;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">340</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">341</td>
                                    <td class="row-source"><pre>        uint256 originationFee = (loan.principalIssued *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">342</td>
                                    <td class="row-source"><pre>            loan.originationFeeBps) / 10000;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">343</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">344</td>
                                    <td class="row-source"><pre>        s_originationFees[loanId] = originationFee;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">345</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">346</td>
                                    <td class="row-source"><pre>        if (loan.principalIssued &gt; tranchePool.getTotalIdleValue()) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">347</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InsufficientPoolLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">348</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">349</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">350</td>
                                    <td class="row-source"><pre>        uint256 totalDisbursement = loan.principalIssued - originationFee;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">351</td>
                                    <td class="row-source"><pre>        (uint256 seniorAmount, uint256 juniorAmount, ) = tranchePool</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">352</td>
                                    <td class="row-source"><pre>            .allocateCapital(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">353</td>
                                    <td class="row-source"><pre>                totalDisbursement,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">354</td>
                                    <td class="row-source"><pre>                originationFee,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">355</td>
                                    <td class="row-source"><pre>                receivingEntity,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">356</td>
                                    <td class="row-source"><pre>                feeManager</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">357</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">358</td>
                                    <td class="row-source"><pre>        loan.seniorPrincipalAllocated = seniorAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">359</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">360</td>
                                    <td class="row-source"><pre>        loan.juniorPrincipalAllocated = juniorAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">361</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">362</td>
                                    <td class="row-source"><pre>        emit LoanActivated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">363</td>
                                    <td class="row-source"><pre>            loan.loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">364</td>
                                    <td class="row-source"><pre>            loan.principalIssued,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">365</td>
                                    <td class="row-source"><pre>            block.timestamp,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">366</td>
                                    <td class="row-source"><pre>            loan.startTimestamp,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">367</td>
                                    <td class="row-source"><pre>            loan.maturityTimestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">368</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">369</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">370</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">371</td>
                                    <td class="row-source"><pre>    function repayLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">372</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">373</td>
                                    <td class="row-source"><pre>        uint256 principalAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">374</td>
                                    <td class="row-source"><pre>        uint256 interestAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">375</td>
                                    <td class="row-source"><pre>        address repaymentAgent</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">376</td>
                                    <td class="row-source"><pre>    )</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">377</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">378</td>
                                    <td class="row-source"><pre>        onlyOwner</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">379</td>
                                    <td class="row-source"><pre>        isWhiteListedRepaymentAgent(repaymentAgent)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">380</td>
                                    <td class="row-source"><pre>        nonReentrant</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">381</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">382</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">383</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.ACTIVE) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">384</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanIsNotActive(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">385</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">386</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">387</td>
                                    <td class="row-source"><pre>        uint256 totalPayment = principalAmount + interestAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">388</td>
                                    <td class="row-source"><pre>        if (totalPayment == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">389</td>
                                    <td class="row-source"><pre>            revert LoanEngine__InvalidRepayment();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">390</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">391</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">392</td>
                                    <td class="row-source"><pre>        _accrueInterest(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">393</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">394</td>
                                    <td class="row-source"><pre>        // 1ï¸âƒ£ Transfer funds to pool (settlement layer)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">395</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoinAddress).safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">396</td>
                                    <td class="row-source"><pre>            repaymentAgent,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">397</td>
                                    <td class="row-source"><pre>            address(tranchePool),</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">398</td>
                                    <td class="row-source"><pre>            totalPayment</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">399</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">400</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">401</td>
                                    <td class="row-source"><pre>        // 2ï¸âƒ£ Interest first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">402</td>
                                    <td class="row-source"><pre>        uint256 interestDue = loan.interestAccrued;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">403</td>
                                    <td class="row-source"><pre>        uint256 interestPaid = totalPayment &gt; interestDue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">404</td>
                                    <td class="row-source"><pre>            ? interestDue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">405</td>
                                    <td class="row-source"><pre>            : totalPayment;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">406</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">407</td>
                                    <td class="row-source"><pre>        // 3ï¸âƒ£ Principal second</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">408</td>
                                    <td class="row-source"><pre>        uint256 remainingForPrincipal = totalPayment - interestPaid;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">409</td>
                                    <td class="row-source"><pre>        uint256 principalDue = loan.principalOutstanding;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">410</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">411</td>
                                    <td class="row-source"><pre>        uint256 principalPaid = remainingForPrincipal &gt; principalDue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">412</td>
                                    <td class="row-source"><pre>            ? principalDue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">413</td>
                                    <td class="row-source"><pre>            : remainingForPrincipal;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">414</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">415</td>
                                    <td class="row-source"><pre>        // 4ï¸âƒ£ Update loan accounting</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">416</td>
                                    <td class="row-source"><pre>        loan.interestAccrued -= interestPaid;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">417</td>
                                    <td class="row-source"><pre>        loan.interestPaid += interestPaid;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">418</td>
                                    <td class="row-source"><pre>        loan.principalOutstanding -= principalPaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">419</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">420</td>
                                    <td class="row-source"><pre>        bool fullyRepaid = loan.principalOutstanding == 0 &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">421</td>
                                    <td class="row-source"><pre>            loan.interestAccrued == 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">422</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">423</td>
                                    <td class="row-source"><pre>        if (fullyRepaid) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">424</td>
                                    <td class="row-source"><pre>            loan.state = LoanState.REPAID;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">425</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">426</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">427</td>
                                    <td class="row-source"><pre>        tranchePool.onRepayment(principalPaid, interestPaid);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">428</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">429</td>
                                    <td class="row-source"><pre>        emit LoanRepaid(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">430</td>
                                    <td class="row-source"><pre>            loan.loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">431</td>
                                    <td class="row-source"><pre>            principalPaid,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">432</td>
                                    <td class="row-source"><pre>            interestPaid,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">433</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">434</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">435</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">436</td>
                                    <td class="row-source"><pre>        if (fullyRepaid) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">437</td>
                                    <td class="row-source"><pre>            emit LoanClosed(loanId, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">438</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">439</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">440</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">441</td>
                                    <td class="row-source"><pre>    function declareDefault(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">442</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">443</td>
                                    <td class="row-source"><pre>        bytes32 reasonHash</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">444</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">445</td>
                                    <td class="row-source"><pre>        // Implementation goes here</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">446</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">447</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.ACTIVE) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">448</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanIsNotActive(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">449</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">450</td>
                                    <td class="row-source"><pre>        _accrueInterest(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">451</td>
                                    <td class="row-source"><pre>        loan.state = LoanState.DEFAULTED;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">452</td>
                                    <td class="row-source"><pre>        emit LoanDefaulted(loanId, reasonHash, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">453</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">454</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">455</td>
                                    <td class="row-source"><pre>    function writeOffLoan(uint256 loanId) external onlyOwner {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">456</td>
                                    <td class="row-source"><pre>        // Implementation goes here</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">457</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">458</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.DEFAULTED) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">459</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanIsNotDefaulted(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">460</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">461</td>
                                    <td class="row-source"><pre>        uint256 loss = loan.principalOutstanding;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">462</td>
                                    <td class="row-source"><pre>        uint256 interestAccrued = loan.interestAccrued;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">463</td>
                                    <td class="row-source"><pre>        if (loss == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">464</td>
                                    <td class="row-source"><pre>            revert LoanEngine__ZeroLossOnWriteOff(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">465</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">466</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">467</td>
                                    <td class="row-source"><pre>        loan.principalOutstanding = 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">468</td>
                                    <td class="row-source"><pre>        loan.interestAccrued = 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">469</td>
                                    <td class="row-source"><pre>        loan.state = LoanState.WRITTEN_OFF;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">470</td>
                                    <td class="row-source"><pre>        tranchePool.onLoss(loss, interestAccrued);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">471</td>
                                    <td class="row-source"><pre>        emit LoanWrittenOff(loanId, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">472</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">473</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">474</td>
                                    <td class="row-source"><pre>    function recoverLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">475</td>
                                    <td class="row-source"><pre>        uint256 loanId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">476</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">477</td>
                                    <td class="row-source"><pre>        address recoveryAgent</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">478</td>
                                    <td class="row-source"><pre>    ) external onlyOwner isWhiteListedRecoveryAgent(recoveryAgent) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">479</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">480</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.WRITTEN_OFF) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">481</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanNotRecoverable(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">482</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">483</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">484</td>
                                    <td class="row-source"><pre>            revert LoanEngine__ZeroRecovery();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">485</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">486</td>
                                    <td class="row-source"><pre>        loan.totalRecovered += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">487</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoinAddress).safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">488</td>
                                    <td class="row-source"><pre>            recoveryAgent,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">489</td>
                                    <td class="row-source"><pre>            address(tranchePool),</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">490</td>
                                    <td class="row-source"><pre>            amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">491</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">492</td>
                                    <td class="row-source"><pre>        tranchePool.onRecovery(amount);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">493</td>
                                    <td class="row-source"><pre>        emit LoanRecovered(loanId, amount, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">494</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">495</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">496</td>
                                    <td class="row-source"><pre>    function _accrueInterest(uint256 loanId) internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">497</td>
                                    <td class="row-source"><pre>        // Implementation goes here</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">498</td>
                                    <td class="row-source"><pre>        Loan storage loan = s_loans[loanId];</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">499</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanState.ACTIVE) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">500</td>
                                    <td class="row-source"><pre>            revert LoanEngine__LoanIsNotActive(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">501</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">502</td>
                                    <td class="row-source"><pre>        uint256 timeElapsed = block.timestamp - loan.lastAccrualTimestamp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">503</td>
                                    <td class="row-source"><pre>        if (loan.principalOutstanding == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">504</td>
                                    <td class="row-source"><pre>            loan.lastAccrualTimestamp = block.timestamp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">505</td>
                                    <td class="row-source"><pre>            return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">506</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">507</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">508</td>
                                    <td class="row-source"><pre>        uint256 interest = (loan.principalOutstanding *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">509</td>
                                    <td class="row-source"><pre>            loan.aprBps *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">510</td>
                                    <td class="row-source"><pre>            timeElapsed) / (365 days * 10_000);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">511</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">512</td>
                                    <td class="row-source"><pre>        if (interest &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">513</td>
                                    <td class="row-source"><pre>            loan.interestAccrued += interest;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">514</td>
                                    <td class="row-source"><pre>            uint256 totalAllocated = loan.principalIssued;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">515</td>
                                    <td class="row-source"><pre>            uint256 seniorInterest = (interest *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">516</td>
                                    <td class="row-source"><pre>                loan.seniorPrincipalAllocated) / totalAllocated;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">517</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">518</td>
                                    <td class="row-source"><pre>            uint256 juniorInterest = (interest *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">519</td>
                                    <td class="row-source"><pre>                loan.juniorPrincipalAllocated) / totalAllocated;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">520</td>
                                    <td class="row-source"><pre>            tranchePool.onInterestAccrued(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">521</td>
                                    <td class="row-source"><pre>                interest,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">522</td>
                                    <td class="row-source"><pre>                seniorInterest,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">523</td>
                                    <td class="row-source"><pre>                juniorInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">524</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">525</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">526</td>
                                    <td class="row-source"><pre>        loan.lastAccrualTimestamp = block.timestamp;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">527</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">528</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">529</td>
                                    <td class="row-source"><pre>    // setters for contract management</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">530</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">531</td>
                                    <td class="row-source"><pre>    function setMaxOriginationFeeBps(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">532</td>
                                    <td class="row-source"><pre>        uint256 _maxOriginationFeeBps</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">533</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">534</td>
                                    <td class="row-source"><pre>        s_maxOriginationFeeBps = _maxOriginationFeeBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">535</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">536</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">537</td>
                                    <td class="row-source"><pre>    function setWhitelistedOffRampingEntity(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">538</td>
                                    <td class="row-source"><pre>        address entity,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">539</td>
                                    <td class="row-source"><pre>        bool isWhitelisted</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">540</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">541</td>
                                    <td class="row-source"><pre>        whitelistedOffRampingEntities[entity] = isWhitelisted;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">542</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">543</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">544</td>
                                    <td class="row-source"><pre>    function setWhitelistedRecoveryAgent(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">545</td>
                                    <td class="row-source"><pre>        address agent,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">546</td>
                                    <td class="row-source"><pre>        bool isWhitelisted</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">547</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">548</td>
                                    <td class="row-source"><pre>        whitelistedRecoveryAgents[agent] = isWhitelisted;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">549</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">550</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">551</td>
                                    <td class="row-source"><pre>    function setWhitelistedRepaymentAgent(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">552</td>
                                    <td class="row-source"><pre>        address agent,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">553</td>
                                    <td class="row-source"><pre>        bool isWhitelisted</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">554</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">555</td>
                                    <td class="row-source"><pre>        whitelistedRepaymentAgents[agent] = isWhitelisted;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">556</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">557</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">558</td>
                                    <td class="row-source"><pre>    function setWhitelistedFeeManager(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">559</td>
                                    <td class="row-source"><pre>        address manager,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">560</td>
                                    <td class="row-source"><pre>        bool isWhitelisted</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">561</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">562</td>
                                    <td class="row-source"><pre>        whitelistedFeeManagers[manager] = isWhitelisted;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">563</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">564</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">565</td>
                                    <td class="row-source"><pre>    function getMaxOriginationFeeBps() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">566</td>
                                    <td class="row-source"><pre>        return s_maxOriginationFeeBps;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">567</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">568</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">569</td>
                                    <td class="row-source"><pre>    function getNextLoanId() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">570</td>
                                    <td class="row-source"><pre>        return s_nextLoanId;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">571</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">572</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">573</td>
                                    <td class="row-source"><pre>    function getLoanDetails(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">574</td>
                                    <td class="row-source"><pre>        uint256 loanId</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">575</td>
                                    <td class="row-source"><pre>    ) external view returns (Loan memory) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">576</td>
                                    <td class="row-source"><pre>        return s_loans[loanId];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">577</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">578</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">579</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_TranchePool_sol" data-file-path="src/TranchePool.sol" data-lines-active="457" data-lines-covered="223">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(57, 90%, 50%, 0.15); color: hsl(57, 90%, 50%)">
                                48.0%
                            </span>
                            <span class="file-name">src/TranchePool.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>223 / 457</strong> (48.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>import {Ownable} from &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>import {SafeERC20, IERC20} from &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>contract TranchePool is Ownable {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>    using SafeERC20 for IERC20;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>    // Errors</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>    error TranchePool__NotWhiteListed(address user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>    error TranchePool__LessThanDepositThreshold(uint256 amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidAllocationRatio();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>    error TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    error TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    error TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    error TranchePool__NotWhiteListedForEquityTranche(address user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidTransferAmount(uint256 amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidCaller(address user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    error TranchePool__ZeroAPRError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>    error TranchePool__LossExceededCapital(uint256 remaining);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    error TranchePool__ZeroSharesMinted();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    error TranchePool__PoolIsNotOpen();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidStateTransition(PoolState state);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    error TranchePool__WithdrawNotAllowed(PoolState state);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>    error TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    error TranchePool__MaxDepositCapExceeded(uint256 maxCap, uint256 amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>    error TranchePool__PoolIsNotCommited();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    error TranchePool__PrincipalRepaymentExceeded();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    error TranchePool__ZeroAddressError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>    error TranchePool__DeployedCapitalExists();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidMaxCapAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    error TranchePool__InvalidMinDepositAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    error TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    // Events</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    event PoolStateUpdated(PoolState newState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    event LossAllocated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>        uint256 seniorLoss,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>        uint256 juniorLoss,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>        uint256 equityLoss</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    event WithdrawnFromSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>        uint256 sharesBurned,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    event WithdrawnFromJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>        uint256 sharesBurned,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    event WithdrawnFromEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>        uint256 sharesBurned,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    event FundsDepositedToSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>        uint256 shares,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    event FundsDepositedToJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>        uint256 shares,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    event FundsDepositedToEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>        address indexed user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        uint256 shares,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>    event CapitalAllocated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>        uint256 seniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>        uint256 juniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>        uint256 equityAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        uint256 time</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>    event RecoverAmountTransferredToTranchePool(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>        uint256 amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>        uint256 timeStamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>    );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>    event ProfitTransferredToTranchePool(uint256 amount, uint256 timeStamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>    event CapitalAllocationFactorUpdatedSenior(uint256 newFactor);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>    event CapitalAllocationFactorUpdatedJunior(uint256 newFactor);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>    enum PoolState {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        OPEN, // deposits allowed</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>        COMMITED,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>        DEPLOYED, // capital deployed, deposits paused</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>        CLOSED // withdrawals only</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    // Whitelist</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; bool) public whiteListedLps;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; bool) public whiteListedForEquityTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>    // Shares tracking (instead of amounts)</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public s_seniorTrancheShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public s_juniorTrancheShares;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public s_equityTrancheShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>    uint256 public s_totalSeniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    uint256 public s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>    uint256 public s_totalEquityShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    // Total value in each tranche (this decreases when capital is allocated)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>    // why some part of the capital should stay idle.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>    // 1. Liquidity and operational buffer.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>    //</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>    uint256 public s_seniorTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>    uint256 public s_juniorTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>    uint256 public s_equityTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>    uint256 public s_seniorTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    uint256 public s_juniorTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>    uint256 public s_equityTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>    // Minimum deposits</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>    uint256 public s_minimumDepositAmountSeniorTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>    uint256 public s_minimumDepositAmountJuniorTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>    uint256 public s_minimumDepositAmountEquityTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>    // CHANGED: global interest index (scaled)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>    uint256 public seniorInterestIndex; // 1e18 precision</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>    uint256 public juniorInterestIndex; // 1e18 precision</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>    uint256 public equityInterestIndex; // 1e18 precision</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>    // CHANGED: per-user last claimed index</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public seniorUserIndex;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public juniorUserIndex;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>    mapping(address =&gt; uint256) public equityUserIndex;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>    // Stable coin</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>    address public s_stableCoin;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>    address public loanEngine;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>    // Capital allocation factor (e.g., 80 for 80% senior, 15% junior, 5% equity)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>    uint256 public s_capital_allocation_factor_senior;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>    uint256 public s_capital_allocation_factor_junior;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>    uint256 public s_senior_apr;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>    uint256 public s_target_junior_apr;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>    uint256 public seniorAccruedInterest;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>    uint256 public juniorAccruedInterest;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>    uint256 public equityAccruedInterest;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>    uint256 public s_seniorTrancheMaxCap;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>    uint256 public s_juniorTrancheMaxCap;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>    uint256 public s_equityTrancheMaxCap;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>    uint256 public s_protocolRevenue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>    uint256 public s_totalDeposited;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>    uint256 public s_totalLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>    uint256 public s_totalRecovered;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre>    PoolState public poolState = PoolState.OPEN;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>    uint256 public seniorPrincipalShortfall;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>    uint256 public juniorPrincipalShortfall;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>    uint256 public equityPrincipalShortfall;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>    uint256 public s_totalUnclaimedInterest;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>    modifier isWhiteListed(address user) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>        _isWhiteListed(user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>    function _isWhiteListed(address user) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>        if (!whiteListedLps[user]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>            revert TranchePool__NotWhiteListed(user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>    modifier onlyLoanEngine(address user) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>        _onlyLoanEngine(user);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>    function _onlyLoanEngine(address user) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>        if (user != loanEngine) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidCaller(user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>    modifier isWhiteListedForEquityTranche(address user) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>        _isWhiteListedForEquityTranche(user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>        _;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>    function _isWhiteListedForEquityTranche(address user) internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>        if (!whiteListedForEquityTranche[user]) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>            revert TranchePool__NotWhiteListedForEquityTranche(user);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>    constructor(address stableCoin_) Ownable(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>        s_stableCoin = stableCoin_;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>        seniorInterestIndex = 1e18;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>        juniorInterestIndex = 1e18;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>        equityInterestIndex = 1e18;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>    function depositSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        // q: wy we need a minimum deposit for a tranche?</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>        // a: in book.</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre>            revert TranchePool__PoolIsNotOpen();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountSeniorTranche) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>            revert TranchePool__LessThanDepositThreshold(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>        // why there is a max cap exists?</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>        //</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>        //  1. to prevent the liquidity from sitting idle</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>        //</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>        if (amount + s_seniorTrancheIdleValue &gt; s_seniorTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>            revert TranchePool__MaxDepositCapExceeded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>                s_seniorTrancheMaxCap,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>                amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>        // Calculate shares to mint</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>        // invariant: the total shares == idle value because the deposit is allowed only when</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>        // the pool is open and once the pool is moved to a new state new deposits are not allowed</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>        // so what shares == amount holding 1:1 is valid and is not affecting or opening any attack vectors.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>        uint256 shares = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>            address(this),</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>            amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>        s_seniorTrancheShares[msg.sender] += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>        s_totalSeniorShares += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>        s_seniorTrancheIdleValue += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>        seniorUserIndex[msg.sender] = seniorInterestIndex;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>        s_totalDeposited += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        emit FundsDepositedToSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>            shares,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>    function depositJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>            revert TranchePool__PoolIsNotOpen();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountJuniorTranche) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>            revert TranchePool__LessThanDepositThreshold(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>        if (amount + s_juniorTrancheIdleValue &gt; s_juniorTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>            revert TranchePool__MaxDepositCapExceeded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>                s_juniorTrancheMaxCap,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>                amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>        uint256 shares = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre>            address(this),</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre>            amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>        s_juniorTrancheShares[msg.sender] += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>        s_totalJuniorShares += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre>        s_juniorTrancheIdleValue += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">292</td>
                                    <td class="row-source"><pre>        juniorUserIndex[msg.sender] = juniorInterestIndex;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">293</td>
                                    <td class="row-source"><pre>        s_totalDeposited += amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">294</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">295</td>
                                    <td class="row-source"><pre>        emit FundsDepositedToJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">296</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">297</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">298</td>
                                    <td class="row-source"><pre>            shares,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">299</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">300</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">301</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">302</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">303</td>
                                    <td class="row-source"><pre>    function depositEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">304</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">305</td>
                                    <td class="row-source"><pre>    ) external isWhiteListedForEquityTranche(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">306</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">307</td>
                                    <td class="row-source"><pre>            revert TranchePool__PoolIsNotOpen();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">308</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">309</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountEquityTranche) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">310</td>
                                    <td class="row-source"><pre>            revert TranchePool__LessThanDepositThreshold(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">311</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">312</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">313</td>
                                    <td class="row-source"><pre>        if (amount + s_equityTrancheIdleValue &gt; s_equityTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">314</td>
                                    <td class="row-source"><pre>            revert TranchePool__MaxDepositCapExceeded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">315</td>
                                    <td class="row-source"><pre>                s_equityTrancheMaxCap,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">316</td>
                                    <td class="row-source"><pre>                amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">317</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">318</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">319</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">320</td>
                                    <td class="row-source"><pre>        uint256 shares = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">321</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">322</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransferFrom(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">323</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">324</td>
                                    <td class="row-source"><pre>            address(this),</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">325</td>
                                    <td class="row-source"><pre>            amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">326</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">327</td>
                                    <td class="row-source"><pre>        s_equityTrancheShares[msg.sender] += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">328</td>
                                    <td class="row-source"><pre>        s_totalEquityShares += shares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">329</td>
                                    <td class="row-source"><pre>        s_equityTrancheIdleValue += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">330</td>
                                    <td class="row-source"><pre>        equityUserIndex[msg.sender] = equityInterestIndex;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">331</td>
                                    <td class="row-source"><pre>        s_totalDeposited += amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">332</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">333</td>
                                    <td class="row-source"><pre>        emit FundsDepositedToEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">334</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">335</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">336</td>
                                    <td class="row-source"><pre>            shares,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">337</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">338</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">339</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">340</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">341</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">342</td>
                                    <td class="row-source"><pre>     * @notice Allocate capital according to the 80/20 split</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">343</td>
                                    <td class="row-source"><pre>     * @param totalDisbursement Total amount to allocate from the pool</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">344</td>
                                    <td class="row-source"><pre>     * @param fees Total fees to be collected</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">345</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">346</td>
                                    <td class="row-source"><pre>    function allocateCapital(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">347</td>
                                    <td class="row-source"><pre>        uint256 totalDisbursement,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">348</td>
                                    <td class="row-source"><pre>        uint256 fees,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">349</td>
                                    <td class="row-source"><pre>        address deployer,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">350</td>
                                    <td class="row-source"><pre>        address feeManager</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">351</td>
                                    <td class="row-source"><pre>    ) external onlyLoanEngine(msg.sender) returns (uint256, uint256, uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">352</td>
                                    <td class="row-source"><pre>        if (</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">353</td>
                                    <td class="row-source"><pre>            poolState != PoolState.COMMITED &amp;&amp; poolState != PoolState.DEPLOYED</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">354</td>
                                    <td class="row-source"><pre>        ) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">355</td>
                                    <td class="row-source"><pre>            revert TranchePool__PoolIsNotCommited();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">356</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">357</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">358</td>
                                    <td class="row-source"><pre>        uint256 totalAmount = totalDisbursement + fees;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">359</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">360</td>
                                    <td class="row-source"><pre>        // Global liquidity check</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">361</td>
                                    <td class="row-source"><pre>        uint256 totalIdle = s_seniorTrancheIdleValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">362</td>
                                    <td class="row-source"><pre>            s_juniorTrancheIdleValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">363</td>
                                    <td class="row-source"><pre>            s_equityTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">364</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">365</td>
                                    <td class="row-source"><pre>        if (totalAmount &gt; totalIdle) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">366</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">367</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">368</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">369</td>
                                    <td class="row-source"><pre>        uint256 targetSenior = (totalAmount *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">370</td>
                                    <td class="row-source"><pre>            s_capital_allocation_factor_senior) / 100;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">371</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">372</td>
                                    <td class="row-source"><pre>        uint256 targetJunior = (totalAmount *</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">373</td>
                                    <td class="row-source"><pre>            s_capital_allocation_factor_junior) / 100;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">374</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">375</td>
                                    <td class="row-source"><pre>        uint256 targetEquity = totalAmount - targetSenior - targetJunior;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">376</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">377</td>
                                    <td class="row-source"><pre>        uint256 seniorAmount = _minimum(targetSenior, s_seniorTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">378</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">379</td>
                                    <td class="row-source"><pre>        uint256 juniorAmount = _minimum(targetJunior, s_juniorTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">380</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">381</td>
                                    <td class="row-source"><pre>        uint256 equityAmount = _minimum(targetEquity, s_equityTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">382</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">383</td>
                                    <td class="row-source"><pre>        uint256 allocated = seniorAmount + juniorAmount + equityAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">384</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">385</td>
                                    <td class="row-source"><pre>        uint256 remaining = totalAmount - allocated;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">386</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">387</td>
                                    <td class="row-source"><pre>        // Equity absorbs first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">388</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_equityTrancheIdleValue &gt; equityAmount) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">389</td>
                                    <td class="row-source"><pre>            uint256 extra = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">390</td>
                                    <td class="row-source"><pre>                remaining,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">391</td>
                                    <td class="row-source"><pre>                s_equityTrancheIdleValue - equityAmount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">392</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">393</td>
                                    <td class="row-source"><pre>            equityAmount += extra;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">394</td>
                                    <td class="row-source"><pre>            remaining -= extra;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">395</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">396</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">397</td>
                                    <td class="row-source"><pre>        // Junior absorbs next</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">398</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_juniorTrancheIdleValue &gt; juniorAmount) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">399</td>
                                    <td class="row-source"><pre>            uint256 extra = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">400</td>
                                    <td class="row-source"><pre>                remaining,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">401</td>
                                    <td class="row-source"><pre>                s_juniorTrancheIdleValue - juniorAmount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">402</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">403</td>
                                    <td class="row-source"><pre>            juniorAmount += extra;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">404</td>
                                    <td class="row-source"><pre>            remaining -= extra;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">405</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">406</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">407</td>
                                    <td class="row-source"><pre>        // Senior absorbs last</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">408</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_seniorTrancheIdleValue &gt; seniorAmount) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">409</td>
                                    <td class="row-source"><pre>            uint256 extra = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">410</td>
                                    <td class="row-source"><pre>                remaining,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">411</td>
                                    <td class="row-source"><pre>                s_seniorTrancheIdleValue - seniorAmount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">412</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">413</td>
                                    <td class="row-source"><pre>            seniorAmount += extra;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">414</td>
                                    <td class="row-source"><pre>            remaining -= extra;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">415</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">416</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">417</td>
                                    <td class="row-source"><pre>        // Final safety check</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">418</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">419</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">420</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">421</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">422</td>
                                    <td class="row-source"><pre>        if (poolState == PoolState.COMMITED) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">423</td>
                                    <td class="row-source"><pre>            poolState = PoolState.DEPLOYED;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">424</td>
                                    <td class="row-source"><pre>            emit PoolStateUpdated(PoolState.DEPLOYED);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">425</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">426</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">427</td>
                                    <td class="row-source"><pre>        s_seniorTrancheIdleValue -= seniorAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">428</td>
                                    <td class="row-source"><pre>        s_juniorTrancheIdleValue -= juniorAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">429</td>
                                    <td class="row-source"><pre>        s_equityTrancheIdleValue -= equityAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">430</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">431</td>
                                    <td class="row-source"><pre>        s_seniorTrancheDeployedValue += seniorAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">432</td>
                                    <td class="row-source"><pre>        s_juniorTrancheDeployedValue += juniorAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">433</td>
                                    <td class="row-source"><pre>        s_equityTrancheDeployedValue += equityAmount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">434</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">435</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(deployer, totalDisbursement);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">436</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">437</td>
                                    <td class="row-source"><pre>        if (fees &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">438</td>
                                    <td class="row-source"><pre>            IERC20(s_stableCoin).safeTransfer(feeManager, fees);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">439</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">440</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">441</td>
                                    <td class="row-source"><pre>        emit CapitalAllocated(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">442</td>
                                    <td class="row-source"><pre>            seniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">443</td>
                                    <td class="row-source"><pre>            juniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">444</td>
                                    <td class="row-source"><pre>            equityAmount,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">445</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">446</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">447</td>
                                    <td class="row-source"><pre>        return (seniorAmount, juniorAmount, equityAmount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">448</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">449</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">450</td>
                                    <td class="row-source"><pre>    function onInterestAccrued(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">451</td>
                                    <td class="row-source"><pre>        uint256 interestAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">452</td>
                                    <td class="row-source"><pre>        uint256 seniorInterest,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">453</td>
                                    <td class="row-source"><pre>        uint256 juniorInterest</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">454</td>
                                    <td class="row-source"><pre>    ) external onlyLoanEngine(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">455</td>
                                    <td class="row-source"><pre>        if (interestAmount == 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">456</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">457</td>
                                    <td class="row-source"><pre>        seniorAccruedInterest += seniorInterest;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">458</td>
                                    <td class="row-source"><pre>        juniorAccruedInterest += juniorInterest;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">459</td>
                                    <td class="row-source"><pre>        equityAccruedInterest += (interestAmount -</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">460</td>
                                    <td class="row-source"><pre>            seniorInterest -</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">461</td>
                                    <td class="row-source"><pre>            juniorInterest);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">462</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">463</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">464</td>
                                    <td class="row-source"><pre>    function onRepayment(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">465</td>
                                    <td class="row-source"><pre>        uint256 principalRepaid,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">466</td>
                                    <td class="row-source"><pre>        uint256 interestRepaid</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">467</td>
                                    <td class="row-source"><pre>    ) external onlyLoanEngine(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">468</td>
                                    <td class="row-source"><pre>        if (principalRepaid == 0 &amp;&amp; interestRepaid == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">469</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidTransferAmount(0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">470</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">471</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">472</td>
                                    <td class="row-source"><pre>        /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">473</td>
                                    <td class="row-source"><pre>                        INTEREST WATERFALL (INDEXED)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">474</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">475</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">476</td>
                                    <td class="row-source"><pre>        uint256 remainingInterest = interestRepaid;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">477</td>
                                    <td class="row-source"><pre>        s_totalUnclaimedInterest += interestRepaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">478</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">479</td>
                                    <td class="row-source"><pre>        // 1ï¸âƒ£ Senior interest</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">480</td>
                                    <td class="row-source"><pre>        if (</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">481</td>
                                    <td class="row-source"><pre>            remainingInterest &gt; 0 &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">482</td>
                                    <td class="row-source"><pre>            seniorAccruedInterest &gt; 0 &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">483</td>
                                    <td class="row-source"><pre>            s_totalSeniorShares &gt; 0</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">484</td>
                                    <td class="row-source"><pre>        ) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">485</td>
                                    <td class="row-source"><pre>            uint256 seniorPaid = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">486</td>
                                    <td class="row-source"><pre>                remainingInterest,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">487</td>
                                    <td class="row-source"><pre>                seniorAccruedInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">488</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">489</td>
                                    <td class="row-source"><pre>            seniorAccruedInterest -= seniorPaid;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">490</td>
                                    <td class="row-source"><pre>            seniorInterestIndex += (seniorPaid * 1e18) / s_totalSeniorShares;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">491</td>
                                    <td class="row-source"><pre>            remainingInterest -= seniorPaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">492</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">493</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">494</td>
                                    <td class="row-source"><pre>        // 2ï¸âƒ£ Junior interest</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">495</td>
                                    <td class="row-source"><pre>        if (</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">496</td>
                                    <td class="row-source"><pre>            remainingInterest &gt; 0 &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">497</td>
                                    <td class="row-source"><pre>            juniorAccruedInterest &gt; 0 &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">498</td>
                                    <td class="row-source"><pre>            s_totalJuniorShares &gt; 0</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">499</td>
                                    <td class="row-source"><pre>        ) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">500</td>
                                    <td class="row-source"><pre>            uint256 juniorPaid = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">501</td>
                                    <td class="row-source"><pre>                remainingInterest,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">502</td>
                                    <td class="row-source"><pre>                juniorAccruedInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">503</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">504</td>
                                    <td class="row-source"><pre>            juniorAccruedInterest -= juniorPaid;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">505</td>
                                    <td class="row-source"><pre>            juniorInterestIndex += (juniorPaid * 1e18) / s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">506</td>
                                    <td class="row-source"><pre>            remainingInterest -= juniorPaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">507</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">508</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">509</td>
                                    <td class="row-source"><pre>        // 3ï¸âƒ£ Equity / overflow interest</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">510</td>
                                    <td class="row-source"><pre>        if (remainingInterest &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">511</td>
                                    <td class="row-source"><pre>            if (s_totalEquityShares &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">512</td>
                                    <td class="row-source"><pre>                equityInterestIndex +=</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">513</td>
                                    <td class="row-source"><pre>                    (remainingInterest * 1e18) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">514</td>
                                    <td class="row-source"><pre>                    s_totalEquityShares;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">515</td>
                                    <td class="row-source"><pre>                equityAccruedInterest -= _minimum(</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">516</td>
                                    <td class="row-source"><pre>                    equityAccruedInterest,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">517</td>
                                    <td class="row-source"><pre>                    remainingInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">518</td>
                                    <td class="row-source"><pre>                );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">519</td>
                                    <td class="row-source"><pre>            } else if (s_totalJuniorShares &gt; 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">520</td>
                                    <td class="row-source"><pre>                // no equity â†’ junior gets excess</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">521</td>
                                    <td class="row-source"><pre>                juniorInterestIndex +=</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">522</td>
                                    <td class="row-source"><pre>                    (remainingInterest * 1e18) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">523</td>
                                    <td class="row-source"><pre>                    s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">524</td>
                                    <td class="row-source"><pre>            } else {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">525</td>
                                    <td class="row-source"><pre>                // no LPs left â†’ protocol revenue</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">526</td>
                                    <td class="row-source"><pre>                s_protocolRevenue += remainingInterest;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">527</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">528</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">529</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">530</td>
                                    <td class="row-source"><pre>        /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">531</td>
                                    <td class="row-source"><pre>                        PRINCIPAL REDEMPTION</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">532</td>
                                    <td class="row-source"><pre>            (REVERSE OF LOSS WATERFALL â€” NO RATIOS)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">533</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">534</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">535</td>
                                    <td class="row-source"><pre>        if (principalRepaid &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">536</td>
                                    <td class="row-source"><pre>            uint256 remaining = principalRepaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">537</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">538</td>
                                    <td class="row-source"><pre>            // Senior first (restore safest capital)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">539</td>
                                    <td class="row-source"><pre>            if (remaining &gt; 0 &amp;&amp; s_seniorTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">540</td>
                                    <td class="row-source"><pre>                uint256 seniorPay = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">541</td>
                                    <td class="row-source"><pre>                    remaining,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">542</td>
                                    <td class="row-source"><pre>                    s_seniorTrancheDeployedValue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">543</td>
                                    <td class="row-source"><pre>                );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">544</td>
                                    <td class="row-source"><pre>                s_seniorTrancheDeployedValue -= seniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">545</td>
                                    <td class="row-source"><pre>                s_seniorTrancheIdleValue += seniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">546</td>
                                    <td class="row-source"><pre>                remaining -= seniorPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">547</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">548</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">549</td>
                                    <td class="row-source"><pre>            // Junior next</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">550</td>
                                    <td class="row-source"><pre>            if (remaining &gt; 0 &amp;&amp; s_juniorTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">551</td>
                                    <td class="row-source"><pre>                uint256 juniorPay = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">552</td>
                                    <td class="row-source"><pre>                    remaining,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">553</td>
                                    <td class="row-source"><pre>                    s_juniorTrancheDeployedValue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">554</td>
                                    <td class="row-source"><pre>                );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">555</td>
                                    <td class="row-source"><pre>                s_juniorTrancheDeployedValue -= juniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">556</td>
                                    <td class="row-source"><pre>                s_juniorTrancheIdleValue += juniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">557</td>
                                    <td class="row-source"><pre>                remaining -= juniorPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">558</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">559</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">560</td>
                                    <td class="row-source"><pre>            // Equity last</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">561</td>
                                    <td class="row-source"><pre>            if (remaining &gt; 0 &amp;&amp; s_equityTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">562</td>
                                    <td class="row-source"><pre>                uint256 equityPay = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">563</td>
                                    <td class="row-source"><pre>                    remaining,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">564</td>
                                    <td class="row-source"><pre>                    s_equityTrancheDeployedValue</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">565</td>
                                    <td class="row-source"><pre>                );</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">566</td>
                                    <td class="row-source"><pre>                s_equityTrancheDeployedValue -= equityPay;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">567</td>
                                    <td class="row-source"><pre>                s_equityTrancheIdleValue += equityPay;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">568</td>
                                    <td class="row-source"><pre>                remaining -= equityPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">569</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">570</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">571</td>
                                    <td class="row-source"><pre>            // Safety: should never happen unless LoanEngine lies</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">572</td>
                                    <td class="row-source"><pre>            if (remaining &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">573</td>
                                    <td class="row-source"><pre>                revert TranchePool__PrincipalRepaymentExceeded();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">574</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">575</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">576</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">577</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">578</td>
                                    <td class="row-source"><pre>    // lp profit withdrawal is pending but it can only be implemented</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">579</td>
                                    <td class="row-source"><pre>    // after the loan enginge implementation which determines how the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">580</td>
                                    <td class="row-source"><pre>    // interest will be accured and the distribution is dependent on the</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">581</td>
                                    <td class="row-source"><pre>    // share capacity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">582</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">583</td>
                                    <td class="row-source"><pre>    function onLoss(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">584</td>
                                    <td class="row-source"><pre>        uint256 principalLoss,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">585</td>
                                    <td class="row-source"><pre>        uint256 interestAccrued</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">586</td>
                                    <td class="row-source"><pre>    ) external onlyLoanEngine(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">587</td>
                                    <td class="row-source"><pre>        if (principalLoss == 0 &amp;&amp; interestAccrued == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">588</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">589</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">590</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">591</td>
                                    <td class="row-source"><pre>        /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">592</td>
                                    <td class="row-source"><pre>                    1ï¸âƒ£ CANCEL GHOST INTEREST</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">593</td>
                                    <td class="row-source"><pre>        (SAME PRIORITY AS INTEREST PAYOUT)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">594</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">595</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">596</td>
                                    <td class="row-source"><pre>        uint256 remainingInterest = interestAccrued;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">597</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">598</td>
                                    <td class="row-source"><pre>        // Cancel senior accrued interest first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">599</td>
                                    <td class="row-source"><pre>        if (remainingInterest &gt; 0 &amp;&amp; seniorAccruedInterest &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">600</td>
                                    <td class="row-source"><pre>            uint256 seniorCancel = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">601</td>
                                    <td class="row-source"><pre>                remainingInterest,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">602</td>
                                    <td class="row-source"><pre>                seniorAccruedInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">603</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">604</td>
                                    <td class="row-source"><pre>            seniorAccruedInterest -= seniorCancel;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">605</td>
                                    <td class="row-source"><pre>            remainingInterest -= seniorCancel;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">606</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">607</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">608</td>
                                    <td class="row-source"><pre>        // Then junior</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">609</td>
                                    <td class="row-source"><pre>        if (remainingInterest &gt; 0 &amp;&amp; juniorAccruedInterest &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">610</td>
                                    <td class="row-source"><pre>            uint256 juniorCancel = _minimum(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">611</td>
                                    <td class="row-source"><pre>                remainingInterest,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">612</td>
                                    <td class="row-source"><pre>                juniorAccruedInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">613</td>
                                    <td class="row-source"><pre>            );</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">614</td>
                                    <td class="row-source"><pre>            juniorAccruedInterest -= juniorCancel;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">615</td>
                                    <td class="row-source"><pre>            remainingInterest -= juniorCancel;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">616</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">617</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">618</td>
                                    <td class="row-source"><pre>        // Any remaining interest is ignored (equity / protocol had no promise)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">619</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">620</td>
                                    <td class="row-source"><pre>        /*//////////////////////////////////////////////////////////////</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">621</td>
                                    <td class="row-source"><pre>                    2ï¸âƒ£ PRINCIPAL LOSS WATERFALL</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">622</td>
                                    <td class="row-source"><pre>                Equity â†’ Junior â†’ Senior</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">623</td>
                                    <td class="row-source"><pre>    //////////////////////////////////////////////////////////////*/</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">624</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">625</td>
                                    <td class="row-source"><pre>        s_totalLoss += principalLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">626</td>
                                    <td class="row-source"><pre>        uint256 remaining = principalLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">627</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">628</td>
                                    <td class="row-source"><pre>        uint256 equityLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">629</td>
                                    <td class="row-source"><pre>        uint256 juniorLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">630</td>
                                    <td class="row-source"><pre>        uint256 seniorLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">631</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">632</td>
                                    <td class="row-source"><pre>        // Equity absorbs first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">633</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_equityTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">634</td>
                                    <td class="row-source"><pre>            equityLoss = _minimum(remaining, s_equityTrancheDeployedValue);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">635</td>
                                    <td class="row-source"><pre>            s_equityTrancheDeployedValue -= equityLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">636</td>
                                    <td class="row-source"><pre>            equityPrincipalShortfall += equityLoss;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">637</td>
                                    <td class="row-source"><pre>            remaining -= equityLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">638</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">639</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">640</td>
                                    <td class="row-source"><pre>        // Junior next</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">641</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_juniorTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">642</td>
                                    <td class="row-source"><pre>            juniorLoss = _minimum(remaining, s_juniorTrancheDeployedValue);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">643</td>
                                    <td class="row-source"><pre>            s_juniorTrancheDeployedValue -= juniorLoss;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">644</td>
                                    <td class="row-source"><pre>            juniorPrincipalShortfall += juniorLoss;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">645</td>
                                    <td class="row-source"><pre>            remaining -= juniorLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">646</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">647</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">648</td>
                                    <td class="row-source"><pre>        // Senior last</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">649</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; s_seniorTrancheDeployedValue &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">650</td>
                                    <td class="row-source"><pre>            seniorLoss = _minimum(remaining, s_seniorTrancheDeployedValue);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">651</td>
                                    <td class="row-source"><pre>            s_seniorTrancheDeployedValue -= seniorLoss;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">652</td>
                                    <td class="row-source"><pre>            seniorPrincipalShortfall += seniorLoss;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">653</td>
                                    <td class="row-source"><pre>            remaining -= seniorLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">654</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">655</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">656</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">657</td>
                                    <td class="row-source"><pre>            revert TranchePool__LossExceededCapital(remaining);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">658</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">659</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">660</td>
                                    <td class="row-source"><pre>        emit LossAllocated(seniorLoss, juniorLoss, equityLoss);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">661</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">662</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">663</td>
                                    <td class="row-source"><pre>    // on recovery what happens is the protocol may recover more than he lost and it can cause appreciation of the share value when withdrawing, keeping the design simple because adding it to interest accured make no difference at the end of withdrawing.</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">664</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">665</td>
                                    <td class="row-source"><pre>    function onRecovery(uint256 amount) external onlyLoanEngine(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">666</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">667</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">668</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">669</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">670</td>
                                    <td class="row-source"><pre>        s_totalRecovered += amount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">671</td>
                                    <td class="row-source"><pre>        uint256 remaining = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">672</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">673</td>
                                    <td class="row-source"><pre>        // Senior first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">674</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; seniorPrincipalShortfall &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">675</td>
                                    <td class="row-source"><pre>            uint256 seniorPay = _minimum(remaining, seniorPrincipalShortfall);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">676</td>
                                    <td class="row-source"><pre>            seniorPrincipalShortfall -= seniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">677</td>
                                    <td class="row-source"><pre>            s_seniorTrancheIdleValue += seniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">678</td>
                                    <td class="row-source"><pre>            remaining -= seniorPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">679</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">680</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">681</td>
                                    <td class="row-source"><pre>        // Junior next</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">682</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; juniorPrincipalShortfall &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">683</td>
                                    <td class="row-source"><pre>            uint256 juniorPay = _minimum(remaining, juniorPrincipalShortfall);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">684</td>
                                    <td class="row-source"><pre>            juniorPrincipalShortfall -= juniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">685</td>
                                    <td class="row-source"><pre>            s_juniorTrancheIdleValue += juniorPay;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">686</td>
                                    <td class="row-source"><pre>            remaining -= juniorPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">687</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">688</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">689</td>
                                    <td class="row-source"><pre>        // Equity last</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">690</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0 &amp;&amp; equityPrincipalShortfall &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">691</td>
                                    <td class="row-source"><pre>            uint256 equityPay = _minimum(remaining, equityPrincipalShortfall);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">692</td>
                                    <td class="row-source"><pre>            equityPrincipalShortfall -= equityPay;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">693</td>
                                    <td class="row-source"><pre>            s_equityTrancheIdleValue += equityPay;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">694</td>
                                    <td class="row-source"><pre>            remaining -= equityPay;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">695</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">696</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">697</td>
                                    <td class="row-source"><pre>        // Any excess is true upside â†’ equity</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">698</td>
                                    <td class="row-source"><pre>        if (remaining &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">699</td>
                                    <td class="row-source"><pre>            s_equityTrancheIdleValue += remaining;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">700</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">701</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">702</td>
                                    <td class="row-source"><pre>        emit RecoverAmountTransferredToTranchePool(amount, block.timestamp);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">703</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">704</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">705</td>
                                    <td class="row-source"><pre>    // when the pool closes if the user withdraw the shares before claiming interest on those he will lose the interest for the withdrawn shares</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">706</td>
                                    <td class="row-source"><pre>    function claimSeniorInterest() external {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">707</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_seniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">708</td>
                                    <td class="row-source"><pre>        if (userShares == 0) revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">709</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">710</td>
                                    <td class="row-source"><pre>        uint256 indexDelta = seniorInterestIndex - seniorUserIndex[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">711</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">712</td>
                                    <td class="row-source"><pre>        if (indexDelta == 0) revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">713</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">714</td>
                                    <td class="row-source"><pre>        uint256 claimable = (userShares * indexDelta) / 1e18;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">715</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">716</td>
                                    <td class="row-source"><pre>        // CHANGED: update user index BEFORE transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">717</td>
                                    <td class="row-source"><pre>        seniorUserIndex[msg.sender] = seniorInterestIndex;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">718</td>
                                    <td class="row-source"><pre>        s_totalUnclaimedInterest -= claimable;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">719</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">720</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, claimable);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">721</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">722</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">723</td>
                                    <td class="row-source"><pre>    function claimJuniorInterest() external {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">724</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_juniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">725</td>
                                    <td class="row-source"><pre>        if (userShares == 0) revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">726</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">727</td>
                                    <td class="row-source"><pre>        uint256 indexDelta = juniorInterestIndex - juniorUserIndex[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">728</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">729</td>
                                    <td class="row-source"><pre>        if (indexDelta == 0) revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">730</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">731</td>
                                    <td class="row-source"><pre>        uint256 claimable = (userShares * indexDelta) / 1e18;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">732</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">733</td>
                                    <td class="row-source"><pre>        // CHANGED: update user index BEFORE transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">734</td>
                                    <td class="row-source"><pre>        juniorUserIndex[msg.sender] = juniorInterestIndex;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">735</td>
                                    <td class="row-source"><pre>        s_totalUnclaimedInterest -= claimable;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">736</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">737</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, claimable);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">738</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">739</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">740</td>
                                    <td class="row-source"><pre>    function claimEquityInterest()</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">741</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">742</td>
                                    <td class="row-source"><pre>        isWhiteListedForEquityTranche(msg.sender)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">743</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">744</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_equityTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">745</td>
                                    <td class="row-source"><pre>        if (userShares == 0) revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">746</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">747</td>
                                    <td class="row-source"><pre>        uint256 indexDelta = equityInterestIndex - equityUserIndex[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">748</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">749</td>
                                    <td class="row-source"><pre>        if (indexDelta == 0) revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">750</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">751</td>
                                    <td class="row-source"><pre>        uint256 claimable = (userShares * indexDelta) / 1e18;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">752</td>
                                    <td class="row-source"><pre>        s_totalUnclaimedInterest -= claimable;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">753</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">754</td>
                                    <td class="row-source"><pre>        // CHANGED: update user index BEFORE transfer</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">755</td>
                                    <td class="row-source"><pre>        equityUserIndex[msg.sender] = equityInterestIndex;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">756</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">757</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, claimable);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">758</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">759</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">760</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">761</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">762</td>
                                    <td class="row-source"><pre>     *</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">763</td>
                                    <td class="row-source"><pre>     * @notice Withdraw from senior tranche by burning shares</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">764</td>
                                    <td class="row-source"><pre>     * @param shares Number of shares to burn (0 = withdraw all)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">765</td>
                                    <td class="row-source"><pre>     * passing zero amount will cause the burn of all shares</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">766</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">767</td>
                                    <td class="row-source"><pre>    function withdrawSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">768</td>
                                    <td class="row-source"><pre>        uint256 shares</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">769</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">770</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">771</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">772</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">773</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_seniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">774</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">775</td>
                                    <td class="row-source"><pre>        if (userShares == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">776</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">777</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">778</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">779</td>
                                    <td class="row-source"><pre>        // If shares is 0, withdraw everything</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">780</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = shares == 0 ? userShares : shares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">781</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">782</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; userShares) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">783</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">784</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">785</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">786</td>
                                    <td class="row-source"><pre>        // Calculate amount to withdraw based on current pool value</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">787</td>
                                    <td class="row-source"><pre>        uint256 amountToWithdraw = (sharesToBurn * s_seniorTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">788</td>
                                    <td class="row-source"><pre>            s_totalSeniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">789</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">790</td>
                                    <td class="row-source"><pre>        if (seniorUserIndex[msg.sender] != seniorInterestIndex) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">791</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">792</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">793</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">794</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">795</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">796</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">797</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">798</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw &gt; s_seniorTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">799</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">800</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">801</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">802</td>
                                    <td class="row-source"><pre>        // Update state before transfer (CEI pattern)</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">803</td>
                                    <td class="row-source"><pre>        s_seniorTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">804</td>
                                    <td class="row-source"><pre>        s_totalSeniorShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">805</td>
                                    <td class="row-source"><pre>        s_seniorTrancheIdleValue -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">806</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">807</td>
                                    <td class="row-source"><pre>        // Transfer tokens</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">808</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amountToWithdraw);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">809</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">810</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">811</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">812</td>
                                    <td class="row-source"><pre>            amountToWithdraw,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">813</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">814</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">815</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">816</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">817</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">818</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">819</td>
                                    <td class="row-source"><pre>     * @notice Withdraw from junior tranche by burning shares</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">820</td>
                                    <td class="row-source"><pre>     * @param shares Number of shares to burn (0 = withdraw all)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">821</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">822</td>
                                    <td class="row-source"><pre>    function withdrawJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">823</td>
                                    <td class="row-source"><pre>        uint256 shares</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">824</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">825</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">826</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">827</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">828</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_juniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">829</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">830</td>
                                    <td class="row-source"><pre>        if (userShares == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">831</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">832</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">833</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">834</td>
                                    <td class="row-source"><pre>        if (juniorUserIndex[msg.sender] != juniorInterestIndex) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">835</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">836</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">837</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">838</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = shares == 0 ? userShares : shares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">839</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">840</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; userShares) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">841</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">842</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">843</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">844</td>
                                    <td class="row-source"><pre>        uint256 amountToWithdraw = (sharesToBurn * s_juniorTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">845</td>
                                    <td class="row-source"><pre>            s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">846</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">847</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">848</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">849</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">850</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw &gt; s_juniorTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">851</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">852</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">853</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">854</td>
                                    <td class="row-source"><pre>        s_juniorTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">855</td>
                                    <td class="row-source"><pre>        s_totalJuniorShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">856</td>
                                    <td class="row-source"><pre>        s_juniorTrancheIdleValue -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">857</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">858</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">859</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amountToWithdraw);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">860</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">861</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">862</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">863</td>
                                    <td class="row-source"><pre>            amountToWithdraw,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">864</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">865</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">866</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">867</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">868</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">869</td>
                                    <td class="row-source"><pre>    function withdrawEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">870</td>
                                    <td class="row-source"><pre>        uint256 shares</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">871</td>
                                    <td class="row-source"><pre>    ) external isWhiteListedForEquityTranche(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">872</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">873</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">874</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">875</td>
                                    <td class="row-source"><pre>        uint256 userShares = s_equityTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">876</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">877</td>
                                    <td class="row-source"><pre>        if (userShares == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">878</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">879</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">880</td>
                                    <td class="row-source"><pre>        if (equityUserIndex[msg.sender] != equityInterestIndex) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">881</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">882</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">883</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = shares == 0 ? userShares : shares;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">884</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; userShares) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">885</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">886</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">887</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">888</td>
                                    <td class="row-source"><pre>        uint256 amountToWithdraw = (sharesToBurn * s_equityTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">889</td>
                                    <td class="row-source"><pre>            s_totalEquityShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">890</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">891</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">892</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">893</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">894</td>
                                    <td class="row-source"><pre>        if (amountToWithdraw &gt; s_equityTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">895</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">896</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">897</td>
                                    <td class="row-source"><pre>        s_equityTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">898</td>
                                    <td class="row-source"><pre>        s_totalEquityShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">899</td>
                                    <td class="row-source"><pre>        s_equityTrancheIdleValue -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">900</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amountToWithdraw;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">901</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">902</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amountToWithdraw);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">903</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">904</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">905</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">906</td>
                                    <td class="row-source"><pre>            amountToWithdraw,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">907</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">908</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">909</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">910</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">911</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">912</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">913</td>
                                    <td class="row-source"><pre>     * @notice Withdraw specific amount from senior tranche</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">914</td>
                                    <td class="row-source"><pre>     * @param amount Amount of tokens to withdraw</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">915</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">916</td>
                                    <td class="row-source"><pre>    function withdrawSeniorTrancheByAmount(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">917</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">918</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">919</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">920</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">921</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">922</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">923</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">924</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">925</td>
                                    <td class="row-source"><pre>        if (seniorUserIndex[msg.sender] != seniorInterestIndex) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">926</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">927</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">928</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">929</td>
                                    <td class="row-source"><pre>        uint256 userBalance = getSeniorTrancheBalance(msg.sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">930</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">931</td>
                                    <td class="row-source"><pre>        if (amount &gt; userBalance) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">932</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">933</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">934</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">935</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_seniorTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">936</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">937</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">938</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">939</td>
                                    <td class="row-source"><pre>        // Calculate shares to burn for this amount</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">940</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = (amount * s_totalSeniorShares) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">941</td>
                                    <td class="row-source"><pre>            (s_seniorTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">942</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">943</td>
                                    <td class="row-source"><pre>        // Handle rounding - ensure we don&#39;t try to withdraw more than available</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">944</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; s_seniorTrancheShares[msg.sender]) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">945</td>
                                    <td class="row-source"><pre>            sharesToBurn = s_seniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">946</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">947</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">948</td>
                                    <td class="row-source"><pre>        s_seniorTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">949</td>
                                    <td class="row-source"><pre>        s_totalSeniorShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">950</td>
                                    <td class="row-source"><pre>        s_seniorTrancheIdleValue -= amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">951</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">952</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">953</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">954</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">955</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">956</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">957</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">958</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">959</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">960</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">961</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">962</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">963</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">964</td>
                                    <td class="row-source"><pre>     * @notice Withdraw specific amount from junior tranche</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">965</td>
                                    <td class="row-source"><pre>     * @param amount Amount of tokens to withdraw</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">966</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">967</td>
                                    <td class="row-source"><pre>    function withdrawJuniorTrancheByAmount(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">968</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">969</td>
                                    <td class="row-source"><pre>    ) external isWhiteListed(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">970</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">971</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">972</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">973</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">974</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">975</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">976</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">977</td>
                                    <td class="row-source"><pre>        if (juniorUserIndex[msg.sender] != juniorInterestIndex) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">978</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">979</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">980</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">981</td>
                                    <td class="row-source"><pre>        uint256 userBalance = getJuniorTrancheBalance(msg.sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">982</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">983</td>
                                    <td class="row-source"><pre>        if (amount &gt; userBalance) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">984</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">985</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">986</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">987</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_juniorTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">988</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">989</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">990</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">991</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = (amount * s_totalJuniorShares) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">992</td>
                                    <td class="row-source"><pre>            (s_juniorTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">993</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">994</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; s_juniorTrancheShares[msg.sender]) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">995</td>
                                    <td class="row-source"><pre>            sharesToBurn = s_juniorTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">996</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">997</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">998</td>
                                    <td class="row-source"><pre>        s_juniorTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">999</td>
                                    <td class="row-source"><pre>        s_totalJuniorShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1000</td>
                                    <td class="row-source"><pre>        s_juniorTrancheIdleValue -= amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1001</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1002</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1003</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1004</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1005</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1006</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1007</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1008</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1009</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1010</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1011</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1012</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1013</td>
                                    <td class="row-source"><pre>    function withdrawEquityTrancheByAmount(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1014</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1015</td>
                                    <td class="row-source"><pre>    ) external isWhiteListedForEquityTranche(msg.sender) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1016</td>
                                    <td class="row-source"><pre>        if (poolState != PoolState.OPEN &amp;&amp; poolState != PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1017</td>
                                    <td class="row-source"><pre>            revert TranchePool__WithdrawNotAllowed(poolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1018</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1019</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1020</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroWithdrawal();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1021</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1022</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1023</td>
                                    <td class="row-source"><pre>        if (equityUserIndex[msg.sender] != equityInterestIndex) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1024</td>
                                    <td class="row-source"><pre>            revert TranchePool__InterestNotClaimed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1025</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1026</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1027</td>
                                    <td class="row-source"><pre>        uint256 userBalance = getEquityTrancheBalance(msg.sender);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1028</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1029</td>
                                    <td class="row-source"><pre>        if (amount &gt; userBalance) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1030</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientShares();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1031</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1032</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1033</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_equityTrancheIdleValue) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1034</td>
                                    <td class="row-source"><pre>            revert TranchePool__InsufficientLiquidity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1035</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1036</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1037</td>
                                    <td class="row-source"><pre>        uint256 sharesToBurn = (amount * s_totalEquityShares) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1038</td>
                                    <td class="row-source"><pre>            (s_equityTrancheIdleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1039</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1040</td>
                                    <td class="row-source"><pre>        if (sharesToBurn &gt; s_equityTrancheShares[msg.sender]) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1041</td>
                                    <td class="row-source"><pre>            sharesToBurn = s_equityTrancheShares[msg.sender];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1042</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1043</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1044</td>
                                    <td class="row-source"><pre>        s_equityTrancheShares[msg.sender] -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1045</td>
                                    <td class="row-source"><pre>        s_totalEquityShares -= sharesToBurn;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1046</td>
                                    <td class="row-source"><pre>        s_equityTrancheIdleValue -= amount;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1047</td>
                                    <td class="row-source"><pre>        s_totalDeposited -= amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1048</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1049</td>
                                    <td class="row-source"><pre>        IERC20(s_stableCoin).safeTransfer(msg.sender, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1050</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1051</td>
                                    <td class="row-source"><pre>        emit WithdrawnFromEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1052</td>
                                    <td class="row-source"><pre>            msg.sender,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1053</td>
                                    <td class="row-source"><pre>            amount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1054</td>
                                    <td class="row-source"><pre>            sharesToBurn,</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1055</td>
                                    <td class="row-source"><pre>            block.timestamp</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1056</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1057</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1058</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1059</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1060</td>
                                    <td class="row-source"><pre>     * @notice Get the current balance of a user in the senior tranche</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1061</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1062</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1063</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1064</td>
                                    <td class="row-source"><pre>    ) public view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1065</td>
                                    <td class="row-source"><pre>        if (s_totalSeniorShares == 0) return 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1066</td>
                                    <td class="row-source"><pre>        return</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1067</td>
                                    <td class="row-source"><pre>            (s_seniorTrancheShares[user] * s_seniorTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1068</td>
                                    <td class="row-source"><pre>            s_totalSeniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1069</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1070</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1071</td>
                                    <td class="row-source"><pre>    /**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1072</td>
                                    <td class="row-source"><pre>     * @notice Get the current balance of a user in the junior tranche</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1073</td>
                                    <td class="row-source"><pre>     */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1074</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1075</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1076</td>
                                    <td class="row-source"><pre>    ) public view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1077</td>
                                    <td class="row-source"><pre>        if (s_totalJuniorShares == 0) return 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1078</td>
                                    <td class="row-source"><pre>        return</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1079</td>
                                    <td class="row-source"><pre>            (s_juniorTrancheShares[user] * s_juniorTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1080</td>
                                    <td class="row-source"><pre>            s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1081</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1082</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1083</td>
                                    <td class="row-source"><pre>    function getEquityTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1084</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1085</td>
                                    <td class="row-source"><pre>    ) public view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1086</td>
                                    <td class="row-source"><pre>        if (s_totalEquityShares == 0) return 0;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1087</td>
                                    <td class="row-source"><pre>        return</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1088</td>
                                    <td class="row-source"><pre>            (s_equityTrancheShares[user] * s_equityTrancheIdleValue) /</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1089</td>
                                    <td class="row-source"><pre>            s_totalEquityShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1090</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1091</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1092</td>
                                    <td class="row-source"><pre>    // Admin functions</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1093</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1094</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1095</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1096</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_juniorTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1097</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMinDepositAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1098</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1099</td>
                                    <td class="row-source"><pre>        s_minimumDepositAmountJuniorTranche = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1100</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1101</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1102</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1103</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1104</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1105</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_seniorTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1106</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMinDepositAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1107</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1108</td>
                                    <td class="row-source"><pre>        s_minimumDepositAmountSeniorTranche = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1109</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1110</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1111</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1112</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1113</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1114</td>
                                    <td class="row-source"><pre>        if (amount &gt; s_equityTrancheMaxCap) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1115</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMinDepositAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1116</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1117</td>
                                    <td class="row-source"><pre>        s_minimumDepositAmountEquityTranche = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1118</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1119</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1120</td>
                                    <td class="row-source"><pre>    function setTrancheCapitalAllocationFactorSenior(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1121</td>
                                    <td class="row-source"><pre>        uint256 factor</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1122</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1123</td>
                                    <td class="row-source"><pre>        if (factor + s_capital_allocation_factor_junior &gt; 100)</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1124</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidAllocationRatio();</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1125</td>
                                    <td class="row-source"><pre>        s_capital_allocation_factor_senior = factor;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1126</td>
                                    <td class="row-source"><pre>        emit CapitalAllocationFactorUpdatedSenior(factor);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1127</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1128</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1129</td>
                                    <td class="row-source"><pre>    function setTrancheCapitalAllocationFactorJunior(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1130</td>
                                    <td class="row-source"><pre>        uint256 factor</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1131</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1132</td>
                                    <td class="row-source"><pre>        if (factor + s_capital_allocation_factor_senior &gt; 100)</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1133</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidAllocationRatio();</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1134</td>
                                    <td class="row-source"><pre>        s_capital_allocation_factor_junior = factor;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1135</td>
                                    <td class="row-source"><pre>        emit CapitalAllocationFactorUpdatedJunior(factor);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1136</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1137</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1138</td>
                                    <td class="row-source"><pre>    function setSeniorAPR(uint256 apr) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1139</td>
                                    <td class="row-source"><pre>        if (apr == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1140</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroAPRError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1141</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1142</td>
                                    <td class="row-source"><pre>        s_senior_apr = apr;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1143</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1144</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1145</td>
                                    <td class="row-source"><pre>    function setTargetJuniorAPR(uint256 apr) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1146</td>
                                    <td class="row-source"><pre>        if (apr == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1147</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroAPRError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1148</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1149</td>
                                    <td class="row-source"><pre>        s_target_junior_apr = apr;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1150</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1151</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1152</td>
                                    <td class="row-source"><pre>    function setPoolState(PoolState newState) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1153</td>
                                    <td class="row-source"><pre>        if (uint256(newState) &lt; uint256(poolState)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1154</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidStateTransition(newState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1155</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1156</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1157</td>
                                    <td class="row-source"><pre>        if (newState == PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1158</td>
                                    <td class="row-source"><pre>            if (getTotalDeployedValue() &gt; 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1159</td>
                                    <td class="row-source"><pre>                revert TranchePool__DeployedCapitalExists();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1160</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1161</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1162</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1163</td>
                                    <td class="row-source"><pre>        poolState = newState;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1164</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1165</td>
                                    <td class="row-source"><pre>        emit PoolStateUpdated(newState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1166</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1167</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1168</td>
                                    <td class="row-source"><pre>    function setLoanEngine(address _loanEngine) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1169</td>
                                    <td class="row-source"><pre>        if (_loanEngine == address(0)) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1170</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroAddressError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1171</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1172</td>
                                    <td class="row-source"><pre>        loanEngine = _loanEngine;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1173</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1174</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1175</td>
                                    <td class="row-source"><pre>    function setMaxAllocationCapSeniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1176</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1177</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1178</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1179</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1180</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1181</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountSeniorTranche) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1182</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMaxCapAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1183</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1184</td>
                                    <td class="row-source"><pre>        s_seniorTrancheMaxCap = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1185</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1186</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1187</td>
                                    <td class="row-source"><pre>    function setMaxAllocationCapJuniorTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1188</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1189</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1190</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1191</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1192</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1193</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountJuniorTranche) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1194</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMaxCapAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1195</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1196</td>
                                    <td class="row-source"><pre>        s_juniorTrancheMaxCap = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1197</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1198</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1199</td>
                                    <td class="row-source"><pre>    function setMaxAllocationCapEquityTranche(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1200</td>
                                    <td class="row-source"><pre>        uint256 amount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1201</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1202</td>
                                    <td class="row-source"><pre>        if (amount == 0) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1203</td>
                                    <td class="row-source"><pre>            revert TranchePool__ZeroValueError();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1204</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1205</td>
                                    <td class="row-source"><pre>        if (amount &lt; s_minimumDepositAmountEquityTranche) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1206</td>
                                    <td class="row-source"><pre>            revert TranchePool__InvalidMaxCapAmount();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1207</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1208</td>
                                    <td class="row-source"><pre>        s_equityTrancheMaxCap = amount;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1209</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1210</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1211</td>
                                    <td class="row-source"><pre>    function updateWhitelist(address user, bool status) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1212</td>
                                    <td class="row-source"><pre>        whiteListedLps[user] = status;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1213</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1214</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1215</td>
                                    <td class="row-source"><pre>    function updateEquityTrancheWhiteList(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1216</td>
                                    <td class="row-source"><pre>        address user,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1217</td>
                                    <td class="row-source"><pre>        bool status</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1218</td>
                                    <td class="row-source"><pre>    ) external onlyOwner {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1219</td>
                                    <td class="row-source"><pre>        whiteListedForEquityTranche[user] = status;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1220</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1221</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1222</td>
                                    <td class="row-source"><pre>    function _minimum(uint256 a, uint256 b) internal pure returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1223</td>
                                    <td class="row-source"><pre>        if (a &gt; b) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1224</td>
                                    <td class="row-source"><pre>            return b;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1225</td>
                                    <td class="row-source"><pre>        } else {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1226</td>
                                    <td class="row-source"><pre>            return a;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1227</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1228</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1229</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1230</td>
                                    <td class="row-source"><pre>    // getters</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1231</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1232</td>
                                    <td class="row-source"><pre>    function getTotalUnclaimedInterest() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1233</td>
                                    <td class="row-source"><pre>        return s_totalUnclaimedInterest;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1234</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1235</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1236</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheMaxDepositCap() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1237</td>
                                    <td class="row-source"><pre>        return s_seniorTrancheMaxCap;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1238</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1239</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1240</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheMinimumDepositAmount()</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1241</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1242</td>
                                    <td class="row-source"><pre>        view</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1243</td>
                                    <td class="row-source"><pre>        returns (uint256)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1244</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1245</td>
                                    <td class="row-source"><pre>        return s_minimumDepositAmountSeniorTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1246</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1247</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1248</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheShares(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1249</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1250</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1251</td>
                                    <td class="row-source"><pre>        return s_seniorTrancheShares[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1252</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1253</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1254</td>
                                    <td class="row-source"><pre>    function getTotalSeniorShares() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1255</td>
                                    <td class="row-source"><pre>        return s_totalSeniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1256</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1257</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1258</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheIdleValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1259</td>
                                    <td class="row-source"><pre>        return s_seniorTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1260</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1261</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1262</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheDeployedValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1263</td>
                                    <td class="row-source"><pre>        return s_seniorTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1264</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1265</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1266</td>
                                    <td class="row-source"><pre>    function getSeniorInterestIndex() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1267</td>
                                    <td class="row-source"><pre>        return seniorInterestIndex;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1268</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1269</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1270</td>
                                    <td class="row-source"><pre>    function getSeniorUserIndex(address user) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1271</td>
                                    <td class="row-source"><pre>        return seniorUserIndex[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1272</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1273</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1274</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheMaxDepositCap() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1275</td>
                                    <td class="row-source"><pre>        return s_juniorTrancheMaxCap;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1276</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1277</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1278</td>
                                    <td class="row-source"><pre>    function getJuniorInterestIndex() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1279</td>
                                    <td class="row-source"><pre>        return juniorInterestIndex;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1280</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1281</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1282</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheMinimumDepositAmount()</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1283</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1284</td>
                                    <td class="row-source"><pre>        view</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1285</td>
                                    <td class="row-source"><pre>        returns (uint256)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1286</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1287</td>
                                    <td class="row-source"><pre>        return s_minimumDepositAmountJuniorTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1288</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1289</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1290</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheShares(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1291</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1292</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1293</td>
                                    <td class="row-source"><pre>        return s_juniorTrancheShares[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1294</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1295</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1296</td>
                                    <td class="row-source"><pre>    function getTotalJuniorShares() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1297</td>
                                    <td class="row-source"><pre>        return s_totalJuniorShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1298</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1299</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1300</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheIdleValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1301</td>
                                    <td class="row-source"><pre>        return s_juniorTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1302</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1303</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1304</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheDeployedValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1305</td>
                                    <td class="row-source"><pre>        return s_juniorTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1306</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1307</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1308</td>
                                    <td class="row-source"><pre>    function getJuniorUserIndex(address user) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1309</td>
                                    <td class="row-source"><pre>        return juniorUserIndex[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1310</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1311</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1312</td>
                                    <td class="row-source"><pre>    function getEquityTrancheMaxDepositCap() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1313</td>
                                    <td class="row-source"><pre>        return s_equityTrancheMaxCap;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1314</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1315</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1316</td>
                                    <td class="row-source"><pre>    function getEquityTrancheShares(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1317</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1318</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1319</td>
                                    <td class="row-source"><pre>        return s_equityTrancheShares[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1320</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1321</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1322</td>
                                    <td class="row-source"><pre>    function getTotalEquityShares() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1323</td>
                                    <td class="row-source"><pre>        return s_totalEquityShares;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1324</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1325</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1326</td>
                                    <td class="row-source"><pre>    function getEquityTrancheMinimumDepositAmount()</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1327</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1328</td>
                                    <td class="row-source"><pre>        view</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1329</td>
                                    <td class="row-source"><pre>        returns (uint256)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1330</td>
                                    <td class="row-source"><pre>    {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1331</td>
                                    <td class="row-source"><pre>        return s_minimumDepositAmountEquityTranche;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1332</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1333</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1334</td>
                                    <td class="row-source"><pre>    function getEquityTrancheIdleValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1335</td>
                                    <td class="row-source"><pre>        return s_equityTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1336</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1337</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1338</td>
                                    <td class="row-source"><pre>    function getEquityTrancheDeployedValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1339</td>
                                    <td class="row-source"><pre>        return s_equityTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1340</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1341</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1342</td>
                                    <td class="row-source"><pre>    function getEquityInterestIndex() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1343</td>
                                    <td class="row-source"><pre>        return equityInterestIndex;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1344</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1345</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1346</td>
                                    <td class="row-source"><pre>    function getEquityUserIndex(address user) external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1347</td>
                                    <td class="row-source"><pre>        return equityUserIndex[user];</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1348</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1349</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1350</td>
                                    <td class="row-source"><pre>    function getPoolState() external view returns (PoolState) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1351</td>
                                    <td class="row-source"><pre>        return poolState;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1352</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1353</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1354</td>
                                    <td class="row-source"><pre>    function getTotalDeployedValue() public view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1355</td>
                                    <td class="row-source"><pre>        return</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1356</td>
                                    <td class="row-source"><pre>            s_seniorTrancheDeployedValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1357</td>
                                    <td class="row-source"><pre>            s_juniorTrancheDeployedValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1358</td>
                                    <td class="row-source"><pre>            s_equityTrancheDeployedValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1359</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1360</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1361</td>
                                    <td class="row-source"><pre>    function getTotalIdleValue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1362</td>
                                    <td class="row-source"><pre>        return</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1363</td>
                                    <td class="row-source"><pre>            s_seniorTrancheIdleValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1364</td>
                                    <td class="row-source"><pre>            s_juniorTrancheIdleValue +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1365</td>
                                    <td class="row-source"><pre>            s_equityTrancheIdleValue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1366</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1367</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1368</td>
                                    <td class="row-source"><pre>    function getSeniorAllocationRatio() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">1369</td>
                                    <td class="row-source"><pre>        return s_capital_allocation_factor_senior;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1370</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1371</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1372</td>
                                    <td class="row-source"><pre>    function getJuniorAllocationRatio() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1373</td>
                                    <td class="row-source"><pre>        return s_capital_allocation_factor_junior;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1374</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1375</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1376</td>
                                    <td class="row-source"><pre>    function getTotalDeposited() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1377</td>
                                    <td class="row-source"><pre>        return s_totalDeposited;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1378</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1379</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1380</td>
                                    <td class="row-source"><pre>    function getTotalLoss() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1381</td>
                                    <td class="row-source"><pre>        return s_totalLoss;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1382</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1383</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1384</td>
                                    <td class="row-source"><pre>    function getTotalRecovered() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1385</td>
                                    <td class="row-source"><pre>        return s_totalRecovered;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1386</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1387</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1388</td>
                                    <td class="row-source"><pre>    function getProtocolRevenue() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1389</td>
                                    <td class="row-source"><pre>        return s_protocolRevenue;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1390</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1391</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1392</td>
                                    <td class="row-source"><pre>    function getSeniorPrincipalShortfall() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1393</td>
                                    <td class="row-source"><pre>        return seniorPrincipalShortfall;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1394</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1395</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1396</td>
                                    <td class="row-source"><pre>    function getJuniorPrincipalShortfall() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">1397</td>
                                    <td class="row-source"><pre>        return juniorPrincipalShortfall;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1398</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1399</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1400</td>
                                    <td class="row-source"><pre>    function getEquityPrincipalShortfall() external view returns (uint256) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1401</td>
                                    <td class="row-source"><pre>        return equityPrincipalShortfall;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1402</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1403</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">1404</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_interfaces_ICreditPolicy_sol" data-file-path="src/interfaces/ICreditPolicy.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">src/interfaces/ICreditPolicy.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre>import {CreditPolicy} from &quot;../CreditPolicy.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>interface ICreditPolicy {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>    function createPolicy(uint256 version) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>    function freezePolicy(uint256 version) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>    function deActivatePolicy(uint256 version) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>    function updateEligibility(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>        CreditPolicy.EligibilityCriteria calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    function updateRatios(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>        CreditPolicy.FinancialRatios calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    function updateConcentration(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>        CreditPolicy.ConcentrationLimits calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    function updateAttestation(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>        CreditPolicy.AttestationRequirements calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    function updateCovenants(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>        CreditPolicy.MaintenanceCovenants calldata data</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    function setLoanTier(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>        uint8 tierId,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>        CreditPolicy.LoanTier calldata tier</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    function excludeIndustry(uint256 version, bytes32 industry) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    function includeIndustry(uint256 version, bytes32 industry) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    function setPolicyDocument(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>        bytes32 hash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>        string calldata uri</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    function tierExistsInPolicy(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>        uint8 tierId</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>    ) external view returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>    function changePolicyAdmin(address newAdmin) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>    function isPolicyActive(uint256 version) external view returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>    function isPolicyFrozen(uint256 version) external view returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    function isIndustryExcluded(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>        uint256 version,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>        bytes32 industry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>    ) external view returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_interfaces_ITranchePool_sol" data-file-path="src/interfaces/ITranchePool.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">src/interfaces/ITranchePool.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre>import {TranchePool} from &quot;../TranchePool.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>interface ITranchePool {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>    // logic functions</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>    function withdrawEquityTrancheByAmount(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>    function withdrawJuniorTrancheByAmount(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre>    function withdrawSeniorTrancheByAmount(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>    function withdrawEquityTranche(uint256 shares) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    function withdrawJuniorTranche(uint256 shares) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>    function withdrawSeniorTranche(uint256 shares) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    function onInterestAccrued(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>        uint256 interestAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>        uint256 seniorInterest,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>        uint256 juniorInterest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>    function onRepayment(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>        uint256 principalRepaid,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>        uint256 interestRepaid</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    ) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>    function onRecovery(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    function allocateCapital(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>        uint256 totalDisbursement,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>        uint256 fees,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>        address deployer,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>        address feeManager</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>    )</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>        external</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>        returns (</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>            uint256 seniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>            uint256 juniorAmount,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>            uint256 equityAmount</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>    function depositEquityTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    function depositJuniorTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    function depositSeniorTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>    // updaters</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    function updateEquityTrancheWhiteList(address user, bool status) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    function updateWhitelist(address user, bool status) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>    // setters</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    function onLoss(uint256 principalLoss, uint256 interestAccrued) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>    function setLoanEngine(address _loanEngine) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    function setTargetJuniorAPR(uint256 apr) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>    function setSeniorAPR(uint256 apr) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>    function setTrancheCapitalAllocationFactorJunior(uint256 factor) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    function setTrancheCapitalAllocationFactorSenior(uint256 factor) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountEquityTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountSeniorTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    function setMinimumDepositAmountJuniorTranche(uint256 amount) external;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>    // getters</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>    function getEquityTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>    function getJuniorTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    function getSeniorTrancheBalance(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        address user</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    ) external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>    function getPoolState() external view returns (TranchePool.PoolState);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>    function getSeniorAllocationRatio() external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>    function getJuniorAllocationRatio() external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>    function getTotalIdleValue() external view returns (uint256);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="src_interfaces_IVerifier_sol" data-file-path="src/interfaces/IVerifier.sol" data-lines-active="0" data-lines-covered="0">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(0, 90%, 50%, 0.15); color: hsl(0, 90%, 50%)">
                                0.0%
                            </span>
                            <span class="file-name">src/interfaces/IVerifier.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>0 / 0</strong> (0.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>interface IVerifier {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>    function verify(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>        bytes calldata _proof,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>        bytes32[] calldata _publicInputs</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>    ) external returns (bool);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="test_fuzz_echidna_EchidnaHandler_sol" data-file-path="test/fuzz/echidna/EchidnaHandler.sol" data-lines-active="207" data-lines-covered="190">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(109, 90%, 45%, 0.15); color: hsl(109, 90%, 45%)">
                                91.0%
                            </span>
                            <span class="file-name">test/fuzz/echidna/EchidnaHandler.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>190 / 207</strong> (91.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.27;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>import {LoanEngine} from &quot;../../../src/LoanEngine.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>import {TranchePool} from &quot;../../../src/TranchePool.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {CreditPolicy} from &quot;../../../src/CreditPolicy.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {ERC20Mock} from &quot;@openzeppelin/contracts/mocks/token/ERC20Mock.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>import {MockLoanProofVerifier} from &quot;../../mocks/MockLoanProofVerifier.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * @title EchidnaHandler</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * @notice Echidna-compatible handler with proper bounds for permissioned DeFi</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> * @dev No Foundry cheatcodes - this contract is its own deployer/owner</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre> * </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre> * Key bounds (matching Handler.t.sol):</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre> * - minimumLoanPrincipal: 1,000,000 USDT (1M)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre> * - maximumLoanPrincipal: 20,000,000 USDT (20M)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre> * - minimumOriginationFeeBps: 50 (0.5%)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre> * - minimumTermDays: 180</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre> * - maximumTermDays: 480</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre> * - Deposits: use contract&#39;s min/max values</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>contract EchidnaHandler {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    // STATE</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>    LoanEngine public loanEngine;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    TranchePool public tranchePool;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    ERC20Mock public usdt;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>    CreditPolicy public creditPolicy;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>    MockLoanProofVerifier public verifier;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    // Constants (matching Handler.t.sol)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    uint256 public constant USDT = 1e18;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>    uint256 public constant MINIMUM_LOAN_PRINCIPAL = 10_00_000 * USDT;  // 1M USDT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>    uint256 public constant MAXIMUM_LOAN_PRINCIPAL = 2_00_00_000 * USDT; // 20M USDT</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>    uint256 public constant MINIMUM_ORIGINATION_FEE_BPS = 50;  // 0.5%</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    uint256 public constant MINIMUM_TERM_DAYS = 180;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>    uint256 public constant MAXIMUM_TERM_DAYS = 480;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>    uint256 public constant MAX_ORIGINATION_FEE_BPS = 500;  // 5%</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    // Initial funding to ensure minimums can be met</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    uint256 public constant INITIAL_SENIOR_DEPOSIT = 80_00_00_000 * USDT;  // 800M USDT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    uint256 public constant INITIAL_JUNIOR_DEPOSIT = 50_00_00_000 * USDT;  // 500M USDT</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>    uint256 public constant INITIAL_EQUITY_DEPOSIT = 100_00_00_000 * USDT; // 1B USDT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    // Ghost variables for invariants</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    uint256 public outstandingPrincipal;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>    // CONSTRUCTOR</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    constructor() {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>        // Deploy mock token</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>        usdt = new ERC20Mock();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>        // Deploy TranchePool</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>        tranchePool = new TranchePool(address(usdt));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>        // Deploy MockLoanProofVerifier</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>        verifier = new MockLoanProofVerifier();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>        // Deploy CreditPolicy and set it up</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>        creditPolicy = new CreditPolicy();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>        _setupCreditPolicy();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>        // Deploy LoanEngine with correct constructor signature</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>        // constructor(creditPolicy, verifier, maxOriginationFee, tranchePool, stablecoin)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>        loanEngine = new LoanEngine(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>            address(creditPolicy),</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>            address(verifier),</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>            MAX_ORIGINATION_FEE_BPS,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>            address(tranchePool),</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>            address(usdt)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>        // Setup: This contract IS the owner, no vm.prank needed</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>        tranchePool.setLoanEngine(address(loanEngine));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>        // Whitelist this contract for all operations</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>        loanEngine.setWhitelistedFeeManager(address(this), true);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>        loanEngine.setWhitelistedOffRampingEntity(address(this), true);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>        loanEngine.setWhitelistedRepaymentAgent(address(this), true);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>        loanEngine.setWhitelistedRecoveryAgent(address(this), true);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>        tranchePool.updateWhitelist(address(this), true);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>        tranchePool.updateEquityTrancheWhiteList(address(this), true);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>        // Configure tranche caps (required before deposits)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>        tranchePool.setMaxAllocationCapSeniorTranche(INITIAL_SENIOR_DEPOSIT);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>        tranchePool.setMaxAllocationCapJuniorTranche(INITIAL_JUNIOR_DEPOSIT);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>        tranchePool.setMaxAllocationCapEquityTranche(INITIAL_EQUITY_DEPOSIT);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>        // Mint USDT for operations (large amount for institutional scale)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        usdt.mint(address(this), 500_00_00_000 * USDT);  // 5B USDT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>        // Initial deposits to ensure pool has liquidity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>        _initialDeposits();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    function _setupCreditPolicy() internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>        // Create policy version 1</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>        creditPolicy.createPolicy(1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>        // Set max tiers first</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>        creditPolicy.setMaxTiers(10);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>        // Update eligibility</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>        creditPolicy.updateEligibility(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>            CreditPolicy.EligibilityCriteria({</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>                minAnnualRevenue: 1_00_00_000,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>                minEBITDA: 10_00_000,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>                minTangibleNetWorth: 5_00_00_000,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>                minBusinessAgeDays: 180,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>                maxDefaultsLast36Months: 0,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>                bankruptcyExcluded: true</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>        // Update financial ratios</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>        creditPolicy.updateRatios(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>            CreditPolicy.FinancialRatios({</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>                maxTotalDebtToEBITDA: 4e18,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>                minInterestCoverageRatio: 2e18,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>                minCurrentRatio: 1e18,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>                minEBITDAMarginBps: 1500</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>        // Update concentration limits</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>        creditPolicy.updateConcentration(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>            CreditPolicy.ConcentrationLimits({</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>                maxSingleBorrowerBps: 1000,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>                maxIndustryConcentrationBps: 3000</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>        // Update attestation requirements</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>        creditPolicy.updateAttestation(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>            CreditPolicy.AttestationRequirements({</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>                maxAttestationAgeDays: 90,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>                reAttestationFrequencyDays: 180,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>                requiresCPAAttestation: true</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>        // Update maintenance covenants</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>        creditPolicy.updateCovenants(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>            CreditPolicy.MaintenanceCovenants({</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>                maxLeverageRatio: 4e18,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>                minCoverageRatio: 2e18,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>                minLiquidityAmount: 1_00_00_000,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>                allowsDividends: false,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>                reportingFrequencyDays: 90</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>        // Set loan tier</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>        creditPolicy.setLoanTier(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>            1,  // tierId</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>            CreditPolicy.LoanTier({</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>                name: &quot;Tier 1&quot;,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>                minRevenue: 1_00_00_000,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>                maxRevenue: 5_00_00_000,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>                minEBITDA: 10_00_000,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>                maxDebtToEBITDA: 3e18,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>                maxLoanToEBITDA: 2e18,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>                interestRateBps: 800,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>                originationFeeBps: 100,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>                termDays: 365,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre>                active: true</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>            })</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>        // Set policy document</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>        creditPolicy.setPolicyDocument(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>            1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>            keccak256(&quot;document&quot;),</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>            &quot;ipfs://policyDocHash&quot;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre>        // Freeze policy</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>        creditPolicy.freezePolicy(1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>    function _initialDeposits() internal {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>        // Senior tranche deposit</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>        uint256 seniorMin = tranchePool.getSeniorTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>        uint256 seniorMax = tranchePool.getSeniorTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>        uint256 seniorDeposit = _min(INITIAL_SENIOR_DEPOSIT, seniorMax);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>        seniorDeposit = _max(seniorDeposit, seniorMin);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), seniorDeposit);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>        tranchePool.depositSeniorTranche(seniorDeposit);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>        // Junior tranche deposit</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>        uint256 juniorMin = tranchePool.getJuniorTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>        uint256 juniorMax = tranchePool.getJuniorTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre>        uint256 juniorDeposit = _min(INITIAL_JUNIOR_DEPOSIT, juniorMax);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>        juniorDeposit = _max(juniorDeposit, juniorMin);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), juniorDeposit);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>        tranchePool.depositJuniorTranche(juniorDeposit);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>        // Equity tranche deposit</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>        uint256 equityMin = tranchePool.getEquityTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>        uint256 equityMax = tranchePool.getEquityTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>        uint256 equityDeposit = _min(INITIAL_EQUITY_DEPOSIT, equityMax);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>        equityDeposit = _max(equityDeposit, equityMin);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), equityDeposit);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>        tranchePool.depositEquityTranche(equityDeposit);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>    // BOUND HELPER (Echidna-compatible)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>    function _bound(uint256 x, uint256 min, uint256 max) internal pure returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>        if (min &gt; max) return min;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>        if (x &lt; min) return min;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>        if (x &gt; max) return max;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>        return min + (x % (max - min + 1));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>    function _min(uint256 a, uint256 b) internal pure returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>        return a &lt; b ? a : b;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>    function _max(uint256 a, uint256 b) internal pure returns (uint256) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre>        return a &gt; b ? a : b;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>    // DEPOSIT FUNCTIONS (with proper bounds)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>    function depositSeniorTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.OPEN) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>        uint256 minDeposit = tranchePool.getSeniorTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>        uint256 maxDeposit = tranchePool.getSeniorTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre>        uint256 currentValue = tranchePool.getSeniorTrancheIdleValue() + </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>                               tranchePool.getSeniorTrancheDeployedValue();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>        if (currentValue &gt;= maxDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>        uint256 remaining = maxDeposit - currentValue;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        amount = _bound(amount, minDeposit, _min(remaining, maxDeposit));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>        if (amount &lt; minDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), amount);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>        try tranchePool.depositSeniorTranche(amount) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>    function depositJuniorTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.OPEN) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>        uint256 minDeposit = tranchePool.getJuniorTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>        uint256 maxDeposit = tranchePool.getJuniorTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>        uint256 currentValue = tranchePool.getJuniorTrancheIdleValue() + </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>                               tranchePool.getJuniorTrancheDeployedValue();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>        if (currentValue &gt;= maxDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>        uint256 remaining = maxDeposit - currentValue;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>        amount = _bound(amount, minDeposit, _min(remaining, maxDeposit));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>        if (amount &lt; minDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), amount);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>        try tranchePool.depositJuniorTranche(amount) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>    function depositEquityTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.OPEN) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre>        uint256 minDeposit = tranchePool.getEquityTrancheMinimumDepositAmount();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>        uint256 maxDeposit = tranchePool.getEquityTrancheMaxDepositCap();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre>        uint256 currentValue = tranchePool.getEquityTrancheIdleValue() + </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>                               tranchePool.getEquityTrancheDeployedValue();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre>        if (currentValue &gt;= maxDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">292</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">293</td>
                                    <td class="row-source"><pre>        uint256 remaining = maxDeposit - currentValue;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">294</td>
                                    <td class="row-source"><pre>        amount = _bound(amount, minDeposit, _min(remaining, maxDeposit));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">295</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">296</td>
                                    <td class="row-source"><pre>        if (amount &lt; minDeposit) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">297</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">298</td>
                                    <td class="row-source"><pre>        usdt.approve(address(tranchePool), amount);</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">299</td>
                                    <td class="row-source"><pre>        try tranchePool.depositEquityTranche(amount) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">300</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">301</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">302</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">303</td>
                                    <td class="row-source"><pre>    // POOL STATE TRANSITIONS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">304</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">305</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">306</td>
                                    <td class="row-source"><pre>    function commitPool() public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">307</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.OPEN) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">308</td>
                                    <td class="row-source"><pre>        if (tranchePool.getTotalIdleValue() == 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">309</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">310</td>
                                    <td class="row-source"><pre>        try tranchePool.setPoolState(TranchePool.PoolState.COMMITED) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">311</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">312</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">313</td>
                                    <td class="row-source"><pre>    function closePool() public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">314</td>
                                    <td class="row-source"><pre>        if (tranchePool.getTotalDeployedValue() &gt; 0) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">315</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.DEPLOYED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">316</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">317</td>
                                    <td class="row-source"><pre>        try tranchePool.setPoolState(TranchePool.PoolState.CLOSED) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">318</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">319</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">320</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">321</td>
                                    <td class="row-source"><pre>    // LOAN LIFECYCLE (with proper bounds)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">322</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">323</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">324</td>
                                    <td class="row-source"><pre>    function createLoan(uint256 principalIssued, uint256 originationFeeBps, uint256 termDays) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">325</td>
                                    <td class="row-source"><pre>        TranchePool.PoolState state = tranchePool.getPoolState();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">326</td>
                                    <td class="row-source"><pre>        if (state != TranchePool.PoolState.COMMITED &amp;&amp; state != TranchePool.PoolState.DEPLOYED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">327</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">328</td>
                                    <td class="row-source"><pre>        uint256 idleValue = tranchePool.getTotalIdleValue();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">329</td>
                                    <td class="row-source"><pre>        if (idleValue &lt; MINIMUM_LOAN_PRINCIPAL) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">330</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">331</td>
                                    <td class="row-source"><pre>        // Bound principal: 1M - min(20M, idle/10)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">332</td>
                                    <td class="row-source"><pre>        // Reserve 90% of pool - only deploy up to 10% per loan</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">333</td>
                                    <td class="row-source"><pre>        uint256 maxForThisLoan = _min(MAXIMUM_LOAN_PRINCIPAL, idleValue / 10);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">334</td>
                                    <td class="row-source"><pre>        if (maxForThisLoan &lt; MINIMUM_LOAN_PRINCIPAL) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">335</td>
                                    <td class="row-source"><pre>            maxForThisLoan = _min(MINIMUM_LOAN_PRINCIPAL, idleValue);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">336</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">337</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">338</td>
                                    <td class="row-source"><pre>        principalIssued = _bound(principalIssued, MINIMUM_LOAN_PRINCIPAL, maxForThisLoan);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">339</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">340</td>
                                    <td class="row-source"><pre>        if (principalIssued &gt; idleValue) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">341</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">342</td>
                                    <td class="row-source"><pre>        // Bound origination fee</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">343</td>
                                    <td class="row-source"><pre>        originationFeeBps = _bound(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">344</td>
                                    <td class="row-source"><pre>            originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">345</td>
                                    <td class="row-source"><pre>            MINIMUM_ORIGINATION_FEE_BPS,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">346</td>
                                    <td class="row-source"><pre>            MAX_ORIGINATION_FEE_BPS</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">347</td>
                                    <td class="row-source"><pre>        );</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">348</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">349</td>
                                    <td class="row-source"><pre>        // Bound term days</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">350</td>
                                    <td class="row-source"><pre>        termDays = _bound(termDays, MINIMUM_TERM_DAYS, MAXIMUM_TERM_DAYS);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">351</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">352</td>
                                    <td class="row-source"><pre>        // Check policy is frozen</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">353</td>
                                    <td class="row-source"><pre>        if (!creditPolicy.isPolicyFrozen(1)) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">354</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">355</td>
                                    <td class="row-source"><pre>        bytes32 borrowerCommitment = keccak256(abi.encodePacked(block.timestamp, principalIssued));</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">356</td>
                                    <td class="row-source"><pre>        bytes32 nullifierHash = keccak256(abi.encodePacked(borrowerCommitment, termDays));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">357</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">358</td>
                                    <td class="row-source"><pre>        try loanEngine.createLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">359</td>
                                    <td class="row-source"><pre>            borrowerCommitment,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">360</td>
                                    <td class="row-source"><pre>            nullifierHash,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">361</td>
                                    <td class="row-source"><pre>            1,  // policyVersion</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">362</td>
                                    <td class="row-source"><pre>            1,  // tierId</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">363</td>
                                    <td class="row-source"><pre>            principalIssued,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">364</td>
                                    <td class="row-source"><pre>            800,  // aprBps (8%)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">365</td>
                                    <td class="row-source"><pre>            originationFeeBps,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">366</td>
                                    <td class="row-source"><pre>            termDays,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">367</td>
                                    <td class="row-source"><pre>            bytes32(0),  // industry</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">368</td>
                                    <td class="row-source"><pre>            &quot;&quot;,  // proofData</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">369</td>
                                    <td class="row-source"><pre>            new bytes32[](0)  // publicInputs</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">370</td>
                                    <td class="row-source"><pre>        ) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">371</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">372</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">373</td>
                                    <td class="row-source"><pre>    function activateLoan(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">374</td>
                                    <td class="row-source"><pre>        if (loanEngine.getNextLoanId() &lt;= 1) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">375</td>
                                    <td class="row-source"><pre>        loanId = _bound(loanId, 1, loanEngine.getNextLoanId() - 1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">376</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">377</td>
                                    <td class="row-source"><pre>        LoanEngine.Loan memory loan = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">378</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanEngine.LoanState.CREATED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">379</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">380</td>
                                    <td class="row-source"><pre>        TranchePool.PoolState poolState = tranchePool.getPoolState();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">381</td>
                                    <td class="row-source"><pre>        if (poolState != TranchePool.PoolState.COMMITED &amp;&amp; poolState != TranchePool.PoolState.DEPLOYED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">382</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">383</td>
                                    <td class="row-source"><pre>        if (loan.principalIssued &gt; tranchePool.getTotalIdleValue()) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">384</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">385</td>
                                    <td class="row-source"><pre>        try loanEngine.activateLoan(loanId, address(this), address(this)) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">386</td>
                                    <td class="row-source"><pre>            outstandingPrincipal += loan.principalIssued;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">387</td>
                                    <td class="row-source"><pre>        } catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">388</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">389</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">390</td>
                                    <td class="row-source"><pre>    function repayLoan(uint256 loanId, uint256 principalAmount, uint256 interestAmount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">391</td>
                                    <td class="row-source"><pre>        if (loanEngine.getNextLoanId() &lt;= 1) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">392</td>
                                    <td class="row-source"><pre>        loanId = _bound(loanId, 1, loanEngine.getNextLoanId() - 1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">393</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">394</td>
                                    <td class="row-source"><pre>        LoanEngine.Loan memory loanBefore = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">395</td>
                                    <td class="row-source"><pre>        if (loanBefore.state != LoanEngine.LoanState.ACTIVE) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">396</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">397</td>
                                    <td class="row-source"><pre>        // Bound to realistic amounts</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">398</td>
                                    <td class="row-source"><pre>        principalAmount = _bound(principalAmount, 0, loanBefore.principalOutstanding);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">399</td>
                                    <td class="row-source"><pre>        interestAmount = _bound(interestAmount, 0, loanBefore.interestAccrued);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">400</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">401</td>
                                    <td class="row-source"><pre>        uint256 total = principalAmount + interestAmount;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">402</td>
                                    <td class="row-source"><pre>        if (total == 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">403</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">404</td>
                                    <td class="row-source"><pre>        // Interest before principal rule</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">405</td>
                                    <td class="row-source"><pre>        if (principalAmount &gt; 0 &amp;&amp; interestAmount == 0 &amp;&amp; loanBefore.interestAccrued &gt; 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">406</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">407</td>
                                    <td class="row-source"><pre>        usdt.approve(address(loanEngine), total);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">408</td>
                                    <td class="row-source"><pre>        try loanEngine.repayLoan(loanId, principalAmount, interestAmount, address(this)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">409</td>
                                    <td class="row-source"><pre>            // Track ACTUAL principal change (LoanEngine may swap interest/principal)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">410</td>
                                    <td class="row-source"><pre>            LoanEngine.Loan memory loanAfter = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">411</td>
                                    <td class="row-source"><pre>            uint256 actualPrincipalRepaid = loanBefore.principalOutstanding - loanAfter.principalOutstanding;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">412</td>
                                    <td class="row-source"><pre>            if (actualPrincipalRepaid &gt; 0) outstandingPrincipal -= actualPrincipalRepaid;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">413</td>
                                    <td class="row-source"><pre>        } catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">414</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">415</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">416</td>
                                    <td class="row-source"><pre>    function declareDefault(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">417</td>
                                    <td class="row-source"><pre>        if (loanEngine.getNextLoanId() &lt;= 1) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">418</td>
                                    <td class="row-source"><pre>        loanId = _bound(loanId, 1, loanEngine.getNextLoanId() - 1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">419</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">420</td>
                                    <td class="row-source"><pre>        LoanEngine.Loan memory loan = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">421</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanEngine.LoanState.ACTIVE) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">422</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">423</td>
                                    <td class="row-source"><pre>        try loanEngine.declareDefault(loanId, bytes32(0)) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">424</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">425</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">426</td>
                                    <td class="row-source"><pre>    function writeOffLoan(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">427</td>
                                    <td class="row-source"><pre>        if (loanEngine.getNextLoanId() &lt;= 1) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">428</td>
                                    <td class="row-source"><pre>        loanId = _bound(loanId, 1, loanEngine.getNextLoanId() - 1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">429</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">430</td>
                                    <td class="row-source"><pre>        LoanEngine.Loan memory loan = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">431</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanEngine.LoanState.DEFAULTED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">432</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">433</td>
                                    <td class="row-source"><pre>        uint256 principal = loan.principalOutstanding;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">434</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">435</td>
                                    <td class="row-source"><pre>        try loanEngine.writeOffLoan(loanId) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">436</td>
                                    <td class="row-source"><pre>            outstandingPrincipal -= principal;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">437</td>
                                    <td class="row-source"><pre>        } catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">438</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">439</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">440</td>
                                    <td class="row-source"><pre>    function recoverLoan(uint256 loanId, uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">441</td>
                                    <td class="row-source"><pre>        if (loanEngine.getNextLoanId() &lt;= 1) return;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">442</td>
                                    <td class="row-source"><pre>        loanId = _bound(loanId, 1, loanEngine.getNextLoanId() - 1);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">443</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">444</td>
                                    <td class="row-source"><pre>        LoanEngine.Loan memory loan = loanEngine.getLoanDetails(loanId);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">445</td>
                                    <td class="row-source"><pre>        if (loan.state != LoanEngine.LoanState.WRITTEN_OFF) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">446</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">447</td>
                                    <td class="row-source"><pre>        // Recovery bounded to principal issued (realistic - no over-recovery)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">448</td>
                                    <td class="row-source"><pre>        uint256 maxRecovery = loan.principalIssued - loan.totalRecovered;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">449</td>
                                    <td class="row-source"><pre>        if (maxRecovery == 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">450</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">451</td>
                                    <td class="row-source"><pre>        // Minimum recovery: 1% of principal or 10K USDT, whichever is larger</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">452</td>
                                    <td class="row-source"><pre>        uint256 minRecovery = _max(loan.principalIssued / 100, 10_000 * USDT);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">453</td>
                                    <td class="row-source"><pre>        amount = _bound(amount, minRecovery, maxRecovery);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">454</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">455</td>
                                    <td class="row-source"><pre>        if (amount &gt; maxRecovery) amount = maxRecovery;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">456</td>
                                    <td class="row-source"><pre>        if (amount == 0) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">457</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">458</td>
                                    <td class="row-source"><pre>        usdt.approve(address(loanEngine), amount);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">459</td>
                                    <td class="row-source"><pre>        try loanEngine.recoverLoan(loanId, amount, address(this)) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">460</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">461</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">462</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">463</td>
                                    <td class="row-source"><pre>    // DETERMINISTIC BUG TRIGGER (for testing over-recovery detection)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">464</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">465</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">466</td>
                                    <td class="row-source"><pre>    function triggerOverRecoveryBug() public {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">467</td>
                                    <td class="row-source"><pre>        // This function deliberately triggers over-recovery for invariant testing</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">468</td>
                                    <td class="row-source"><pre>        // In real usage, recoverLoan bounds prevent this</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">469</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">470</td>
                                    <td class="row-source"><pre>        // Step 1: Ensure pool is committed</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">471</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() == TranchePool.PoolState.OPEN) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">472</td>
                                    <td class="row-source"><pre>            tranchePool.setPoolState(TranchePool.PoolState.COMMITED);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">473</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">474</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">475</td>
                                    <td class="row-source"><pre>        if (tranchePool.getPoolState() != TranchePool.PoolState.COMMITED &amp;&amp;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">476</td>
                                    <td class="row-source"><pre>            tranchePool.getPoolState() != TranchePool.PoolState.DEPLOYED) return;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">477</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">478</td>
                                    <td class="row-source"><pre>        // Step 2: Create a loan</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">479</td>
                                    <td class="row-source"><pre>        uint256 loanPrincipal = 2_00_00_000 * USDT;  // 2M USDT</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">480</td>
                                    <td class="row-source"><pre>        bytes32 borrowerCommitment = keccak256(&quot;overrecovery_test&quot;);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">481</td>
                                    <td class="row-source"><pre>        bytes32 nullifierHash = keccak256(abi.encodePacked(borrowerCommitment, block.timestamp));</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">482</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">483</td>
                                    <td class="row-source"><pre>        try loanEngine.createLoan(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">484</td>
                                    <td class="row-source"><pre>            borrowerCommitment, nullifierHash, 1, 1,</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">485</td>
                                    <td class="row-source"><pre>            loanPrincipal, 800, 100, 365,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">486</td>
                                    <td class="row-source"><pre>            bytes32(0), &quot;&quot;, new bytes32[](0)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">487</td>
                                    <td class="row-source"><pre>        ) {} catch { return; }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">488</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">489</td>
                                    <td class="row-source"><pre>        uint256 loanId = loanEngine.getNextLoanId() - 1;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">490</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">491</td>
                                    <td class="row-source"><pre>        // Step 3: Activate</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">492</td>
                                    <td class="row-source"><pre>        try loanEngine.activateLoan(loanId, address(this), address(this)) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">493</td>
                                    <td class="row-source"><pre>            outstandingPrincipal += loanPrincipal;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">494</td>
                                    <td class="row-source"><pre>        } catch { return; }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">495</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">496</td>
                                    <td class="row-source"><pre>        // Step 4: Default</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">497</td>
                                    <td class="row-source"><pre>        try loanEngine.declareDefault(loanId, bytes32(0)) {} catch { return; }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">498</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">499</td>
                                    <td class="row-source"><pre>        // Step 5: Write off</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">500</td>
                                    <td class="row-source"><pre>        try loanEngine.writeOffLoan(loanId) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">501</td>
                                    <td class="row-source"><pre>            outstandingPrincipal -= loanPrincipal;</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">502</td>
                                    <td class="row-source"><pre>        } catch { return; }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">503</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">504</td>
                                    <td class="row-source"><pre>        // Step 6: OVER-RECOVER (deliberate bug trigger - 150% of principal)</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">505</td>
                                    <td class="row-source"><pre>        uint256 overRecoveryAmount = loanPrincipal + (loanPrincipal / 2);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">506</td>
                                    <td class="row-source"><pre>        usdt.approve(address(loanEngine), overRecoveryAmount);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">507</td>
                                    <td class="row-source"><pre>        try loanEngine.recoverLoan(loanId, overRecoveryAmount, address(this)) {} catch {}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">508</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">509</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">510</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="test_fuzz_echidna_EchidnaTest_sol" data-file-path="test/fuzz/echidna/EchidnaTest.sol" data-lines-active="85" data-lines-covered="81">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(114, 90%, 45%, 0.15); color: hsl(114, 90%, 45%)">
                                95.0%
                            </span>
                            <span class="file-name">test/fuzz/echidna/EchidnaTest.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>81 / 85</strong> (95.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.27;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>import {EchidnaHandler} from &quot;./EchidnaHandler.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>import {LoanEngine} from &quot;../../../src/LoanEngine.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>import {TranchePool} from &quot;../../../src/TranchePool.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>import {ERC20Mock} from &quot;@openzeppelin/contracts/mocks/token/ERC20Mock.sol&quot;;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>/**</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre> * @title EchidnaTest</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre> * @notice Main Echidna test contract with ALL invariants from Foundry tests</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre> * @dev Uses EchidnaHandler for state transitions and checks invariants after each action</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">13</td>
                                    <td class="row-source"><pre> */</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">14</td>
                                    <td class="row-source"><pre>contract EchidnaTest {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">15</td>
                                    <td class="row-source"><pre>    EchidnaHandler public handler;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">16</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">17</td>
                                    <td class="row-source"><pre>    constructor() {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">18</td>
                                    <td class="row-source"><pre>        handler = new EchidnaHandler();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">19</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">20</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">21</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">22</td>
                                    <td class="row-source"><pre>    // ECHIDNA ACTIONS (wrappers that check invariants after each action)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">23</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">24</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">25</td>
                                    <td class="row-source"><pre>    function depositSeniorTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">26</td>
                                    <td class="row-source"><pre>        handler.depositSeniorTranche(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">27</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">28</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">29</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">30</td>
                                    <td class="row-source"><pre>    function depositJuniorTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">31</td>
                                    <td class="row-source"><pre>        handler.depositJuniorTranche(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">32</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">33</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">34</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">35</td>
                                    <td class="row-source"><pre>    function depositEquityTranche(uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">36</td>
                                    <td class="row-source"><pre>        handler.depositEquityTranche(amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">37</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">38</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">39</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">40</td>
                                    <td class="row-source"><pre>    function commitPool() public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">41</td>
                                    <td class="row-source"><pre>        handler.commitPool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">42</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">43</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">44</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">45</td>
                                    <td class="row-source"><pre>    function createLoan(uint256 principalIssued, uint256 originationFeeBps, uint256 termDays) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">46</td>
                                    <td class="row-source"><pre>        handler.createLoan(principalIssued, originationFeeBps, termDays);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">47</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">48</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">49</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">50</td>
                                    <td class="row-source"><pre>    function activateLoan(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">51</td>
                                    <td class="row-source"><pre>        handler.activateLoan(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">52</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">53</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">54</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">55</td>
                                    <td class="row-source"><pre>    function repayLoan(uint256 loanId, uint256 principalAmount, uint256 interestAmount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">56</td>
                                    <td class="row-source"><pre>        handler.repayLoan(loanId, principalAmount, interestAmount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">57</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">58</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">59</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">60</td>
                                    <td class="row-source"><pre>    function declareDefault(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">61</td>
                                    <td class="row-source"><pre>        handler.declareDefault(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">62</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">63</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">64</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">65</td>
                                    <td class="row-source"><pre>    function writeOffLoan(uint256 loanId) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">66</td>
                                    <td class="row-source"><pre>        handler.writeOffLoan(loanId);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">67</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">68</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">69</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">70</td>
                                    <td class="row-source"><pre>    function recoverLoan(uint256 loanId, uint256 amount) public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">71</td>
                                    <td class="row-source"><pre>        handler.recoverLoan(loanId, amount);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">72</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">73</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">74</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">75</td>
                                    <td class="row-source"><pre>    function closePool() public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">76</td>
                                    <td class="row-source"><pre>        handler.closePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">77</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">78</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">79</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">80</td>
                                    <td class="row-source"><pre>    function triggerOverRecoveryBug() public {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">81</td>
                                    <td class="row-source"><pre>        handler.triggerOverRecoveryBug();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">82</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">83</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">84</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">85</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">86</td>
                                    <td class="row-source"><pre>    // MASTER INVARIANT CHECKER - calls all 12 invariants</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">87</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">88</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">89</td>
                                    <td class="row-source"><pre>    function _checkAllInvariants() internal view {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">90</td>
                                    <td class="row-source"><pre>        _invariant_totalIdleAndDeployedValueMatchesAccounting();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">91</td>
                                    <td class="row-source"><pre>        _invariant_OutStandingPrincipalMatchesDeployed();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">92</td>
                                    <td class="row-source"><pre>        _invariant_totalUnclaimedInterestAndIdleValueMatchesTotalTokenBalance();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">93</td>
                                    <td class="row-source"><pre>        _invariant_totalDeployedValueMatchesSumOfIndividualTranches();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">94</td>
                                    <td class="row-source"><pre>        _invariant_systemLevel_PrincipalIntegrity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">95</td>
                                    <td class="row-source"><pre>        _invariant_lossRecoveryWaterfallSymmetry();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">96</td>
                                    <td class="row-source"><pre>        _invariant_totalIdleValueIntegrity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">97</td>
                                    <td class="row-source"><pre>        _invariant_seniorShareToIdleOpen();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">98</td>
                                    <td class="row-source"><pre>        _invariant_loanStateConsistency();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">99</td>
                                    <td class="row-source"><pre>        _invariant_interestIndexMonotonicity();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">100</td>
                                    <td class="row-source"><pre>        _invariant_poolStateValidityDeployedCapital();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">101</td>
                                    <td class="row-source"><pre>        _invariant_loanInterestAccounting();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">102</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">103</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">104</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">105</td>
                                    <td class="row-source"><pre>    // INVARIANT 1: Total Idle And Deployed Value Matches Accounting</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">106</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">107</td>
                                    <td class="row-source"><pre>    function _invariant_totalIdleAndDeployedValueMatchesAccounting() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">108</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">109</td>
                                    <td class="row-source"><pre>        uint256 left = tp.getTotalIdleValue() + tp.getTotalDeployedValue();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">110</td>
                                    <td class="row-source"><pre>        uint256 right = tp.getTotalDeposited() - tp.getTotalLoss() + tp.getTotalRecovered();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">111</td>
                                    <td class="row-source"><pre>        assert(left == right);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">112</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">113</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">114</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">115</td>
                                    <td class="row-source"><pre>    // INVARIANT 2: Outstanding Principal Matches Deployed</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">116</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">117</td>
                                    <td class="row-source"><pre>    function _invariant_OutStandingPrincipalMatchesDeployed() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">118</td>
                                    <td class="row-source"><pre>        assert(handler.outstandingPrincipal() == handler.tranchePool().getTotalDeployedValue());</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">119</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">120</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">121</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">122</td>
                                    <td class="row-source"><pre>    // INVARIANT 3: Total Unclaimed Interest + Idle Value = Token Balance</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">123</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">124</td>
                                    <td class="row-source"><pre>    function _invariant_totalUnclaimedInterestAndIdleValueMatchesTotalTokenBalance() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">125</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">126</td>
                                    <td class="row-source"><pre>        uint256 left = tp.getTotalUnclaimedInterest() + tp.getTotalIdleValue() + tp.getProtocolRevenue();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">127</td>
                                    <td class="row-source"><pre>        uint256 tokenBalance = ERC20Mock(address(handler.usdt())).balanceOf(address(tp));</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">128</td>
                                    <td class="row-source"><pre>        assert(left == tokenBalance);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">129</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">130</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">131</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">132</td>
                                    <td class="row-source"><pre>    // INVARIANT 4: Total Deployed Value = Sum of Individual Tranches</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">133</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">134</td>
                                    <td class="row-source"><pre>    function _invariant_totalDeployedValueMatchesSumOfIndividualTranches() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">135</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">136</td>
                                    <td class="row-source"><pre>        uint256 total = tp.getTotalDeployedValue();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">137</td>
                                    <td class="row-source"><pre>        uint256 sum = tp.getSeniorTrancheDeployedValue() + </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">138</td>
                                    <td class="row-source"><pre>                      tp.getJuniorTrancheDeployedValue() + </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">139</td>
                                    <td class="row-source"><pre>                      tp.getEquityTrancheDeployedValue();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">140</td>
                                    <td class="row-source"><pre>        assert(total == sum);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">141</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">142</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">143</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">144</td>
                                    <td class="row-source"><pre>    // INVARIANT 5: System Level Principal Integrity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">145</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">146</td>
                                    <td class="row-source"><pre>    function _invariant_systemLevel_PrincipalIntegrity() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">147</td>
                                    <td class="row-source"><pre>        LoanEngine le = handler.loanEngine();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">148</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">149</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">150</td>
                                    <td class="row-source"><pre>        uint256 totalOutstandingPrincipal = 0;</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">151</td>
                                    <td class="row-source"><pre>        uint256 nextId = le.getNextLoanId();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">152</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">153</td>
                                    <td class="row-source"><pre>        for (uint256 i = 1; i &lt; nextId; i++) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">154</td>
                                    <td class="row-source"><pre>            LoanEngine.Loan memory loan = le.getLoanDetails(i);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">155</td>
                                    <td class="row-source"><pre>            totalOutstandingPrincipal += loan.principalOutstanding;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">156</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">157</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">158</td>
                                    <td class="row-source"><pre>        assert(totalOutstandingPrincipal == tp.getTotalDeployedValue());</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">159</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">160</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">161</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">162</td>
                                    <td class="row-source"><pre>    // INVARIANT 6: Loss Recovery Waterfall Symmetry (FIXED VERSION)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">163</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">164</td>
                                    <td class="row-source"><pre>    function _invariant_lossRecoveryWaterfallSymmetry() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">165</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">166</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">167</td>
                                    <td class="row-source"><pre>        uint256 totalShortfall = tp.getSeniorPrincipalShortfall() +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">168</td>
                                    <td class="row-source"><pre>            tp.getJuniorPrincipalShortfall() +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">169</td>
                                    <td class="row-source"><pre>            tp.getEquityPrincipalShortfall();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">170</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">171</td>
                                    <td class="row-source"><pre>        if (tp.getTotalRecovered() &gt;= tp.getTotalLoss()) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">172</td>
                                    <td class="row-source"><pre>            // If we recovered more than lost, shortfall should be 0</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">173</td>
                                    <td class="row-source"><pre>            assert(totalShortfall == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">174</td>
                                    <td class="row-source"><pre>        } else {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">175</td>
                                    <td class="row-source"><pre>            // Otherwise shortfall = loss - recovered</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">176</td>
                                    <td class="row-source"><pre>            uint256 expectedShortfall = tp.getTotalLoss() - tp.getTotalRecovered();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">177</td>
                                    <td class="row-source"><pre>            assert(totalShortfall == expectedShortfall);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">178</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">179</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">180</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">181</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">182</td>
                                    <td class="row-source"><pre>    // INVARIANT 7: Total Idle Value Integrity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">183</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">184</td>
                                    <td class="row-source"><pre>    function _invariant_totalIdleValueIntegrity() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">185</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">186</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">187</td>
                                    <td class="row-source"><pre>        uint256 sum = tp.getSeniorTrancheIdleValue() +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">188</td>
                                    <td class="row-source"><pre>            tp.getJuniorTrancheIdleValue() +</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">189</td>
                                    <td class="row-source"><pre>            tp.getEquityTrancheIdleValue();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">190</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">191</td>
                                    <td class="row-source"><pre>        assert(sum == tp.getTotalIdleValue());</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">192</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">193</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">194</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">195</td>
                                    <td class="row-source"><pre>    // INVARIANT 8: Senior Share To Idle (OPEN state)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">196</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">197</td>
                                    <td class="row-source"><pre>    function _invariant_seniorShareToIdleOpen() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">198</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">199</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">200</td>
                                    <td class="row-source"><pre>        if (tp.getPoolState() == TranchePool.PoolState.OPEN) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">201</td>
                                    <td class="row-source"><pre>            assert(tp.getTotalSeniorShares() == tp.getSeniorTrancheIdleValue());</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">202</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">203</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">204</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">205</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">206</td>
                                    <td class="row-source"><pre>    // INVARIANT 9: Loan State Consistency</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">207</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">208</td>
                                    <td class="row-source"><pre>    function _invariant_loanStateConsistency() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">209</td>
                                    <td class="row-source"><pre>        LoanEngine le = handler.loanEngine();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">210</td>
                                    <td class="row-source"><pre>        uint256 nextId = le.getNextLoanId();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">211</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">212</td>
                                    <td class="row-source"><pre>        for (uint256 i = 1; i &lt; nextId; i++) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">213</td>
                                    <td class="row-source"><pre>            LoanEngine.Loan memory loan = le.getLoanDetails(i);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">214</td>
                                    <td class="row-source"><pre>            </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">215</td>
                                    <td class="row-source"><pre>            // NONE and CREATED should have 0 principal outstanding</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">216</td>
                                    <td class="row-source"><pre>            if (loan.state == LoanEngine.LoanState.NONE || </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">217</td>
                                    <td class="row-source"><pre>                loan.state == LoanEngine.LoanState.CREATED) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">218</td>
                                    <td class="row-source"><pre>                assert(loan.principalOutstanding == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">219</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">220</td>
                                    <td class="row-source"><pre>            </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">221</td>
                                    <td class="row-source"><pre>            // REPAID and WRITTEN_OFF must have 0 outstanding</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">222</td>
                                    <td class="row-source"><pre>            if (loan.state == LoanEngine.LoanState.REPAID ||</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">223</td>
                                    <td class="row-source"><pre>                loan.state == LoanEngine.LoanState.WRITTEN_OFF) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">224</td>
                                    <td class="row-source"><pre>                assert(loan.principalOutstanding == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">225</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">226</td>
                                    <td class="row-source"><pre>            </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">227</td>
                                    <td class="row-source"><pre>            // ACTIVE loans must have principalOutstanding &lt;= principalIssued</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">228</td>
                                    <td class="row-source"><pre>            if (loan.state == LoanEngine.LoanState.ACTIVE) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">229</td>
                                    <td class="row-source"><pre>                assert(loan.principalOutstanding &lt;= loan.principalIssued);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">230</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">231</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">232</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">233</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">234</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">235</td>
                                    <td class="row-source"><pre>    // INVARIANT 10: Interest Index Monotonicity</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">236</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">237</td>
                                    <td class="row-source"><pre>    function _invariant_interestIndexMonotonicity() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">238</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">239</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">240</td>
                                    <td class="row-source"><pre>        // Indices initialize at 1e18 and can only increase</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">241</td>
                                    <td class="row-source"><pre>        assert(tp.getSeniorInterestIndex() &gt;= 1e18);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">242</td>
                                    <td class="row-source"><pre>        assert(tp.getJuniorInterestIndex() &gt;= 1e18);</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">243</td>
                                    <td class="row-source"><pre>        assert(tp.getEquityInterestIndex() &gt;= 1e18);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">244</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">245</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">246</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">247</td>
                                    <td class="row-source"><pre>    // INVARIANT 11: Pool State Validity (Deployed Capital)</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">248</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">249</td>
                                    <td class="row-source"><pre>    function _invariant_poolStateValidityDeployedCapital() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">250</td>
                                    <td class="row-source"><pre>        TranchePool tp = handler.tranchePool();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">251</td>
                                    <td class="row-source"><pre>        TranchePool.PoolState state = tp.getPoolState();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">252</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">253</td>
                                    <td class="row-source"><pre>        if (state == TranchePool.PoolState.OPEN || </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">254</td>
                                    <td class="row-source"><pre>            state == TranchePool.PoolState.CLOSED) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">255</td>
                                    <td class="row-source"><pre>            assert(tp.getTotalDeployedValue() == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">256</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">257</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">258</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">259</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">260</td>
                                    <td class="row-source"><pre>    // INVARIANT 12: Loan Interest Accounting</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">261</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">262</td>
                                    <td class="row-source"><pre>    function _invariant_loanInterestAccounting() internal view {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">263</td>
                                    <td class="row-source"><pre>        LoanEngine le = handler.loanEngine();</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">264</td>
                                    <td class="row-source"><pre>        uint256 nextId = le.getNextLoanId();</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">265</td>
                                    <td class="row-source"><pre>        </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">266</td>
                                    <td class="row-source"><pre>        for (uint256 i = 1; i &lt; nextId; i++) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">267</td>
                                    <td class="row-source"><pre>            LoanEngine.Loan memory loan = le.getLoanDetails(i);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">268</td>
                                    <td class="row-source"><pre>            </pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">269</td>
                                    <td class="row-source"><pre>            if (loan.state == LoanEngine.LoanState.REPAID) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">270</td>
                                    <td class="row-source"><pre>                assert(loan.interestAccrued == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">271</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">272</td>
                                    <td class="row-source"><pre>            if (loan.state == LoanEngine.LoanState.WRITTEN_OFF) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">273</td>
                                    <td class="row-source"><pre>                assert(loan.interestAccrued == 0);</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">274</td>
                                    <td class="row-source"><pre>            }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">275</td>
                                    <td class="row-source"><pre>        }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">276</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">277</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">278</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">279</td>
                                    <td class="row-source"><pre>    // ECHIDNA PROPERTIES</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">280</td>
                                    <td class="row-source"><pre>    // =========================================================================</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">281</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">282</td>
                                    <td class="row-source"><pre>    function echidna_property_alive() public pure returns (bool) {</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">283</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">284</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">285</td>
                                    <td class="row-source"><pre>    </pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">286</td>
                                    <td class="row-source"><pre>    function echidna_check_all_invariants() public view returns (bool) {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">287</td>
                                    <td class="row-source"><pre>        _checkAllInvariants();</pre></td>
                                </tr>
                                <tr class="row-line-uncovered">
                                    <td class="row-line-number">288</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">289</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">290</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">291</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="source-file" id="test_mocks_MockLoanProofVerifier_sol" data-file-path="test/mocks/MockLoanProofVerifier.sol" data-lines-active="2" data-lines-covered="2">
                    <div class="source-file-header">
                        <div class="file-info">
                            <span class="coverage-badge" style="background-color: hsla(120, 90%, 45%, 0.15); color: hsl(120, 90%, 45%)">
                                100.0%
                            </span>
                            <span class="file-name">test/mocks/MockLoanProofVerifier.sol</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="source-file-content">
                        <div class="source-file-stats">
                            <span>Lines covered: <strong>2 / 2</strong> (100.0%)</span>
                        </div>
                        <div class="code-container">
                            <table class="code-coverage-table">
                                <tr>
                                    <td class="row-line-number">1</td>
                                    <td class="row-source"><pre>// SPDX-License-Identifier: MIT</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">2</td>
                                    <td class="row-source"><pre>pragma solidity ^0.8.24;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">3</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">4</td>
                                    <td class="row-source"><pre>contract MockLoanProofVerifier {</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">5</td>
                                    <td class="row-source"><pre>    function verify(</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">6</td>
                                    <td class="row-source"><pre>        bytes calldata proof,</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">7</td>
                                    <td class="row-source"><pre>        bytes32[] calldata publicInputs</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">8</td>
                                    <td class="row-source"><pre>    ) external pure returns (bool) {</pre></td>
                                </tr>
                                <tr class="row-line-covered">
                                    <td class="row-line-number">9</td>
                                    <td class="row-source"><pre>        return true;</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">10</td>
                                    <td class="row-source"><pre>    }</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">11</td>
                                    <td class="row-source"><pre>}</pre></td>
                                </tr>
                                <tr>
                                    <td class="row-line-number">12</td>
                                    <td class="row-source"><pre></pre></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <div>Report generated by <a href="https://github.com/crytic/echidna" target="_blank">Echidna</a> on February 07, 2026 at 14:27:22 UTC</div>
        </footer>
    </div>
    <script>
// Initialize the application when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    initSourceFileExpansion();
    initializeFileTree();
    initResizer();
});

// Initialize source file expansion behavior
function initSourceFileExpansion() {
    document.querySelectorAll('.source-file').forEach(file => {
        const header = file.querySelector('.source-file-header');
        header.addEventListener('click', () => {
            file.classList.toggle('expanded');
            const chevron = header.querySelector('.chevron-icon');
            chevron.style.transform = file.classList.contains('expanded') ? 'rotate(180deg)' : 'rotate(0)';
        });
    });
}

// Initialize the resizer functionality
function initResizer() {
    const fileExplorer = document.getElementById('file-explorer');
    const resizer = document.getElementById('file-explorer-resizer');
    let startX, startWidth;

    // Handle mousedown on the resizer
    resizer.addEventListener('mousedown', e => {
        startX = e.clientX;
        startWidth = parseInt(window.getComputedStyle(fileExplorer).width, 10);

        // Add event listeners for resizing
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', handleMouseUp);

        // Prevent text selection during resize
        document.body.style.userSelect = 'none';
        document.body.style.cursor = 'col-resize';
    });

    // Handle mousemove for resizing
    function handleMouseMove(e) {
        const newWidth = startWidth + (e.clientX - startX);

        // Apply width constraints
        if (newWidth >= 200 && newWidth <= 500) {
            fileExplorer.style.width = newWidth + 'px';
            fileExplorer.style.flex = `0 0 ${newWidth}px`;
        }
    }

    // Handle mouseup to end resizing
    function handleMouseUp() {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
        document.body.style.userSelect = '';
        document.body.style.cursor = '';
    }
}

// Helper function to get color based on coverage percentage
function getCoverageColor(percentage) {
    return percentage < 50
        ? `hsl(${percentage * 1.2}, 90%, 50%)`
        : `hsl(${60 + (percentage - 50) * 1.2}, 90%, 45%)`;
}

// Helper function for transparent background with coverage color
function getCoverageColorAlpha(percentage) {
    return percentage < 50
        ? `hsla(${percentage * 1.2}, 90%, 50%, 0.15)`
        : `hsla(${60 + (percentage - 50) * 1.2}, 90%, 45%, 0.15)`;
}

// Build file tree structure from file paths
function buildFileTree() {
    const root = { name: '', type: 'directory', children: {}, path: '' };
    const sourceFiles = document.getElementsByClassName("source-file");

    // First pass: build the tree structure
    for (let i = 0; i < sourceFiles.length; i++) {
        const filePath = sourceFiles[i].dataset.filePath;
        const pathParts = filePath.split(/[\/\\]+/);
        let current = root;
        let currentPath = '';

        for (let j = 0; j < pathParts.length; j++) {
            const part = pathParts[j];
            if (part === '') continue;

            currentPath += (currentPath ? '/' : '') + part;

            if (j === pathParts.length - 1) {
                // This is a file
                current.children[part] = {
                    name: part,
                    type: 'file',
                    path: filePath,
                    element: sourceFiles[i],
                    coveredLines: parseInt(sourceFiles[i].dataset.linesCovered),
                    activeLines: parseInt(sourceFiles[i].dataset.linesActive)
                };
            } else {
                // This is a directory
                if (!current.children[part]) {
                    current.children[part] = {
                        name: part,
                        type: 'directory',
                        children: {},
                        path: currentPath
                    };
                }
                current = current.children[part];
            }
        }
    }

    // Second pass: calculate directory coverage
    calculateDirectoryCoverage(root);

    return root;
}

// Calculate coverage for directories by aggregating file coverage
function calculateDirectoryCoverage(node) {
    if (node.type === 'file') {
        return {
            coveredLines: node.coveredLines,
            activeLines: node.activeLines
        };
    }

    let totalCovered = 0;
    let totalActive = 0;

    for (const childName in node.children) {
        const child = node.children[childName];
        const { coveredLines, activeLines } = calculateDirectoryCoverage(child);
        totalCovered += coveredLines;
        totalActive += activeLines;
    }

    node.coveredLines = totalCovered;
    node.activeLines = totalActive;

    return {
        coveredLines: totalCovered,
        activeLines: totalActive
    };
}

// Render the file tree to the DOM
function renderFileTree(node, parentElement, isRoot = false) {
    const list = isRoot ? parentElement : document.createElement('ul');

    // Sort children: directories first, then files, both alphabetically
    const sortedChildren = Object.values(node.children).sort((a, b) => {
        if (a.type !== b.type) return a.type === 'directory' ? -1 : 1;
        return a.name.localeCompare(b.name);
    });

    for (const child of sortedChildren) {
        const li = document.createElement('li');
        li.className = child.type;

        // Create item container
        const itemDiv = document.createElement('div');
        itemDiv.className = 'file-item';

        // Create toggle button for directories
        const toggle = document.createElement('span');
        toggle.className = 'file-toggle';
        itemDiv.appendChild(toggle);

        // Create file/folder icon
        const icon = document.createElement('span');
        icon.className = 'file-icon';
        itemDiv.appendChild(icon);

        // Create name span
        const nameSpan = document.createElement('span');
        nameSpan.className = 'file-name';
        nameSpan.textContent = child.name;
        itemDiv.appendChild(nameSpan);

        // Add coverage indicator
        if (child.activeLines > 0) {
            const coverage = document.createElement('span');
            coverage.className = 'file-coverage';
            const percentage = Math.round((child.coveredLines / child.activeLines) * 100);
            coverage.style.backgroundColor = getCoverageColor(percentage);
            coverage.title = `${child.coveredLines}/${child.activeLines} lines covered (${percentage}%)`;
            itemDiv.appendChild(coverage);
        }

        li.appendChild(itemDiv);

        // Handle click events
        if (child.type === 'directory') {
            toggle.addEventListener('click', e => {
                e.stopPropagation();
                li.classList.toggle('expanded');
            });

            itemDiv.addEventListener('click', () => {
                li.classList.toggle('expanded');
            });

            // Recursively render children
            renderFileTree(child, li);
        } else {
            // Add click handler for files
            itemDiv.addEventListener('click', () => {
                // Deactivate all other items
                document.querySelectorAll('.file-item.active').forEach(el => {
                    el.classList.remove('active');
                });

                // Activate this item
                itemDiv.classList.add('active');

                // Navigate to the file
                const fileElement = child.element;
                fileElement.scrollIntoView({ behavior: 'smooth' });

                // Expand the file if it's collapsed
                if (!fileElement.classList.contains('expanded')) {
                    fileElement.querySelector('.source-file-header').click();
                }
            });
        }

        list.appendChild(li);
    }

    if (!isRoot) {
        parentElement.appendChild(list);
    }
}

// Initialize the file tree
function initializeFileTree() {
    const fileTreeRoot = document.getElementById('file-tree-root');
    const fileTree = buildFileTree();
    renderFileTree(fileTree, fileTreeRoot, true);

    // Expand the first level directories by default
    document.querySelectorAll('#file-tree-root > li.directory').forEach(dir => {
        dir.classList.add('expanded');
    });

    // Initialize search functionality
    initializeFileSearch();
}

// Initialize file search functionality
function initializeFileSearch() {
    const searchInput = document.getElementById('file-search-input');
    const clearButton = document.getElementById('file-search-clear');
    const noResultsMessage = document.getElementById('search-no-results');

    // Debounce function to limit how often the search is performed during typing
    function debounce(func, delay) {
        let timeout;
        return function() {
            const context = this;
            const args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(context, args), delay);
        };
    }

    // Function to highlight text that matches the search term
    function highlightText(element, searchTerm) {
        const text = element.textContent;

        if (!searchTerm) {
            // Clear any existing highlights
            element.textContent = text;
            return false;
        }

        const lowerText = text.toLowerCase();
        const lowerSearchTerm = searchTerm.toLowerCase();

        if (lowerText.includes(lowerSearchTerm)) {
            const startIndex = lowerText.indexOf(lowerSearchTerm);
            const endIndex = startIndex + lowerSearchTerm.length;

            const beforeMatch = text.substring(0, startIndex);
            const match = text.substring(startIndex, endIndex);
            const afterMatch = text.substring(endIndex);

            element.innerHTML = beforeMatch + '<span class="search-highlight">' + match + '</span>' + afterMatch;
            return true;
        }

        element.textContent = text;
        return false;
    }

    // Function to filter the file tree based on search term
    function filterFileTree(searchTerm) {
        const fileTreeItems = document.querySelectorAll('.file-tree li');
        let hasVisibleItems = false;

        if (searchTerm === '') {
            // If search is cleared, show everything and reset expansion state
            fileTreeItems.forEach(item => {
                const nameElement = item.querySelector('.file-name');
                highlightText(nameElement, ''); // Clear highlights
                item.style.display = '';

                // Only expand first level by default
                if (item.classList.contains('directory')) {
                    // Check if this is a direct child of the root file tree
                    if (item.parentElement.id === 'file-tree-root') {
                        item.classList.add('expanded');
                    } else {
                        item.classList.remove('expanded');
                    }
                }
            });
        } else {
            // Two-pass filtering for search

            // First pass: hide everything and find matches
            const matchingItems = [];
            fileTreeItems.forEach(item => {
                const nameElement = item.querySelector('.file-name');
                const isMatch = highlightText(nameElement, searchTerm);
                item.style.display = 'none'; // Hide everything initially

                if (isMatch) {
                    matchingItems.push(item);
                }
            });

            // Second pass: show matching items and all their ancestor directories
            matchingItems.forEach(item => {
                hasVisibleItems = true;

                // Show the matching item
                item.style.display = '';

                // Show and expand all parent directories
                let parent = item.parentElement.closest('li.directory');
                while (parent) {
                    parent.style.display = '';
                    parent.classList.add('expanded');
                    parent = parent.parentElement.closest('li.directory');
                }
            });
        }

        // Show/hide the "no results" message
        noResultsMessage.style.display = searchTerm && !hasVisibleItems ? 'block' : 'none';
    }

    // Debounced search function to avoid excessive filtering while typing
    const debouncedSearch = debounce(filterFileTree, 200);

    // Search input event
    searchInput.addEventListener('input', function() {
        debouncedSearch(this.value.trim());
    });

    // Clear button event
    clearButton.addEventListener('click', function() {
        searchInput.value = '';
        filterFileTree('');
        searchInput.focus();
    });
}

// Button click handler for expanding/collapsing all files
function setAllSourceFilesCollapsed(collapsed) {
    document.querySelectorAll('.source-file').forEach(file => {
        if ((collapsed && file.classList.contains('expanded')) ||
            (!collapsed && !file.classList.contains('expanded'))) {
            file.querySelector('.source-file-header').click();
        }
    });
}

// Button click handler for expanding/collapsing empty files
function setEmptySourceFilesCollapsed(collapsed) {
    document.querySelectorAll('.source-file').forEach(file => {
        if (parseInt(file.dataset.linesActive) <= 0) {
            if ((collapsed && file.classList.contains('expanded')) ||
                (!collapsed && !file.classList.contains('expanded'))) {
                file.querySelector('.source-file-header').click();
            }
        }
    });
}    </script>
</body>
</html>